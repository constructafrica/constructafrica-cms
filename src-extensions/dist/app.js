import{useApi as e,useStores as n,defineInterface as t}from"@directus/extensions-sdk";import{ref as r,reactive as o,onMounted as a,onBeforeUnmount as i,watch as l,resolveComponent as u,openBlock as c,createElementBlock as f,Fragment as s,renderList as d,createCommentVNode as p,createVNode as v,createElementVNode as h,withCtx as m,createBlock as g,toDisplayString as y,createTextVNode as _,defineComponent as b,computed as w,resolveDirective as x,withDirectives as k,normalizeClass as C,withModifiers as j}from"vue";import{useI18n as I}from"vue-i18n";var E=[],S=[];function O(e,n){if(e&&"undefined"!=typeof document){var t,r=!0===n.prepend?"prepend":"append",o=!0===n.singleTag,a="string"==typeof n.container?document.querySelector(n.container):document.getElementsByTagName("head")[0];if(o){var i=E.indexOf(a);-1===i&&(i=E.push(a)-1,S[i]={}),t=S[i]&&S[i][r]?S[i][r]:S[i][r]=l()}else t=l();65279===e.charCodeAt(0)&&(e=e.substring(1)),t.styleSheet?t.styleSheet.cssText+=e:t.appendChild(document.createTextNode(e))}function l(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),n.attributes)for(var t=Object.keys(n.attributes),o=0;o<t.length;o++)e.setAttribute(t[o],n.attributes[t[o]]);var i="prepend"===r?"afterbegin":"beforeend";return a.insertAdjacentElement(i,e),e}}O("\n.project-companies-selector[data-v-9354d9c3] {\n  padding: 12px;\n  background-color: var(--theme--background-subdued);\n  border-radius: var(--theme--border-radius);\n}\n.company-row[data-v-9354d9c3] {\n  display: grid;\n  grid-template-columns: 200px 1fr 40px;\n  gap: 12px;\n  align-items: start;\n  margin-bottom: 12px;\n  padding: 12px;\n  background-color: var(--theme--background);\n  border-radius: var(--theme--border-radius);\n  border: 2px solid var(--theme--border-color-subdued);\n}\n.role-select[data-v-9354d9c3] {\n  width: 100%;\n}\n.company-select-wrapper[data-v-9354d9c3] {\n  position: relative;\n  width: 100%;\n}\n.company-dropdown[data-v-9354d9c3] {\n  position: absolute;\n  top: 100%;\n  left: 0;\n  right: 0;\n  margin-top: 4px;\n  max-height: 300px;\n  overflow-y: auto;\n  background-color: var(--theme--background);\n  border: 2px solid var(--theme--border-color-subdued);\n  border-radius: var(--theme--border-radius);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n  z-index: 100;\n}\n.company-option[data-v-9354d9c3] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px;\n  cursor: pointer;\n  transition: background-color 0.2s;\n}\n.company-option[data-v-9354d9c3]:hover {\n  background-color: var(--theme--background-subdued);\n}\n.company-option.create-new[data-v-9354d9c3] {\n  border-top: 2px solid var(--theme--border-color-subdued);\n  color: var(--theme--primary);\n  font-weight: 500;\n}\n.company-info[data-v-9354d9c3] {\n  flex: 1;\n  min-width: 0;\n}\n.company-name[data-v-9354d9c3] {\n  font-size: 14px;\n  font-weight: 500;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.company-email[data-v-9354d9c3] {\n  font-size: 12px;\n  color: var(--theme--foreground-subdued);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.no-results[data-v-9354d9c3] {\n  padding: 12px;\n  text-align: center;\n  color: var(--theme--foreground-subdued);\n  font-size: 14px;\n}\n.remove-btn[data-v-9354d9c3] {\n  color: var(--theme--danger);\n  cursor: pointer;\n  transition: transform 0.2s;\n  margin-top: 8px;\n}\n.remove-btn[data-v-9354d9c3]:hover {\n  transform: scale(1.1);\n}\n.grid[data-v-9354d9c3] {\n  display: grid;\n  gap: 20px;\n}\n.field[data-v-9354d9c3] {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n.field.full[data-v-9354d9c3] {\n  grid-column: 1 / -1;\n}\n.field.half[data-v-9354d9c3] {\n  grid-column: span 1;\n}\n.type-label[data-v-9354d9c3] {\n  font-weight: 600;\n  font-size: 14px;\n  color: var(--theme--foreground);\n}\n@media (max-width: 768px) {\n.company-row[data-v-9354d9c3] {\n    grid-template-columns: 1fr;\n}\n.remove-btn[data-v-9354d9c3] {\n    justify-self: end;\n    margin-top: 0;\n}\n.field.half[data-v-9354d9c3] {\n    grid-column: 1 / -1;\n}\n}\n",{});var A=(e,n)=>{const t=e.__vccOpts||e;for(const[e,r]of n)t[e]=r;return t};const R={props:{value:{type:Array,default:()=>[]},collection:{type:String,default:null},primaryKey:{type:[String,Number],default:null}},emits:["input"],setup(n,{emit:t}){const u=e(),{t:c}=I(),f=r([]),s=r([]),d=o({}),p=o({}),v=o({}),h=o({}),m=r(!1),g=r(!1),y=r(!1),_=r(!1),b=r(null),w=r(null),x={},k=r({name:"",email:"",phone:""}),C=async(e,n)=>{if(!n||n.length<2)p[e]=[];else{b.value=e,_.value=!0;try{const t=n.trim().split(/\s+/).filter(e=>e.length>0).map(e=>({name:{_icontains:e}})),r=await u.get("/items/companies",{params:{fields:["id","name","email"],limit:50,filter:{_or:t},sort:["name"]}});p[e]=r.data.data.map(e=>({text:e.name,value:e.id,company:e}))}catch(n){console.error("Error searching companies:",n),p[e]=[]}finally{_.value=!1,b.value=null}}},j=async()=>{if(!n.primaryKey||"+"===n.primaryKey)return console.log("New item or invalid primaryKey, adding empty row"),void(0===f.value.length&&S());try{console.log("Loading existing data for project:",n.primaryKey);const e=await u.get("/items/project_companies",{params:{filter:{project_id:{_eq:n.primaryKey}},fields:["id","role_id","company_id.id","company_id.name"],limit:-1}});console.log("Loaded project_companies:",e.data.data),e.data.data.length>0?(f.value=[],e.data.data.forEach((e,n)=>{const t="object"==typeof e.company_id?e.company_id.id:e.company_id,r="object"==typeof e.company_id?e.company_id.name:"";f.value.push({id:e.id,role_id:e.role_id,company_id:t}),r&&(d[n]=r,h[n]=r),p[n]=[],v[n]=!1})):S()}catch(e){console.error("Error loading existing data:",e),0===f.value.length&&S()}};a(async()=>{console.log("Component mounted, primaryKey:",n.primaryKey),await(async()=>{y.value=!0;try{const e=await u.get("/items/project_company_roles",{params:{fields:["id","name","slug"],limit:-1,sort:["name"]}});s.value=e.data.data.map(e=>({text:e.name,value:e.id}))}catch(e){console.error("Error loading roles:",e)}finally{y.value=!1}})(),await j(),console.log("After loadExistingData:",{internalValue:f.value,searchQueries:{...d}}),document.addEventListener("click",E)}),i(()=>{document.removeEventListener("click",E),Object.values(x).forEach(e=>clearTimeout(e))});const E=e=>{e.target.closest(".company-select-wrapper")||Object.keys(v).forEach(e=>{v[e]=!1})};l(()=>n.value,e=>{e&&Array.isArray(e)&&e.length>0&&(f.value=e.map(e=>({id:e.id||null,role_id:e.role_id||null,company_id:"object"==typeof e.company_id?e.company_id?.id:e.company_id})))},{deep:!0}),l(()=>n.primaryKey,(e,n)=>{console.log("PrimaryKey changed from",n,"to",e),e!==n&&e&&"+"!==e&&(f.value=[],Object.keys(d).forEach(e=>delete d[e]),Object.keys(p).forEach(e=>delete p[e]),Object.keys(v).forEach(e=>delete v[e]),Object.keys(h).forEach(e=>delete h[e]),j())});const S=()=>{const e=f.value.length;f.value.push({id:null,role_id:null,company_id:null}),d[e]="",p[e]=[],v[e]=!1,O()},O=()=>{const e=f.value.filter(e=>e.role_id&&e.company_id).map(e=>({id:e.id,role_id:e.role_id,company_id:e.company_id}));t("input",e.length>0?e:[])};return{t:c,internalValue:f,roleOptions:s,searchQueries:d,filteredCompanies:p,showDropdown:v,selectedCompanyNames:h,showCreateDialog:m,creating:g,loadingRoles:y,loadingCompanies:_,activeSearchIndex:b,newCompany:k,addItem:S,removeItem:e=>{f.value.splice(e,1),delete d[e],delete p[e],delete v[e],delete h[e],O()},handleSearchInput:(e,n)=>{d[e]=n,v[e]=!0,x[e]&&clearTimeout(x[e]),x[e]=setTimeout(()=>{C(e,n)},300)},handleSearchFocus:e=>{v[e]=!0,d[e]&&d[e].length>=2&&C(e,d[e])},selectCompany:(e,n)=>{f.value[e].company_id=n.value,d[e]=n.text,h[e]=n.text,v[e]=!1,O()},companyExistsInResults:e=>{const n=d[e]?.toLowerCase();return p[e]?.some(e=>e.text.toLowerCase()===n)},handleCreateNew:e=>{w.value=e,k.value.name=d[e],v[e]=!1,m.value=!0},createCompany:async()=>{if(k.value.name){g.value=!0;try{const e=(await u.post("/items/companies",k.value)).data.data;if(null!==w.value){const n=w.value;f.value[n].company_id=e.id,d[n]=e.name,h[n]=e.name,O()}m.value=!1,k.value={name:"",email:"",phone:""},w.value=null}catch(e){console.error("Error creating company:",e),alert("Failed to create company. Please try again.")}finally{g.value=!1}}},updateValue:O}}},D={class:"project-companies-selector"},F={class:"company-select-wrapper"},U={key:0,class:"company-dropdown"},N=["onClick"],V={class:"company-info"},B={class:"company-name"},z={key:0,class:"company-email"},T=["onClick"],$={class:"company-info"},L={class:"company-name"},P={key:1,class:"no-results"},K={class:"grid"},W={class:"field full"},M={class:"type-label"},q={class:"field half"},Q={class:"type-label"},G={class:"field half"},Z={class:"type-label"};var J,H,Y={id:"project-companies-selector",name:"Project Companies Selector",description:"Select companies with roles in a user-friendly interface",icon:"business",component:A(R,[["render",function(e,n,t,r,o,a){const i=u("v-select"),l=u("v-icon"),b=u("v-input"),w=u("v-button"),x=u("v-card-title"),k=u("v-card-text"),C=u("v-card-actions"),j=u("v-card"),I=u("v-dialog");return c(),f("div",D,[(c(!0),f(s,null,d(r.internalValue,(e,n)=>(c(),f("div",{key:e.id||`new-${n}`,class:"company-row"},[p(" Role Dropdown "),v(i,{modelValue:e.role_id,"onUpdate:modelValue":[n=>e.role_id=n,r.updateValue],items:r.roleOptions,"item-title":"text","item-value":"value",placeholder:r.t("select_role"),loading:r.loadingRoles,class:"role-select"},null,8,["modelValue","onUpdate:modelValue","items","placeholder","loading"]),p(" Company Search Input with Dropdown "),h("div",F,[v(b,{"model-value":r.searchQueries[n]||"",placeholder:r.t("search_or_create_company"),"onUpdate:modelValue":e=>r.handleSearchInput(n,e),onFocus:e=>r.handleSearchFocus(n)},{prepend:m(()=>[v(l,{name:"business",small:""})]),append:m(()=>[r.loadingCompanies&&r.activeSearchIndex===n?(c(),g(l,{key:0,name:"refresh",small:"",spin:""})):p("v-if",!0)]),_:2},1032,["model-value","placeholder","onUpdate:modelValue","onFocus"]),p(" Dropdown Results "),r.showDropdown[n]&&(r.filteredCompanies[n]?.length>0||r.searchQueries[n]?.length>0)?(c(),f("div",U,[(c(!0),f(s,null,d(r.filteredCompanies[n],e=>(c(),f("div",{key:e.value,class:"company-option",onClick:t=>r.selectCompany(n,e)},[v(l,{name:"business",small:""}),h("div",V,[h("div",B,y(e.text),1),e.company?.email?(c(),f("div",z,y(e.company.email),1)):p("v-if",!0)])],8,N))),128)),p(" Create New Option "),r.searchQueries[n]&&r.searchQueries[n].length>2&&!r.companyExistsInResults(n)?(c(),f("div",{key:0,class:"company-option create-new",onClick:e=>r.handleCreateNew(n)},[v(l,{name:"add_circle",small:""}),h("div",$,[h("div",L,'Create "'+y(r.searchQueries[n])+'"',1)])],8,T)):p("v-if",!0),!r.loadingCompanies&&0===r.filteredCompanies[n]?.length&&r.searchQueries[n]?.length>0?(c(),f("div",P," No companies found. Type to create new. ")):p("v-if",!0)])):p("v-if",!0)]),p(" Remove Button "),v(l,{name:"close",clickable:"",class:"remove-btn",onClick:e=>r.removeItem(n)},null,8,["onClick"])]))),128)),p(" Add New Button "),v(w,{secondary:"",small:"",onClick:r.addItem},{default:m(()=>[v(l,{name:"add",small:""}),_(" "+y(r.t("add_company")),1)]),_:1},8,["onClick"]),p(" Create Company Dialog "),v(I,{modelValue:r.showCreateDialog,"onUpdate:modelValue":n[4]||(n[4]=e=>r.showCreateDialog=e),onEsc:n[5]||(n[5]=e=>r.showCreateDialog=!1)},{default:m(()=>[v(j,null,{default:m(()=>[v(x,null,{default:m(()=>[_(y(r.t("create_new_company")),1)]),_:1}),v(k,null,{default:m(()=>[h("div",K,[h("div",W,[h("div",M,y(r.t("company_name")),1),v(b,{modelValue:r.newCompany.name,"onUpdate:modelValue":n[0]||(n[0]=e=>r.newCompany.name=e),placeholder:r.t("enter_company_name"),autofocus:""},null,8,["modelValue","placeholder"])]),h("div",q,[h("div",Q,y(r.t("email")),1),v(b,{modelValue:r.newCompany.email,"onUpdate:modelValue":n[1]||(n[1]=e=>r.newCompany.email=e),type:"email",placeholder:r.t("enter_email")},null,8,["modelValue","placeholder"])]),h("div",G,[h("div",Z,y(r.t("phone")),1),v(b,{modelValue:r.newCompany.phone,"onUpdate:modelValue":n[2]||(n[2]=e=>r.newCompany.phone=e),placeholder:r.t("enter_phone")},null,8,["modelValue","placeholder"])])])]),_:1}),v(C,null,{default:m(()=>[v(w,{secondary:"",onClick:n[3]||(n[3]=e=>r.showCreateDialog=!1)},{default:m(()=>[_(y(r.t("cancel")),1)]),_:1}),v(w,{loading:r.creating,disabled:!r.newCompany.name,onClick:r.createCompany},{default:m(()=>[_(y(r.t("create")),1)]),_:1},8,["loading","disabled","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}],["__scopeId","data-v-9354d9c3"],["__file","interface.vue"]]),options:null,types:["alias"],localTypes:["o2m"],group:"relational",relational:!0},X="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ee={exports:{}};J=ee,H=ee.exports,function(){var e,n="Expected a function",t="__lodash_hash_undefined__",r="__lodash_placeholder__",o=16,a=32,i=64,l=128,u=256,c=1/0,f=9007199254740991,s=NaN,d=4294967295,p=[["ary",l],["bind",1],["bindKey",2],["curry",8],["curryRight",o],["flip",512],["partial",a],["partialRight",i],["rearg",u]],v="[object Arguments]",h="[object Array]",m="[object Boolean]",g="[object Date]",y="[object Error]",_="[object Function]",b="[object GeneratorFunction]",w="[object Map]",x="[object Number]",k="[object Object]",C="[object Promise]",j="[object RegExp]",I="[object Set]",E="[object String]",S="[object Symbol]",O="[object WeakMap]",A="[object ArrayBuffer]",R="[object DataView]",D="[object Float32Array]",F="[object Float64Array]",U="[object Int8Array]",N="[object Int16Array]",V="[object Int32Array]",B="[object Uint8Array]",z="[object Uint8ClampedArray]",T="[object Uint16Array]",$="[object Uint32Array]",L=/\b__p \+= '';/g,P=/\b(__p \+=) '' \+/g,K=/(__e\(.*?\)|\b__t\)) \+\n'';/g,W=/&(?:amp|lt|gt|quot|#39);/g,M=/[&<>"']/g,q=RegExp(W.source),Q=RegExp(M.source),G=/<%-([\s\S]+?)%>/g,Z=/<%([\s\S]+?)%>/g,Y=/<%=([\s\S]+?)%>/g,ee=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ne=/^\w*$/,te=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,re=/[\\^$.*+?()[\]{}|]/g,oe=RegExp(re.source),ae=/^\s+/,ie=/\s/,le=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ue=/\{\n\/\* \[wrapped with (.+)\] \*/,ce=/,? & /,fe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,se=/[()=,{}\[\]\/\s]/,de=/\\(\\)?/g,pe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ve=/\w*$/,he=/^[-+]0x[0-9a-f]+$/i,me=/^0b[01]+$/i,ge=/^\[object .+?Constructor\]$/,ye=/^0o[0-7]+$/i,_e=/^(?:0|[1-9]\d*)$/,be=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,we=/($^)/,xe=/['\n\r\u2028\u2029\\]/g,ke="\\ud800-\\udfff",Ce="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",je="\\u2700-\\u27bf",Ie="a-z\\xdf-\\xf6\\xf8-\\xff",Ee="A-Z\\xc0-\\xd6\\xd8-\\xde",Se="\\ufe0e\\ufe0f",Oe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ae="['’]",Re="["+ke+"]",De="["+Oe+"]",Fe="["+Ce+"]",Ue="\\d+",Ne="["+je+"]",Ve="["+Ie+"]",Be="[^"+ke+Oe+Ue+je+Ie+Ee+"]",ze="\\ud83c[\\udffb-\\udfff]",Te="[^"+ke+"]",$e="(?:\\ud83c[\\udde6-\\uddff]){2}",Le="[\\ud800-\\udbff][\\udc00-\\udfff]",Pe="["+Ee+"]",Ke="\\u200d",We="(?:"+Ve+"|"+Be+")",Me="(?:"+Pe+"|"+Be+")",qe="(?:['’](?:d|ll|m|re|s|t|ve))?",Qe="(?:['’](?:D|LL|M|RE|S|T|VE))?",Ge="(?:"+Fe+"|"+ze+")?",Ze="["+Se+"]?",Je=Ze+Ge+"(?:"+Ke+"(?:"+[Te,$e,Le].join("|")+")"+Ze+Ge+")*",He="(?:"+[Ne,$e,Le].join("|")+")"+Je,Ye="(?:"+[Te+Fe+"?",Fe,$e,Le,Re].join("|")+")",Xe=RegExp(Ae,"g"),en=RegExp(Fe,"g"),nn=RegExp(ze+"(?="+ze+")|"+Ye+Je,"g"),tn=RegExp([Pe+"?"+Ve+"+"+qe+"(?="+[De,Pe,"$"].join("|")+")",Me+"+"+Qe+"(?="+[De,Pe+We,"$"].join("|")+")",Pe+"?"+We+"+"+qe,Pe+"+"+Qe,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ue,He].join("|"),"g"),rn=RegExp("["+Ke+ke+Ce+Se+"]"),on=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,an=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ln=-1,un={};un[D]=un[F]=un[U]=un[N]=un[V]=un[B]=un[z]=un[T]=un[$]=!0,un[v]=un[h]=un[A]=un[m]=un[R]=un[g]=un[y]=un[_]=un[w]=un[x]=un[k]=un[j]=un[I]=un[E]=un[O]=!1;var cn={};cn[v]=cn[h]=cn[A]=cn[R]=cn[m]=cn[g]=cn[D]=cn[F]=cn[U]=cn[N]=cn[V]=cn[w]=cn[x]=cn[k]=cn[j]=cn[I]=cn[E]=cn[S]=cn[B]=cn[z]=cn[T]=cn[$]=!0,cn[y]=cn[_]=cn[O]=!1;var fn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},sn=parseFloat,dn=parseInt,pn="object"==typeof X&&X&&X.Object===Object&&X,vn="object"==typeof self&&self&&self.Object===Object&&self,hn=pn||vn||Function("return this")(),mn=H&&!H.nodeType&&H,gn=mn&&J&&!J.nodeType&&J,yn=gn&&gn.exports===mn,_n=yn&&pn.process,bn=function(){try{var e=gn&&gn.require&&gn.require("util").types;return e||_n&&_n.binding&&_n.binding("util")}catch(e){}}(),wn=bn&&bn.isArrayBuffer,xn=bn&&bn.isDate,kn=bn&&bn.isMap,Cn=bn&&bn.isRegExp,jn=bn&&bn.isSet,In=bn&&bn.isTypedArray;function En(e,n,t){switch(t.length){case 0:return e.call(n);case 1:return e.call(n,t[0]);case 2:return e.call(n,t[0],t[1]);case 3:return e.call(n,t[0],t[1],t[2])}return e.apply(n,t)}function Sn(e,n,t,r){for(var o=-1,a=null==e?0:e.length;++o<a;){var i=e[o];n(r,i,t(i),e)}return r}function On(e,n){for(var t=-1,r=null==e?0:e.length;++t<r&&!1!==n(e[t],t,e););return e}function An(e,n){for(var t=null==e?0:e.length;t--&&!1!==n(e[t],t,e););return e}function Rn(e,n){for(var t=-1,r=null==e?0:e.length;++t<r;)if(!n(e[t],t,e))return!1;return!0}function Dn(e,n){for(var t=-1,r=null==e?0:e.length,o=0,a=[];++t<r;){var i=e[t];n(i,t,e)&&(a[o++]=i)}return a}function Fn(e,n){return!(null==e||!e.length)&&Kn(e,n,0)>-1}function Un(e,n,t){for(var r=-1,o=null==e?0:e.length;++r<o;)if(t(n,e[r]))return!0;return!1}function Nn(e,n){for(var t=-1,r=null==e?0:e.length,o=Array(r);++t<r;)o[t]=n(e[t],t,e);return o}function Vn(e,n){for(var t=-1,r=n.length,o=e.length;++t<r;)e[o+t]=n[t];return e}function Bn(e,n,t,r){var o=-1,a=null==e?0:e.length;for(r&&a&&(t=e[++o]);++o<a;)t=n(t,e[o],o,e);return t}function zn(e,n,t,r){var o=null==e?0:e.length;for(r&&o&&(t=e[--o]);o--;)t=n(t,e[o],o,e);return t}function Tn(e,n){for(var t=-1,r=null==e?0:e.length;++t<r;)if(n(e[t],t,e))return!0;return!1}var $n=Qn("length");function Ln(e,n,t){var r;return t(e,function(e,t,o){if(n(e,t,o))return r=t,!1}),r}function Pn(e,n,t,r){for(var o=e.length,a=t+(r?1:-1);r?a--:++a<o;)if(n(e[a],a,e))return a;return-1}function Kn(e,n,t){return n==n?function(e,n,t){for(var r=t-1,o=e.length;++r<o;)if(e[r]===n)return r;return-1}(e,n,t):Pn(e,Mn,t)}function Wn(e,n,t,r){for(var o=t-1,a=e.length;++o<a;)if(r(e[o],n))return o;return-1}function Mn(e){return e!=e}function qn(e,n){var t=null==e?0:e.length;return t?Jn(e,n)/t:s}function Qn(n){return function(t){return null==t?e:t[n]}}function Gn(n){return function(t){return null==n?e:n[t]}}function Zn(e,n,t,r,o){return o(e,function(e,o,a){t=r?(r=!1,e):n(t,e,o,a)}),t}function Jn(n,t){for(var r,o=-1,a=n.length;++o<a;){var i=t(n[o]);i!==e&&(r=r===e?i:r+i)}return r}function Hn(e,n){for(var t=-1,r=Array(e);++t<e;)r[t]=n(t);return r}function Yn(e){return e?e.slice(0,ht(e)+1).replace(ae,""):e}function Xn(e){return function(n){return e(n)}}function et(e,n){return Nn(n,function(n){return e[n]})}function nt(e,n){return e.has(n)}function tt(e,n){for(var t=-1,r=e.length;++t<r&&Kn(n,e[t],0)>-1;);return t}function rt(e,n){for(var t=e.length;t--&&Kn(n,e[t],0)>-1;);return t}var ot=Gn({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),at=Gn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function it(e){return"\\"+fn[e]}function lt(e){return rn.test(e)}function ut(e){var n=-1,t=Array(e.size);return e.forEach(function(e,r){t[++n]=[r,e]}),t}function ct(e,n){return function(t){return e(n(t))}}function ft(e,n){for(var t=-1,o=e.length,a=0,i=[];++t<o;){var l=e[t];l!==n&&l!==r||(e[t]=r,i[a++]=t)}return i}function st(e){var n=-1,t=Array(e.size);return e.forEach(function(e){t[++n]=e}),t}function dt(e){var n=-1,t=Array(e.size);return e.forEach(function(e){t[++n]=[e,e]}),t}function pt(e){return lt(e)?function(e){for(var n=nn.lastIndex=0;nn.test(e);)++n;return n}(e):$n(e)}function vt(e){return lt(e)?function(e){return e.match(nn)||[]}(e):function(e){return e.split("")}(e)}function ht(e){for(var n=e.length;n--&&ie.test(e.charAt(n)););return n}var mt=Gn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),gt=function J(H){var X,ie=(H=null==H?hn:gt.defaults(hn.Object(),H,gt.pick(hn,an))).Array,ke=H.Date,Ce=H.Error,je=H.Function,Ie=H.Math,Ee=H.Object,Se=H.RegExp,Oe=H.String,Ae=H.TypeError,Re=ie.prototype,De=je.prototype,Fe=Ee.prototype,Ue=H["__core-js_shared__"],Ne=De.toString,Ve=Fe.hasOwnProperty,Be=0,ze=(X=/[^.]+$/.exec(Ue&&Ue.keys&&Ue.keys.IE_PROTO||""))?"Symbol(src)_1."+X:"",Te=Fe.toString,$e=Ne.call(Ee),Le=hn._,Pe=Se("^"+Ne.call(Ve).replace(re,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ke=yn?H.Buffer:e,We=H.Symbol,Me=H.Uint8Array,qe=Ke?Ke.allocUnsafe:e,Qe=ct(Ee.getPrototypeOf,Ee),Ge=Ee.create,Ze=Fe.propertyIsEnumerable,Je=Re.splice,He=We?We.isConcatSpreadable:e,Ye=We?We.iterator:e,nn=We?We.toStringTag:e,rn=function(){try{var e=pa(Ee,"defineProperty");return e({},"",{}),e}catch(e){}}(),fn=H.clearTimeout!==hn.clearTimeout&&H.clearTimeout,pn=ke&&ke.now!==hn.Date.now&&ke.now,vn=H.setTimeout!==hn.setTimeout&&H.setTimeout,mn=Ie.ceil,gn=Ie.floor,_n=Ee.getOwnPropertySymbols,bn=Ke?Ke.isBuffer:e,$n=H.isFinite,Gn=Re.join,yt=ct(Ee.keys,Ee),_t=Ie.max,bt=Ie.min,wt=ke.now,xt=H.parseInt,kt=Ie.random,Ct=Re.reverse,jt=pa(H,"DataView"),It=pa(H,"Map"),Et=pa(H,"Promise"),St=pa(H,"Set"),Ot=pa(H,"WeakMap"),At=pa(Ee,"create"),Rt=Ot&&new Ot,Dt={},Ft=Ta(jt),Ut=Ta(It),Nt=Ta(Et),Vt=Ta(St),Bt=Ta(Ot),zt=We?We.prototype:e,Tt=zt?zt.valueOf:e,$t=zt?zt.toString:e;function Lt(e){if(tl(e)&&!Mi(e)&&!(e instanceof Mt)){if(e instanceof Wt)return e;if(Ve.call(e,"__wrapped__"))return $a(e)}return new Wt(e)}var Pt=function(){function n(){}return function(t){if(!nl(t))return{};if(Ge)return Ge(t);n.prototype=t;var r=new n;return n.prototype=e,r}}();function Kt(){}function Wt(n,t){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=e}function Mt(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=d,this.__views__=[]}function qt(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function Qt(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function Gt(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function Zt(e){var n=-1,t=null==e?0:e.length;for(this.__data__=new Gt;++n<t;)this.add(e[n])}function Jt(e){var n=this.__data__=new Qt(e);this.size=n.size}function Ht(e,n){var t=Mi(e),r=!t&&Wi(e),o=!t&&!r&&Zi(e),a=!t&&!r&&!o&&fl(e),i=t||r||o||a,l=i?Hn(e.length,Oe):[],u=l.length;for(var c in e)!n&&!Ve.call(e,c)||i&&("length"==c||o&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ba(c,u))||l.push(c);return l}function Yt(n){var t=n.length;return t?n[Zr(0,t-1)]:e}function Xt(e,n){return Va(Ro(e),ur(n,0,e.length))}function er(e){return Va(Ro(e))}function nr(n,t,r){(r!==e&&!Li(n[t],r)||r===e&&!(t in n))&&ir(n,t,r)}function tr(n,t,r){var o=n[t];Ve.call(n,t)&&Li(o,r)&&(r!==e||t in n)||ir(n,t,r)}function rr(e,n){for(var t=e.length;t--;)if(Li(e[t][0],n))return t;return-1}function or(e,n,t,r){return pr(e,function(e,o,a){n(r,e,t(e),a)}),r}function ar(e,n){return e&&Do(n,Dl(n),e)}function ir(e,n,t){"__proto__"==n&&rn?rn(e,n,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[n]=t}function lr(n,t){for(var r=-1,o=t.length,a=ie(o),i=null==n;++r<o;)a[r]=i?e:El(n,t[r]);return a}function ur(n,t,r){return n==n&&(r!==e&&(n=n<=r?n:r),t!==e&&(n=n>=t?n:t)),n}function cr(n,t,r,o,a,i){var l,u=1&t,c=2&t,f=4&t;if(r&&(l=a?r(n,o,a,i):r(n)),l!==e)return l;if(!nl(n))return n;var s=Mi(n);if(s){if(l=function(e){var n=e.length,t=new e.constructor(n);return n&&"string"==typeof e[0]&&Ve.call(e,"index")&&(t.index=e.index,t.input=e.input),t}(n),!u)return Ro(n,l)}else{var d=ma(n),p=d==_||d==b;if(Zi(n))return jo(n,u);if(d==k||d==v||p&&!a){if(l=c||p?{}:ya(n),!u)return c?function(e,n){return Do(e,ha(e),n)}(n,function(e,n){return e&&Do(n,Fl(n),e)}(l,n)):function(e,n){return Do(e,va(e),n)}(n,ar(l,n))}else{if(!cn[d])return a?n:{};l=function(e,n,t){var r,o=e.constructor;switch(n){case A:return Io(e);case m:case g:return new o(+e);case R:return function(e,n){var t=n?Io(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.byteLength)}(e,t);case D:case F:case U:case N:case V:case B:case z:case T:case $:return Eo(e,t);case w:return new o;case x:case E:return new o(e);case j:return function(e){var n=new e.constructor(e.source,ve.exec(e));return n.lastIndex=e.lastIndex,n}(e);case I:return new o;case S:return r=e,Tt?Ee(Tt.call(r)):{}}}(n,d,u)}}i||(i=new Jt);var h=i.get(n);if(h)return h;i.set(n,l),ll(n)?n.forEach(function(e){l.add(cr(e,t,r,e,n,i))}):rl(n)&&n.forEach(function(e,o){l.set(o,cr(e,t,r,o,n,i))});var y=s?e:(f?c?ia:aa:c?Fl:Dl)(n);return On(y||n,function(e,o){y&&(e=n[o=e]),tr(l,o,cr(e,t,r,o,n,i))}),l}function fr(n,t,r){var o=r.length;if(null==n)return!o;for(n=Ee(n);o--;){var a=r[o],i=t[a],l=n[a];if(l===e&&!(a in n)||!i(l))return!1}return!0}function sr(t,r,o){if("function"!=typeof t)throw new Ae(n);return Da(function(){t.apply(e,o)},r)}function dr(e,n,t,r){var o=-1,a=Fn,i=!0,l=e.length,u=[],c=n.length;if(!l)return u;t&&(n=Nn(n,Xn(t))),r?(a=Un,i=!1):n.length>=200&&(a=nt,i=!1,n=new Zt(n));e:for(;++o<l;){var f=e[o],s=null==t?f:t(f);if(f=r||0!==f?f:0,i&&s==s){for(var d=c;d--;)if(n[d]===s)continue e;u.push(f)}else a(n,s,r)||u.push(f)}return u}Lt.templateSettings={escape:G,evaluate:Z,interpolate:Y,variable:"",imports:{_:Lt}},Lt.prototype=Kt.prototype,Lt.prototype.constructor=Lt,Wt.prototype=Pt(Kt.prototype),Wt.prototype.constructor=Wt,Mt.prototype=Pt(Kt.prototype),Mt.prototype.constructor=Mt,qt.prototype.clear=function(){this.__data__=At?At(null):{},this.size=0},qt.prototype.delete=function(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n},qt.prototype.get=function(n){var r=this.__data__;if(At){var o=r[n];return o===t?e:o}return Ve.call(r,n)?r[n]:e},qt.prototype.has=function(n){var t=this.__data__;return At?t[n]!==e:Ve.call(t,n)},qt.prototype.set=function(n,r){var o=this.__data__;return this.size+=this.has(n)?0:1,o[n]=At&&r===e?t:r,this},Qt.prototype.clear=function(){this.__data__=[],this.size=0},Qt.prototype.delete=function(e){var n=this.__data__,t=rr(n,e);return!(t<0||(t==n.length-1?n.pop():Je.call(n,t,1),--this.size,0))},Qt.prototype.get=function(n){var t=this.__data__,r=rr(t,n);return r<0?e:t[r][1]},Qt.prototype.has=function(e){return rr(this.__data__,e)>-1},Qt.prototype.set=function(e,n){var t=this.__data__,r=rr(t,e);return r<0?(++this.size,t.push([e,n])):t[r][1]=n,this},Gt.prototype.clear=function(){this.size=0,this.__data__={hash:new qt,map:new(It||Qt),string:new qt}},Gt.prototype.delete=function(e){var n=sa(this,e).delete(e);return this.size-=n?1:0,n},Gt.prototype.get=function(e){return sa(this,e).get(e)},Gt.prototype.has=function(e){return sa(this,e).has(e)},Gt.prototype.set=function(e,n){var t=sa(this,e),r=t.size;return t.set(e,n),this.size+=t.size==r?0:1,this},Zt.prototype.add=Zt.prototype.push=function(e){return this.__data__.set(e,t),this},Zt.prototype.has=function(e){return this.__data__.has(e)},Jt.prototype.clear=function(){this.__data__=new Qt,this.size=0},Jt.prototype.delete=function(e){var n=this.__data__,t=n.delete(e);return this.size=n.size,t},Jt.prototype.get=function(e){return this.__data__.get(e)},Jt.prototype.has=function(e){return this.__data__.has(e)},Jt.prototype.set=function(e,n){var t=this.__data__;if(t instanceof Qt){var r=t.__data__;if(!It||r.length<199)return r.push([e,n]),this.size=++t.size,this;t=this.__data__=new Gt(r)}return t.set(e,n),this.size=t.size,this};var pr=No(wr),vr=No(xr,!0);function hr(e,n){var t=!0;return pr(e,function(e,r,o){return t=!!n(e,r,o)}),t}function mr(n,t,r){for(var o=-1,a=n.length;++o<a;){var i=n[o],l=t(i);if(null!=l&&(u===e?l==l&&!cl(l):r(l,u)))var u=l,c=i}return c}function gr(e,n){var t=[];return pr(e,function(e,r,o){n(e,r,o)&&t.push(e)}),t}function yr(e,n,t,r,o){var a=-1,i=e.length;for(t||(t=_a),o||(o=[]);++a<i;){var l=e[a];n>0&&t(l)?n>1?yr(l,n-1,t,r,o):Vn(o,l):r||(o[o.length]=l)}return o}var _r=Vo(),br=Vo(!0);function wr(e,n){return e&&_r(e,n,Dl)}function xr(e,n){return e&&br(e,n,Dl)}function kr(e,n){return Dn(n,function(n){return Yi(e[n])})}function Cr(n,t){for(var r=0,o=(t=wo(t,n)).length;null!=n&&r<o;)n=n[za(t[r++])];return r&&r==o?n:e}function jr(e,n,t){var r=n(e);return Mi(e)?r:Vn(r,t(e))}function Ir(n){return null==n?n===e?"[object Undefined]":"[object Null]":nn&&nn in Ee(n)?function(n){var t=Ve.call(n,nn),r=n[nn];try{n[nn]=e;var o=!0}catch(e){}var a=Te.call(n);return o&&(t?n[nn]=r:delete n[nn]),a}(n):function(e){return Te.call(e)}(n)}function Er(e,n){return e>n}function Sr(e,n){return null!=e&&Ve.call(e,n)}function Or(e,n){return null!=e&&n in Ee(e)}function Ar(n,t,r){for(var o=r?Un:Fn,a=n[0].length,i=n.length,l=i,u=ie(i),c=1/0,f=[];l--;){var s=n[l];l&&t&&(s=Nn(s,Xn(t))),c=bt(s.length,c),u[l]=!r&&(t||a>=120&&s.length>=120)?new Zt(l&&s):e}s=n[0];var d=-1,p=u[0];e:for(;++d<a&&f.length<c;){var v=s[d],h=t?t(v):v;if(v=r||0!==v?v:0,!(p?nt(p,h):o(f,h,r))){for(l=i;--l;){var m=u[l];if(!(m?nt(m,h):o(n[l],h,r)))continue e}p&&p.push(h),f.push(v)}}return f}function Rr(n,t,r){var o=null==(n=Oa(n,t=wo(t,n)))?n:n[za(Ha(t))];return null==o?e:En(o,n,r)}function Dr(e){return tl(e)&&Ir(e)==v}function Fr(n,t,r,o,a){return n===t||(null==n||null==t||!tl(n)&&!tl(t)?n!=n&&t!=t:function(n,t,r,o,a,i){var l=Mi(n),u=Mi(t),c=l?h:ma(n),f=u?h:ma(t),s=(c=c==v?k:c)==k,d=(f=f==v?k:f)==k,p=c==f;if(p&&Zi(n)){if(!Zi(t))return!1;l=!0,s=!1}if(p&&!s)return i||(i=new Jt),l||fl(n)?ra(n,t,r,o,a,i):function(e,n,t,r,o,a,i){switch(t){case R:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case A:return!(e.byteLength!=n.byteLength||!a(new Me(e),new Me(n)));case m:case g:case x:return Li(+e,+n);case y:return e.name==n.name&&e.message==n.message;case j:case E:return e==n+"";case w:var l=ut;case I:var u=1&r;if(l||(l=st),e.size!=n.size&&!u)return!1;var c=i.get(e);if(c)return c==n;r|=2,i.set(e,n);var f=ra(l(e),l(n),r,o,a,i);return i.delete(e),f;case S:if(Tt)return Tt.call(e)==Tt.call(n)}return!1}(n,t,c,r,o,a,i);if(!(1&r)){var _=s&&Ve.call(n,"__wrapped__"),b=d&&Ve.call(t,"__wrapped__");if(_||b){var C=_?n.value():n,O=b?t.value():t;return i||(i=new Jt),a(C,O,r,o,i)}}return!!p&&(i||(i=new Jt),function(n,t,r,o,a,i){var l=1&r,u=aa(n),c=u.length,f=aa(t),s=f.length;if(c!=s&&!l)return!1;for(var d=c;d--;){var p=u[d];if(!(l?p in t:Ve.call(t,p)))return!1}var v=i.get(n),h=i.get(t);if(v&&h)return v==t&&h==n;var m=!0;i.set(n,t),i.set(t,n);for(var g=l;++d<c;){var y=n[p=u[d]],_=t[p];if(o)var b=l?o(_,y,p,t,n,i):o(y,_,p,n,t,i);if(!(b===e?y===_||a(y,_,r,o,i):b)){m=!1;break}g||(g="constructor"==p)}if(m&&!g){var w=n.constructor,x=t.constructor;w==x||!("constructor"in n)||!("constructor"in t)||"function"==typeof w&&w instanceof w&&"function"==typeof x&&x instanceof x||(m=!1)}return i.delete(n),i.delete(t),m}(n,t,r,o,a,i))}(n,t,r,o,Fr,a))}function Ur(n,t,r,o){var a=r.length,i=a,l=!o;if(null==n)return!i;for(n=Ee(n);a--;){var u=r[a];if(l&&u[2]?u[1]!==n[u[0]]:!(u[0]in n))return!1}for(;++a<i;){var c=(u=r[a])[0],f=n[c],s=u[1];if(l&&u[2]){if(f===e&&!(c in n))return!1}else{var d=new Jt;if(o)var p=o(f,s,c,n,t,d);if(!(p===e?Fr(s,f,3,o,d):p))return!1}}return!0}function Nr(e){return!(!nl(e)||(n=e,ze&&ze in n))&&(Yi(e)?Pe:ge).test(Ta(e));var n}function Vr(e){return"function"==typeof e?e:null==e?ou:"object"==typeof e?Mi(e)?Pr(e[0],e[1]):Lr(e):pu(e)}function Br(e){if(!ja(e))return yt(e);var n=[];for(var t in Ee(e))Ve.call(e,t)&&"constructor"!=t&&n.push(t);return n}function zr(e){if(!nl(e))return function(e){var n=[];if(null!=e)for(var t in Ee(e))n.push(t);return n}(e);var n=ja(e),t=[];for(var r in e)("constructor"!=r||!n&&Ve.call(e,r))&&t.push(r);return t}function Tr(e,n){return e<n}function $r(e,n){var t=-1,r=Qi(e)?ie(e.length):[];return pr(e,function(e,o,a){r[++t]=n(e,o,a)}),r}function Lr(e){var n=da(e);return 1==n.length&&n[0][2]?Ea(n[0][0],n[0][1]):function(t){return t===e||Ur(t,e,n)}}function Pr(n,t){return xa(n)&&Ia(t)?Ea(za(n),t):function(r){var o=El(r,n);return o===e&&o===t?Sl(r,n):Fr(t,o,3)}}function Kr(n,t,r,o,a){n!==t&&_r(t,function(i,l){if(a||(a=new Jt),nl(i))!function(n,t,r,o,a,i,l){var u=Aa(n,r),c=Aa(t,r),f=l.get(c);if(f)nr(n,r,f);else{var s=i?i(u,c,r+"",n,t,l):e,d=s===e;if(d){var p=Mi(c),v=!p&&Zi(c),h=!p&&!v&&fl(c);s=c,p||v||h?Mi(u)?s=u:Gi(u)?s=Ro(u):v?(d=!1,s=jo(c,!0)):h?(d=!1,s=Eo(c,!0)):s=[]:al(c)||Wi(c)?(s=u,Wi(u)?s=yl(u):nl(u)&&!Yi(u)||(s=ya(c))):d=!1}d&&(l.set(c,s),a(s,c,o,i,l),l.delete(c)),nr(n,r,s)}}(n,t,l,r,Kr,o,a);else{var u=o?o(Aa(n,l),i,l+"",n,t,a):e;u===e&&(u=i),nr(n,l,u)}},Fl)}function Wr(n,t){var r=n.length;if(r)return ba(t+=t<0?r:0,r)?n[t]:e}function Mr(e,n,t){n=n.length?Nn(n,function(e){return Mi(e)?function(n){return Cr(n,1===e.length?e[0]:e)}:e}):[ou];var r=-1;n=Nn(n,Xn(fa()));var o=$r(e,function(e,t,o){var a=Nn(n,function(n){return n(e)});return{criteria:a,index:++r,value:e}});return function(e,n){var t=e.length;for(e.sort(n);t--;)e[t]=e[t].value;return e}(o,function(e,n){return function(e,n,t){for(var r=-1,o=e.criteria,a=n.criteria,i=o.length,l=t.length;++r<i;){var u=So(o[r],a[r]);if(u)return r>=l?u:u*("desc"==t[r]?-1:1)}return e.index-n.index}(e,n,t)})}function qr(e,n,t){for(var r=-1,o=n.length,a={};++r<o;){var i=n[r],l=Cr(e,i);t(l,i)&&eo(a,wo(i,e),l)}return a}function Qr(e,n,t,r){var o=r?Wn:Kn,a=-1,i=n.length,l=e;for(e===n&&(n=Ro(n)),t&&(l=Nn(e,Xn(t)));++a<i;)for(var u=0,c=n[a],f=t?t(c):c;(u=o(l,f,u,r))>-1;)l!==e&&Je.call(l,u,1),Je.call(e,u,1);return e}function Gr(e,n){for(var t=e?n.length:0,r=t-1;t--;){var o=n[t];if(t==r||o!==a){var a=o;ba(o)?Je.call(e,o,1):po(e,o)}}return e}function Zr(e,n){return e+gn(kt()*(n-e+1))}function Jr(e,n){var t="";if(!e||n<1||n>f)return t;do{n%2&&(t+=e),(n=gn(n/2))&&(e+=e)}while(n);return t}function Hr(e,n){return Fa(Sa(e,n,ou),e+"")}function Yr(e){return Yt(Ll(e))}function Xr(e,n){var t=Ll(e);return Va(t,ur(n,0,t.length))}function eo(n,t,r,o){if(!nl(n))return n;for(var a=-1,i=(t=wo(t,n)).length,l=i-1,u=n;null!=u&&++a<i;){var c=za(t[a]),f=r;if("__proto__"===c||"constructor"===c||"prototype"===c)return n;if(a!=l){var s=u[c];(f=o?o(s,c,u):e)===e&&(f=nl(s)?s:ba(t[a+1])?[]:{})}tr(u,c,f),u=u[c]}return n}var no=Rt?function(e,n){return Rt.set(e,n),e}:ou,to=rn?function(e,n){return rn(e,"toString",{configurable:!0,enumerable:!1,value:nu(n),writable:!0})}:ou;function ro(e){return Va(Ll(e))}function oo(e,n,t){var r=-1,o=e.length;n<0&&(n=-n>o?0:o+n),(t=t>o?o:t)<0&&(t+=o),o=n>t?0:t-n>>>0,n>>>=0;for(var a=ie(o);++r<o;)a[r]=e[r+n];return a}function ao(e,n){var t;return pr(e,function(e,r,o){return!(t=n(e,r,o))}),!!t}function io(e,n,t){var r=0,o=null==e?r:e.length;if("number"==typeof n&&n==n&&o<=2147483647){for(;r<o;){var a=r+o>>>1,i=e[a];null!==i&&!cl(i)&&(t?i<=n:i<n)?r=a+1:o=a}return o}return lo(e,n,ou,t)}function lo(n,t,r,o){var a=0,i=null==n?0:n.length;if(0===i)return 0;for(var l=(t=r(t))!=t,u=null===t,c=cl(t),f=t===e;a<i;){var s=gn((a+i)/2),d=r(n[s]),p=d!==e,v=null===d,h=d==d,m=cl(d);if(l)var g=o||h;else g=f?h&&(o||p):u?h&&p&&(o||!v):c?h&&p&&!v&&(o||!m):!v&&!m&&(o?d<=t:d<t);g?a=s+1:i=s}return bt(i,4294967294)}function uo(e,n){for(var t=-1,r=e.length,o=0,a=[];++t<r;){var i=e[t],l=n?n(i):i;if(!t||!Li(l,u)){var u=l;a[o++]=0===i?0:i}}return a}function co(e){return"number"==typeof e?e:cl(e)?s:+e}function fo(e){if("string"==typeof e)return e;if(Mi(e))return Nn(e,fo)+"";if(cl(e))return $t?$t.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}function so(e,n,t){var r=-1,o=Fn,a=e.length,i=!0,l=[],u=l;if(t)i=!1,o=Un;else if(a>=200){var c=n?null:Ho(e);if(c)return st(c);i=!1,o=nt,u=new Zt}else u=n?[]:l;e:for(;++r<a;){var f=e[r],s=n?n(f):f;if(f=t||0!==f?f:0,i&&s==s){for(var d=u.length;d--;)if(u[d]===s)continue e;n&&u.push(s),l.push(f)}else o(u,s,t)||(u!==l&&u.push(s),l.push(f))}return l}function po(e,n){return null==(e=Oa(e,n=wo(n,e)))||delete e[za(Ha(n))]}function vo(e,n,t,r){return eo(e,n,t(Cr(e,n)),r)}function ho(e,n,t,r){for(var o=e.length,a=r?o:-1;(r?a--:++a<o)&&n(e[a],a,e););return t?oo(e,r?0:a,r?a+1:o):oo(e,r?a+1:0,r?o:a)}function mo(e,n){var t=e;return t instanceof Mt&&(t=t.value()),Bn(n,function(e,n){return n.func.apply(n.thisArg,Vn([e],n.args))},t)}function go(e,n,t){var r=e.length;if(r<2)return r?so(e[0]):[];for(var o=-1,a=ie(r);++o<r;)for(var i=e[o],l=-1;++l<r;)l!=o&&(a[o]=dr(a[o]||i,e[l],n,t));return so(yr(a,1),n,t)}function yo(n,t,r){for(var o=-1,a=n.length,i=t.length,l={};++o<a;){var u=o<i?t[o]:e;r(l,n[o],u)}return l}function _o(e){return Gi(e)?e:[]}function bo(e){return"function"==typeof e?e:ou}function wo(e,n){return Mi(e)?e:xa(e,n)?[e]:Ba(_l(e))}var xo=Hr;function ko(n,t,r){var o=n.length;return r=r===e?o:r,!t&&r>=o?n:oo(n,t,r)}var Co=fn||function(e){return hn.clearTimeout(e)};function jo(e,n){if(n)return e.slice();var t=e.length,r=qe?qe(t):new e.constructor(t);return e.copy(r),r}function Io(e){var n=new e.constructor(e.byteLength);return new Me(n).set(new Me(e)),n}function Eo(e,n){var t=n?Io(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}function So(n,t){if(n!==t){var r=n!==e,o=null===n,a=n==n,i=cl(n),l=t!==e,u=null===t,c=t==t,f=cl(t);if(!u&&!f&&!i&&n>t||i&&l&&c&&!u&&!f||o&&l&&c||!r&&c||!a)return 1;if(!o&&!i&&!f&&n<t||f&&r&&a&&!o&&!i||u&&r&&a||!l&&a||!c)return-1}return 0}function Oo(e,n,t,r){for(var o=-1,a=e.length,i=t.length,l=-1,u=n.length,c=_t(a-i,0),f=ie(u+c),s=!r;++l<u;)f[l]=n[l];for(;++o<i;)(s||o<a)&&(f[t[o]]=e[o]);for(;c--;)f[l++]=e[o++];return f}function Ao(e,n,t,r){for(var o=-1,a=e.length,i=-1,l=t.length,u=-1,c=n.length,f=_t(a-l,0),s=ie(f+c),d=!r;++o<f;)s[o]=e[o];for(var p=o;++u<c;)s[p+u]=n[u];for(;++i<l;)(d||o<a)&&(s[p+t[i]]=e[o++]);return s}function Ro(e,n){var t=-1,r=e.length;for(n||(n=ie(r));++t<r;)n[t]=e[t];return n}function Do(n,t,r,o){var a=!r;r||(r={});for(var i=-1,l=t.length;++i<l;){var u=t[i],c=o?o(r[u],n[u],u,r,n):e;c===e&&(c=n[u]),a?ir(r,u,c):tr(r,u,c)}return r}function Fo(e,n){return function(t,r){var o=Mi(t)?Sn:or,a=n?n():{};return o(t,e,fa(r,2),a)}}function Uo(n){return Hr(function(t,r){var o=-1,a=r.length,i=a>1?r[a-1]:e,l=a>2?r[2]:e;for(i=n.length>3&&"function"==typeof i?(a--,i):e,l&&wa(r[0],r[1],l)&&(i=a<3?e:i,a=1),t=Ee(t);++o<a;){var u=r[o];u&&n(t,u,o,i)}return t})}function No(e,n){return function(t,r){if(null==t)return t;if(!Qi(t))return e(t,r);for(var o=t.length,a=n?o:-1,i=Ee(t);(n?a--:++a<o)&&!1!==r(i[a],a,i););return t}}function Vo(e){return function(n,t,r){for(var o=-1,a=Ee(n),i=r(n),l=i.length;l--;){var u=i[e?l:++o];if(!1===t(a[u],u,a))break}return n}}function Bo(n){return function(t){var r=lt(t=_l(t))?vt(t):e,o=r?r[0]:t.charAt(0),a=r?ko(r,1).join(""):t.slice(1);return o[n]()+a}}function zo(e){return function(n){return Bn(Yl(Wl(n).replace(Xe,"")),e,"")}}function To(e){return function(){var n=arguments;switch(n.length){case 0:return new e;case 1:return new e(n[0]);case 2:return new e(n[0],n[1]);case 3:return new e(n[0],n[1],n[2]);case 4:return new e(n[0],n[1],n[2],n[3]);case 5:return new e(n[0],n[1],n[2],n[3],n[4]);case 6:return new e(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new e(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var t=Pt(e.prototype),r=e.apply(t,n);return nl(r)?r:t}}function $o(n){return function(t,r,o){var a=Ee(t);if(!Qi(t)){var i=fa(r,3);t=Dl(t),r=function(e){return i(a[e],e,a)}}var l=n(t,r,o);return l>-1?a[i?t[l]:l]:e}}function Lo(t){return oa(function(r){var o=r.length,a=o,i=Wt.prototype.thru;for(t&&r.reverse();a--;){var l=r[a];if("function"!=typeof l)throw new Ae(n);if(i&&!u&&"wrapper"==ua(l))var u=new Wt([],!0)}for(a=u?a:o;++a<o;){var c=ua(l=r[a]),f="wrapper"==c?la(l):e;u=f&&ka(f[0])&&424==f[1]&&!f[4].length&&1==f[9]?u[ua(f[0])].apply(u,f[3]):1==l.length&&ka(l)?u[c]():u.thru(l)}return function(){var e=arguments,n=e[0];if(u&&1==e.length&&Mi(n))return u.plant(n).value();for(var t=0,a=o?r[t].apply(this,e):n;++t<o;)a=r[t].call(this,a);return a}})}function Po(n,t,r,o,a,i,u,c,f,s){var d=t&l,p=1&t,v=2&t,h=24&t,m=512&t,g=v?e:To(n);return function l(){for(var y=arguments.length,_=ie(y),b=y;b--;)_[b]=arguments[b];if(h)var w=ca(l),x=function(e,n){for(var t=e.length,r=0;t--;)e[t]===n&&++r;return r}(_,w);if(o&&(_=Oo(_,o,a,h)),i&&(_=Ao(_,i,u,h)),y-=x,h&&y<s){var k=ft(_,w);return Zo(n,t,Po,l.placeholder,r,_,k,c,f,s-y)}var C=p?r:this,j=v?C[n]:n;return y=_.length,c?_=function(n,t){for(var r=n.length,o=bt(t.length,r),a=Ro(n);o--;){var i=t[o];n[o]=ba(i,r)?a[i]:e}return n}(_,c):m&&y>1&&_.reverse(),d&&f<y&&(_.length=f),this&&this!==hn&&this instanceof l&&(j=g||To(j)),j.apply(C,_)}}function Ko(e,n){return function(t,r){return function(e,n,t,r){return wr(e,function(e,o,a){n(r,t(e),o,a)}),r}(t,e,n(r),{})}}function Wo(n,t){return function(r,o){var a;if(r===e&&o===e)return t;if(r!==e&&(a=r),o!==e){if(a===e)return o;"string"==typeof r||"string"==typeof o?(r=fo(r),o=fo(o)):(r=co(r),o=co(o)),a=n(r,o)}return a}}function Mo(e){return oa(function(n){return n=Nn(n,Xn(fa())),Hr(function(t){var r=this;return e(n,function(e){return En(e,r,t)})})})}function qo(n,t){var r=(t=t===e?" ":fo(t)).length;if(r<2)return r?Jr(t,n):t;var o=Jr(t,mn(n/pt(t)));return lt(t)?ko(vt(o),0,n).join(""):o.slice(0,n)}function Qo(n){return function(t,r,o){return o&&"number"!=typeof o&&wa(t,r,o)&&(r=o=e),t=vl(t),r===e?(r=t,t=0):r=vl(r),function(e,n,t,r){for(var o=-1,a=_t(mn((n-e)/(t||1)),0),i=ie(a);a--;)i[r?a:++o]=e,e+=t;return i}(t,r,o=o===e?t<r?1:-1:vl(o),n)}}function Go(e){return function(n,t){return"string"==typeof n&&"string"==typeof t||(n=gl(n),t=gl(t)),e(n,t)}}function Zo(n,t,r,o,l,u,c,f,s,d){var p=8&t;t|=p?a:i,4&(t&=~(p?i:a))||(t&=-4);var v=[n,t,l,p?u:e,p?c:e,p?e:u,p?e:c,f,s,d],h=r.apply(e,v);return ka(n)&&Ra(h,v),h.placeholder=o,Ua(h,n,t)}function Jo(e){var n=Ie[e];return function(e,t){if(e=gl(e),(t=null==t?0:bt(hl(t),292))&&$n(e)){var r=(_l(e)+"e").split("e");return+((r=(_l(n(r[0]+"e"+(+r[1]+t)))+"e").split("e"))[0]+"e"+(+r[1]-t))}return n(e)}}var Ho=St&&1/st(new St([,-0]))[1]==c?function(e){return new St(e)}:cu;function Yo(e){return function(n){var t=ma(n);return t==w?ut(n):t==I?dt(n):function(e,n){return Nn(n,function(n){return[n,e[n]]})}(n,e(n))}}function Xo(t,c,f,s,d,p,v,h){var m=2&c;if(!m&&"function"!=typeof t)throw new Ae(n);var g=s?s.length:0;if(g||(c&=-97,s=d=e),v=v===e?v:_t(hl(v),0),h=h===e?h:hl(h),g-=d?d.length:0,c&i){var y=s,_=d;s=d=e}var b=m?e:la(t),w=[t,c,f,s,d,y,_,p,v,h];if(b&&function(e,n){var t=e[1],o=n[1],a=t|o,i=a<131,c=o==l&&8==t||o==l&&t==u&&e[7].length<=n[8]||384==o&&n[7].length<=n[8]&&8==t;if(!i&&!c)return e;1&o&&(e[2]=n[2],a|=1&t?0:4);var f=n[3];if(f){var s=e[3];e[3]=s?Oo(s,f,n[4]):f,e[4]=s?ft(e[3],r):n[4]}(f=n[5])&&(s=e[5],e[5]=s?Ao(s,f,n[6]):f,e[6]=s?ft(e[5],r):n[6]),(f=n[7])&&(e[7]=f),o&l&&(e[8]=null==e[8]?n[8]:bt(e[8],n[8])),null==e[9]&&(e[9]=n[9]),e[0]=n[0],e[1]=a}(w,b),t=w[0],c=w[1],f=w[2],s=w[3],d=w[4],!(h=w[9]=w[9]===e?m?0:t.length:_t(w[9]-g,0))&&24&c&&(c&=-25),c&&1!=c)x=8==c||c==o?function(n,t,r){var o=To(n);return function a(){for(var i=arguments.length,l=ie(i),u=i,c=ca(a);u--;)l[u]=arguments[u];var f=i<3&&l[0]!==c&&l[i-1]!==c?[]:ft(l,c);return(i-=f.length)<r?Zo(n,t,Po,a.placeholder,e,l,f,e,e,r-i):En(this&&this!==hn&&this instanceof a?o:n,this,l)}}(t,c,h):c!=a&&33!=c||d.length?Po.apply(e,w):function(e,n,t,r){var o=1&n,a=To(e);return function n(){for(var i=-1,l=arguments.length,u=-1,c=r.length,f=ie(c+l),s=this&&this!==hn&&this instanceof n?a:e;++u<c;)f[u]=r[u];for(;l--;)f[u++]=arguments[++i];return En(s,o?t:this,f)}}(t,c,f,s);else var x=function(e,n,t){var r=1&n,o=To(e);return function n(){return(this&&this!==hn&&this instanceof n?o:e).apply(r?t:this,arguments)}}(t,c,f);return Ua((b?no:Ra)(x,w),t,c)}function ea(n,t,r,o){return n===e||Li(n,Fe[r])&&!Ve.call(o,r)?t:n}function na(n,t,r,o,a,i){return nl(n)&&nl(t)&&(i.set(t,n),Kr(n,t,e,na,i),i.delete(t)),n}function ta(n){return al(n)?e:n}function ra(n,t,r,o,a,i){var l=1&r,u=n.length,c=t.length;if(u!=c&&!(l&&c>u))return!1;var f=i.get(n),s=i.get(t);if(f&&s)return f==t&&s==n;var d=-1,p=!0,v=2&r?new Zt:e;for(i.set(n,t),i.set(t,n);++d<u;){var h=n[d],m=t[d];if(o)var g=l?o(m,h,d,t,n,i):o(h,m,d,n,t,i);if(g!==e){if(g)continue;p=!1;break}if(v){if(!Tn(t,function(e,n){if(!nt(v,n)&&(h===e||a(h,e,r,o,i)))return v.push(n)})){p=!1;break}}else if(h!==m&&!a(h,m,r,o,i)){p=!1;break}}return i.delete(n),i.delete(t),p}function oa(n){return Fa(Sa(n,e,qa),n+"")}function aa(e){return jr(e,Dl,va)}function ia(e){return jr(e,Fl,ha)}var la=Rt?function(e){return Rt.get(e)}:cu;function ua(e){for(var n=e.name+"",t=Dt[n],r=Ve.call(Dt,n)?t.length:0;r--;){var o=t[r],a=o.func;if(null==a||a==e)return o.name}return n}function ca(e){return(Ve.call(Lt,"placeholder")?Lt:e).placeholder}function fa(){var e=Lt.iteratee||au;return e=e===au?Vr:e,arguments.length?e(arguments[0],arguments[1]):e}function sa(e,n){var t,r,o=e.__data__;return("string"==(r=typeof(t=n))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t)?o["string"==typeof n?"string":"hash"]:o.map}function da(e){for(var n=Dl(e),t=n.length;t--;){var r=n[t],o=e[r];n[t]=[r,o,Ia(o)]}return n}function pa(n,t){var r=function(n,t){return null==n?e:n[t]}(n,t);return Nr(r)?r:e}var va=_n?function(e){return null==e?[]:(e=Ee(e),Dn(_n(e),function(n){return Ze.call(e,n)}))}:mu,ha=_n?function(e){for(var n=[];e;)Vn(n,va(e)),e=Qe(e);return n}:mu,ma=Ir;function ga(e,n,t){for(var r=-1,o=(n=wo(n,e)).length,a=!1;++r<o;){var i=za(n[r]);if(!(a=null!=e&&t(e,i)))break;e=e[i]}return a||++r!=o?a:!!(o=null==e?0:e.length)&&el(o)&&ba(i,o)&&(Mi(e)||Wi(e))}function ya(e){return"function"!=typeof e.constructor||ja(e)?{}:Pt(Qe(e))}function _a(e){return Mi(e)||Wi(e)||!!(He&&e&&e[He])}function ba(e,n){var t=typeof e;return!!(n=null==n?f:n)&&("number"==t||"symbol"!=t&&_e.test(e))&&e>-1&&e%1==0&&e<n}function wa(e,n,t){if(!nl(t))return!1;var r=typeof n;return!!("number"==r?Qi(t)&&ba(n,t.length):"string"==r&&n in t)&&Li(t[n],e)}function xa(e,n){if(Mi(e))return!1;var t=typeof e;return!("number"!=t&&"symbol"!=t&&"boolean"!=t&&null!=e&&!cl(e))||ne.test(e)||!ee.test(e)||null!=n&&e in Ee(n)}function ka(e){var n=ua(e),t=Lt[n];if("function"!=typeof t||!(n in Mt.prototype))return!1;if(e===t)return!0;var r=la(t);return!!r&&e===r[0]}(jt&&ma(new jt(new ArrayBuffer(1)))!=R||It&&ma(new It)!=w||Et&&ma(Et.resolve())!=C||St&&ma(new St)!=I||Ot&&ma(new Ot)!=O)&&(ma=function(n){var t=Ir(n),r=t==k?n.constructor:e,o=r?Ta(r):"";if(o)switch(o){case Ft:return R;case Ut:return w;case Nt:return C;case Vt:return I;case Bt:return O}return t});var Ca=Ue?Yi:gu;function ja(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||Fe)}function Ia(e){return e==e&&!nl(e)}function Ea(n,t){return function(r){return null!=r&&r[n]===t&&(t!==e||n in Ee(r))}}function Sa(n,t,r){return t=_t(t===e?n.length-1:t,0),function(){for(var e=arguments,o=-1,a=_t(e.length-t,0),i=ie(a);++o<a;)i[o]=e[t+o];o=-1;for(var l=ie(t+1);++o<t;)l[o]=e[o];return l[t]=r(i),En(n,this,l)}}function Oa(e,n){return n.length<2?e:Cr(e,oo(n,0,-1))}function Aa(e,n){if(("constructor"!==n||"function"!=typeof e[n])&&"__proto__"!=n)return e[n]}var Ra=Na(no),Da=vn||function(e,n){return hn.setTimeout(e,n)},Fa=Na(to);function Ua(e,n,t){var r=n+"";return Fa(e,function(e,n){var t=n.length;if(!t)return e;var r=t-1;return n[r]=(t>1?"& ":"")+n[r],n=n.join(t>2?", ":" "),e.replace(le,"{\n/* [wrapped with "+n+"] */\n")}(r,function(e,n){return On(p,function(t){var r="_."+t[0];n&t[1]&&!Fn(e,r)&&e.push(r)}),e.sort()}(function(e){var n=e.match(ue);return n?n[1].split(ce):[]}(r),t)))}function Na(n){var t=0,r=0;return function(){var o=wt(),a=16-(o-r);if(r=o,a>0){if(++t>=800)return arguments[0]}else t=0;return n.apply(e,arguments)}}function Va(n,t){var r=-1,o=n.length,a=o-1;for(t=t===e?o:t;++r<t;){var i=Zr(r,a),l=n[i];n[i]=n[r],n[r]=l}return n.length=t,n}var Ba=function(e){var n=Ni(e,function(e){return 500===t.size&&t.clear(),e}),t=n.cache;return n}(function(e){var n=[];return 46===e.charCodeAt(0)&&n.push(""),e.replace(te,function(e,t,r,o){n.push(r?o.replace(de,"$1"):t||e)}),n});function za(e){if("string"==typeof e||cl(e))return e;var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}function Ta(e){if(null!=e){try{return Ne.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function $a(e){if(e instanceof Mt)return e.clone();var n=new Wt(e.__wrapped__,e.__chain__);return n.__actions__=Ro(e.__actions__),n.__index__=e.__index__,n.__values__=e.__values__,n}var La=Hr(function(e,n){return Gi(e)?dr(e,yr(n,1,Gi,!0)):[]}),Pa=Hr(function(n,t){var r=Ha(t);return Gi(r)&&(r=e),Gi(n)?dr(n,yr(t,1,Gi,!0),fa(r,2)):[]}),Ka=Hr(function(n,t){var r=Ha(t);return Gi(r)&&(r=e),Gi(n)?dr(n,yr(t,1,Gi,!0),e,r):[]});function Wa(e,n,t){var r=null==e?0:e.length;if(!r)return-1;var o=null==t?0:hl(t);return o<0&&(o=_t(r+o,0)),Pn(e,fa(n,3),o)}function Ma(n,t,r){var o=null==n?0:n.length;if(!o)return-1;var a=o-1;return r!==e&&(a=hl(r),a=r<0?_t(o+a,0):bt(a,o-1)),Pn(n,fa(t,3),a,!0)}function qa(e){return null!=e&&e.length?yr(e,1):[]}function Qa(n){return n&&n.length?n[0]:e}var Ga=Hr(function(e){var n=Nn(e,_o);return n.length&&n[0]===e[0]?Ar(n):[]}),Za=Hr(function(n){var t=Ha(n),r=Nn(n,_o);return t===Ha(r)?t=e:r.pop(),r.length&&r[0]===n[0]?Ar(r,fa(t,2)):[]}),Ja=Hr(function(n){var t=Ha(n),r=Nn(n,_o);return(t="function"==typeof t?t:e)&&r.pop(),r.length&&r[0]===n[0]?Ar(r,e,t):[]});function Ha(n){var t=null==n?0:n.length;return t?n[t-1]:e}var Ya=Hr(Xa);function Xa(e,n){return e&&e.length&&n&&n.length?Qr(e,n):e}var ei=oa(function(e,n){var t=null==e?0:e.length,r=lr(e,n);return Gr(e,Nn(n,function(e){return ba(e,t)?+e:e}).sort(So)),r});function ni(e){return null==e?e:Ct.call(e)}var ti=Hr(function(e){return so(yr(e,1,Gi,!0))}),ri=Hr(function(n){var t=Ha(n);return Gi(t)&&(t=e),so(yr(n,1,Gi,!0),fa(t,2))}),oi=Hr(function(n){var t=Ha(n);return t="function"==typeof t?t:e,so(yr(n,1,Gi,!0),e,t)});function ai(e){if(!e||!e.length)return[];var n=0;return e=Dn(e,function(e){if(Gi(e))return n=_t(e.length,n),!0}),Hn(n,function(n){return Nn(e,Qn(n))})}function ii(n,t){if(!n||!n.length)return[];var r=ai(n);return null==t?r:Nn(r,function(n){return En(t,e,n)})}var li=Hr(function(e,n){return Gi(e)?dr(e,n):[]}),ui=Hr(function(e){return go(Dn(e,Gi))}),ci=Hr(function(n){var t=Ha(n);return Gi(t)&&(t=e),go(Dn(n,Gi),fa(t,2))}),fi=Hr(function(n){var t=Ha(n);return t="function"==typeof t?t:e,go(Dn(n,Gi),e,t)}),si=Hr(ai),di=Hr(function(n){var t=n.length,r=t>1?n[t-1]:e;return r="function"==typeof r?(n.pop(),r):e,ii(n,r)});function pi(e){var n=Lt(e);return n.__chain__=!0,n}function vi(e,n){return n(e)}var hi=oa(function(n){var t=n.length,r=t?n[0]:0,o=this.__wrapped__,a=function(e){return lr(e,n)};return!(t>1||this.__actions__.length)&&o instanceof Mt&&ba(r)?((o=o.slice(r,+r+(t?1:0))).__actions__.push({func:vi,args:[a],thisArg:e}),new Wt(o,this.__chain__).thru(function(n){return t&&!n.length&&n.push(e),n})):this.thru(a)}),mi=Fo(function(e,n,t){Ve.call(e,t)?++e[t]:ir(e,t,1)}),gi=$o(Wa),yi=$o(Ma);function _i(e,n){return(Mi(e)?On:pr)(e,fa(n,3))}function bi(e,n){return(Mi(e)?An:vr)(e,fa(n,3))}var wi=Fo(function(e,n,t){Ve.call(e,t)?e[t].push(n):ir(e,t,[n])}),xi=Hr(function(e,n,t){var r=-1,o="function"==typeof n,a=Qi(e)?ie(e.length):[];return pr(e,function(e){a[++r]=o?En(n,e,t):Rr(e,n,t)}),a}),ki=Fo(function(e,n,t){ir(e,t,n)});function Ci(e,n){return(Mi(e)?Nn:$r)(e,fa(n,3))}var ji=Fo(function(e,n,t){e[t?0:1].push(n)},function(){return[[],[]]}),Ii=Hr(function(e,n){if(null==e)return[];var t=n.length;return t>1&&wa(e,n[0],n[1])?n=[]:t>2&&wa(n[0],n[1],n[2])&&(n=[n[0]]),Mr(e,yr(n,1),[])}),Ei=pn||function(){return hn.Date.now()};function Si(n,t,r){return t=r?e:t,t=n&&null==t?n.length:t,Xo(n,l,e,e,e,e,t)}function Oi(t,r){var o;if("function"!=typeof r)throw new Ae(n);return t=hl(t),function(){return--t>0&&(o=r.apply(this,arguments)),t<=1&&(r=e),o}}var Ai=Hr(function(e,n,t){var r=1;if(t.length){var o=ft(t,ca(Ai));r|=a}return Xo(e,r,n,t,o)}),Ri=Hr(function(e,n,t){var r=3;if(t.length){var o=ft(t,ca(Ri));r|=a}return Xo(n,r,e,t,o)});function Di(t,r,o){var a,i,l,u,c,f,s=0,d=!1,p=!1,v=!0;if("function"!=typeof t)throw new Ae(n);function h(n){var r=a,o=i;return a=i=e,s=n,u=t.apply(o,r)}function m(n){var t=n-f;return f===e||t>=r||t<0||p&&n-s>=l}function g(){var e=Ei();if(m(e))return y(e);c=Da(g,function(e){var n=r-(e-f);return p?bt(n,l-(e-s)):n}(e))}function y(n){return c=e,v&&a?h(n):(a=i=e,u)}function _(){var n=Ei(),t=m(n);if(a=arguments,i=this,f=n,t){if(c===e)return function(e){return s=e,c=Da(g,r),d?h(e):u}(f);if(p)return Co(c),c=Da(g,r),h(f)}return c===e&&(c=Da(g,r)),u}return r=gl(r)||0,nl(o)&&(d=!!o.leading,l=(p="maxWait"in o)?_t(gl(o.maxWait)||0,r):l,v="trailing"in o?!!o.trailing:v),_.cancel=function(){c!==e&&Co(c),s=0,a=f=i=c=e},_.flush=function(){return c===e?u:y(Ei())},_}var Fi=Hr(function(e,n){return sr(e,1,n)}),Ui=Hr(function(e,n,t){return sr(e,gl(n)||0,t)});function Ni(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Ae(n);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],a=r.cache;if(a.has(o))return a.get(o);var i=e.apply(this,n);return r.cache=a.set(o,i)||a,i};return r.cache=new(Ni.Cache||Gt),r}function Vi(e){if("function"!=typeof e)throw new Ae(n);return function(){var n=arguments;switch(n.length){case 0:return!e.call(this);case 1:return!e.call(this,n[0]);case 2:return!e.call(this,n[0],n[1]);case 3:return!e.call(this,n[0],n[1],n[2])}return!e.apply(this,n)}}Ni.Cache=Gt;var Bi=xo(function(e,n){var t=(n=1==n.length&&Mi(n[0])?Nn(n[0],Xn(fa())):Nn(yr(n,1),Xn(fa()))).length;return Hr(function(r){for(var o=-1,a=bt(r.length,t);++o<a;)r[o]=n[o].call(this,r[o]);return En(e,this,r)})}),zi=Hr(function(n,t){var r=ft(t,ca(zi));return Xo(n,a,e,t,r)}),Ti=Hr(function(n,t){var r=ft(t,ca(Ti));return Xo(n,i,e,t,r)}),$i=oa(function(n,t){return Xo(n,u,e,e,e,t)});function Li(e,n){return e===n||e!=e&&n!=n}var Pi=Go(Er),Ki=Go(function(e,n){return e>=n}),Wi=Dr(function(){return arguments}())?Dr:function(e){return tl(e)&&Ve.call(e,"callee")&&!Ze.call(e,"callee")},Mi=ie.isArray,qi=wn?Xn(wn):function(e){return tl(e)&&Ir(e)==A};function Qi(e){return null!=e&&el(e.length)&&!Yi(e)}function Gi(e){return tl(e)&&Qi(e)}var Zi=bn||gu,Ji=xn?Xn(xn):function(e){return tl(e)&&Ir(e)==g};function Hi(e){if(!tl(e))return!1;var n=Ir(e);return n==y||"[object DOMException]"==n||"string"==typeof e.message&&"string"==typeof e.name&&!al(e)}function Yi(e){if(!nl(e))return!1;var n=Ir(e);return n==_||n==b||"[object AsyncFunction]"==n||"[object Proxy]"==n}function Xi(e){return"number"==typeof e&&e==hl(e)}function el(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=f}function nl(e){var n=typeof e;return null!=e&&("object"==n||"function"==n)}function tl(e){return null!=e&&"object"==typeof e}var rl=kn?Xn(kn):function(e){return tl(e)&&ma(e)==w};function ol(e){return"number"==typeof e||tl(e)&&Ir(e)==x}function al(e){if(!tl(e)||Ir(e)!=k)return!1;var n=Qe(e);if(null===n)return!0;var t=Ve.call(n,"constructor")&&n.constructor;return"function"==typeof t&&t instanceof t&&Ne.call(t)==$e}var il=Cn?Xn(Cn):function(e){return tl(e)&&Ir(e)==j},ll=jn?Xn(jn):function(e){return tl(e)&&ma(e)==I};function ul(e){return"string"==typeof e||!Mi(e)&&tl(e)&&Ir(e)==E}function cl(e){return"symbol"==typeof e||tl(e)&&Ir(e)==S}var fl=In?Xn(In):function(e){return tl(e)&&el(e.length)&&!!un[Ir(e)]},sl=Go(Tr),dl=Go(function(e,n){return e<=n});function pl(e){if(!e)return[];if(Qi(e))return ul(e)?vt(e):Ro(e);if(Ye&&e[Ye])return function(e){for(var n,t=[];!(n=e.next()).done;)t.push(n.value);return t}(e[Ye]());var n=ma(e);return(n==w?ut:n==I?st:Ll)(e)}function vl(e){return e?(e=gl(e))===c||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function hl(e){var n=vl(e),t=n%1;return n==n?t?n-t:n:0}function ml(e){return e?ur(hl(e),0,d):0}function gl(e){if("number"==typeof e)return e;if(cl(e))return s;if(nl(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=nl(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=Yn(e);var t=me.test(e);return t||ye.test(e)?dn(e.slice(2),t?2:8):he.test(e)?s:+e}function yl(e){return Do(e,Fl(e))}function _l(e){return null==e?"":fo(e)}var bl=Uo(function(e,n){if(ja(n)||Qi(n))Do(n,Dl(n),e);else for(var t in n)Ve.call(n,t)&&tr(e,t,n[t])}),wl=Uo(function(e,n){Do(n,Fl(n),e)}),xl=Uo(function(e,n,t,r){Do(n,Fl(n),e,r)}),kl=Uo(function(e,n,t,r){Do(n,Dl(n),e,r)}),Cl=oa(lr),jl=Hr(function(n,t){n=Ee(n);var r=-1,o=t.length,a=o>2?t[2]:e;for(a&&wa(t[0],t[1],a)&&(o=1);++r<o;)for(var i=t[r],l=Fl(i),u=-1,c=l.length;++u<c;){var f=l[u],s=n[f];(s===e||Li(s,Fe[f])&&!Ve.call(n,f))&&(n[f]=i[f])}return n}),Il=Hr(function(n){return n.push(e,na),En(Nl,e,n)});function El(n,t,r){var o=null==n?e:Cr(n,t);return o===e?r:o}function Sl(e,n){return null!=e&&ga(e,n,Or)}var Ol=Ko(function(e,n,t){null!=n&&"function"!=typeof n.toString&&(n=Te.call(n)),e[n]=t},nu(ou)),Al=Ko(function(e,n,t){null!=n&&"function"!=typeof n.toString&&(n=Te.call(n)),Ve.call(e,n)?e[n].push(t):e[n]=[t]},fa),Rl=Hr(Rr);function Dl(e){return Qi(e)?Ht(e):Br(e)}function Fl(e){return Qi(e)?Ht(e,!0):zr(e)}var Ul=Uo(function(e,n,t){Kr(e,n,t)}),Nl=Uo(function(e,n,t,r){Kr(e,n,t,r)}),Vl=oa(function(e,n){var t={};if(null==e)return t;var r=!1;n=Nn(n,function(n){return n=wo(n,e),r||(r=n.length>1),n}),Do(e,ia(e),t),r&&(t=cr(t,7,ta));for(var o=n.length;o--;)po(t,n[o]);return t}),Bl=oa(function(e,n){return null==e?{}:function(e,n){return qr(e,n,function(n,t){return Sl(e,t)})}(e,n)});function zl(e,n){if(null==e)return{};var t=Nn(ia(e),function(e){return[e]});return n=fa(n),qr(e,t,function(e,t){return n(e,t[0])})}var Tl=Yo(Dl),$l=Yo(Fl);function Ll(e){return null==e?[]:et(e,Dl(e))}var Pl=zo(function(e,n,t){return n=n.toLowerCase(),e+(t?Kl(n):n)});function Kl(e){return Hl(_l(e).toLowerCase())}function Wl(e){return(e=_l(e))&&e.replace(be,ot).replace(en,"")}var Ml=zo(function(e,n,t){return e+(t?"-":"")+n.toLowerCase()}),ql=zo(function(e,n,t){return e+(t?" ":"")+n.toLowerCase()}),Ql=Bo("toLowerCase"),Gl=zo(function(e,n,t){return e+(t?"_":"")+n.toLowerCase()}),Zl=zo(function(e,n,t){return e+(t?" ":"")+Hl(n)}),Jl=zo(function(e,n,t){return e+(t?" ":"")+n.toUpperCase()}),Hl=Bo("toUpperCase");function Yl(n,t,r){return n=_l(n),(t=r?e:t)===e?function(e){return on.test(e)}(n)?function(e){return e.match(tn)||[]}(n):function(e){return e.match(fe)||[]}(n):n.match(t)||[]}var Xl=Hr(function(n,t){try{return En(n,e,t)}catch(e){return Hi(e)?e:new Ce(e)}}),eu=oa(function(e,n){return On(n,function(n){n=za(n),ir(e,n,Ai(e[n],e))}),e});function nu(e){return function(){return e}}var tu=Lo(),ru=Lo(!0);function ou(e){return e}function au(e){return Vr("function"==typeof e?e:cr(e,1))}var iu=Hr(function(e,n){return function(t){return Rr(t,e,n)}}),lu=Hr(function(e,n){return function(t){return Rr(e,t,n)}});function uu(e,n,t){var r=Dl(n),o=kr(n,r);null!=t||nl(n)&&(o.length||!r.length)||(t=n,n=e,e=this,o=kr(n,Dl(n)));var a=!(nl(t)&&"chain"in t&&!t.chain),i=Yi(e);return On(o,function(t){var r=n[t];e[t]=r,i&&(e.prototype[t]=function(){var n=this.__chain__;if(a||n){var t=e(this.__wrapped__);return(t.__actions__=Ro(this.__actions__)).push({func:r,args:arguments,thisArg:e}),t.__chain__=n,t}return r.apply(e,Vn([this.value()],arguments))})}),e}function cu(){}var fu=Mo(Nn),su=Mo(Rn),du=Mo(Tn);function pu(e){return xa(e)?Qn(za(e)):function(e){return function(n){return Cr(n,e)}}(e)}var vu=Qo(),hu=Qo(!0);function mu(){return[]}function gu(){return!1}var yu,_u=Wo(function(e,n){return e+n},0),bu=Jo("ceil"),wu=Wo(function(e,n){return e/n},1),xu=Jo("floor"),ku=Wo(function(e,n){return e*n},1),Cu=Jo("round"),ju=Wo(function(e,n){return e-n},0);return Lt.after=function(e,t){if("function"!=typeof t)throw new Ae(n);return e=hl(e),function(){if(--e<1)return t.apply(this,arguments)}},Lt.ary=Si,Lt.assign=bl,Lt.assignIn=wl,Lt.assignInWith=xl,Lt.assignWith=kl,Lt.at=Cl,Lt.before=Oi,Lt.bind=Ai,Lt.bindAll=eu,Lt.bindKey=Ri,Lt.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Mi(e)?e:[e]},Lt.chain=pi,Lt.chunk=function(n,t,r){t=(r?wa(n,t,r):t===e)?1:_t(hl(t),0);var o=null==n?0:n.length;if(!o||t<1)return[];for(var a=0,i=0,l=ie(mn(o/t));a<o;)l[i++]=oo(n,a,a+=t);return l},Lt.compact=function(e){for(var n=-1,t=null==e?0:e.length,r=0,o=[];++n<t;){var a=e[n];a&&(o[r++]=a)}return o},Lt.concat=function(){var e=arguments.length;if(!e)return[];for(var n=ie(e-1),t=arguments[0],r=e;r--;)n[r-1]=arguments[r];return Vn(Mi(t)?Ro(t):[t],yr(n,1))},Lt.cond=function(e){var t=null==e?0:e.length,r=fa();return e=t?Nn(e,function(e){if("function"!=typeof e[1])throw new Ae(n);return[r(e[0]),e[1]]}):[],Hr(function(n){for(var r=-1;++r<t;){var o=e[r];if(En(o[0],this,n))return En(o[1],this,n)}})},Lt.conforms=function(e){return function(e){var n=Dl(e);return function(t){return fr(t,e,n)}}(cr(e,1))},Lt.constant=nu,Lt.countBy=mi,Lt.create=function(e,n){var t=Pt(e);return null==n?t:ar(t,n)},Lt.curry=function n(t,r,o){var a=Xo(t,8,e,e,e,e,e,r=o?e:r);return a.placeholder=n.placeholder,a},Lt.curryRight=function n(t,r,a){var i=Xo(t,o,e,e,e,e,e,r=a?e:r);return i.placeholder=n.placeholder,i},Lt.debounce=Di,Lt.defaults=jl,Lt.defaultsDeep=Il,Lt.defer=Fi,Lt.delay=Ui,Lt.difference=La,Lt.differenceBy=Pa,Lt.differenceWith=Ka,Lt.drop=function(n,t,r){var o=null==n?0:n.length;return o?oo(n,(t=r||t===e?1:hl(t))<0?0:t,o):[]},Lt.dropRight=function(n,t,r){var o=null==n?0:n.length;return o?oo(n,0,(t=o-(t=r||t===e?1:hl(t)))<0?0:t):[]},Lt.dropRightWhile=function(e,n){return e&&e.length?ho(e,fa(n,3),!0,!0):[]},Lt.dropWhile=function(e,n){return e&&e.length?ho(e,fa(n,3),!0):[]},Lt.fill=function(n,t,r,o){var a=null==n?0:n.length;return a?(r&&"number"!=typeof r&&wa(n,t,r)&&(r=0,o=a),function(n,t,r,o){var a=n.length;for((r=hl(r))<0&&(r=-r>a?0:a+r),(o=o===e||o>a?a:hl(o))<0&&(o+=a),o=r>o?0:ml(o);r<o;)n[r++]=t;return n}(n,t,r,o)):[]},Lt.filter=function(e,n){return(Mi(e)?Dn:gr)(e,fa(n,3))},Lt.flatMap=function(e,n){return yr(Ci(e,n),1)},Lt.flatMapDeep=function(e,n){return yr(Ci(e,n),c)},Lt.flatMapDepth=function(n,t,r){return r=r===e?1:hl(r),yr(Ci(n,t),r)},Lt.flatten=qa,Lt.flattenDeep=function(e){return null!=e&&e.length?yr(e,c):[]},Lt.flattenDepth=function(n,t){return null!=n&&n.length?yr(n,t=t===e?1:hl(t)):[]},Lt.flip=function(e){return Xo(e,512)},Lt.flow=tu,Lt.flowRight=ru,Lt.fromPairs=function(e){for(var n=-1,t=null==e?0:e.length,r={};++n<t;){var o=e[n];r[o[0]]=o[1]}return r},Lt.functions=function(e){return null==e?[]:kr(e,Dl(e))},Lt.functionsIn=function(e){return null==e?[]:kr(e,Fl(e))},Lt.groupBy=wi,Lt.initial=function(e){return null!=e&&e.length?oo(e,0,-1):[]},Lt.intersection=Ga,Lt.intersectionBy=Za,Lt.intersectionWith=Ja,Lt.invert=Ol,Lt.invertBy=Al,Lt.invokeMap=xi,Lt.iteratee=au,Lt.keyBy=ki,Lt.keys=Dl,Lt.keysIn=Fl,Lt.map=Ci,Lt.mapKeys=function(e,n){var t={};return n=fa(n,3),wr(e,function(e,r,o){ir(t,n(e,r,o),e)}),t},Lt.mapValues=function(e,n){var t={};return n=fa(n,3),wr(e,function(e,r,o){ir(t,r,n(e,r,o))}),t},Lt.matches=function(e){return Lr(cr(e,1))},Lt.matchesProperty=function(e,n){return Pr(e,cr(n,1))},Lt.memoize=Ni,Lt.merge=Ul,Lt.mergeWith=Nl,Lt.method=iu,Lt.methodOf=lu,Lt.mixin=uu,Lt.negate=Vi,Lt.nthArg=function(e){return e=hl(e),Hr(function(n){return Wr(n,e)})},Lt.omit=Vl,Lt.omitBy=function(e,n){return zl(e,Vi(fa(n)))},Lt.once=function(e){return Oi(2,e)},Lt.orderBy=function(n,t,r,o){return null==n?[]:(Mi(t)||(t=null==t?[]:[t]),Mi(r=o?e:r)||(r=null==r?[]:[r]),Mr(n,t,r))},Lt.over=fu,Lt.overArgs=Bi,Lt.overEvery=su,Lt.overSome=du,Lt.partial=zi,Lt.partialRight=Ti,Lt.partition=ji,Lt.pick=Bl,Lt.pickBy=zl,Lt.property=pu,Lt.propertyOf=function(n){return function(t){return null==n?e:Cr(n,t)}},Lt.pull=Ya,Lt.pullAll=Xa,Lt.pullAllBy=function(e,n,t){return e&&e.length&&n&&n.length?Qr(e,n,fa(t,2)):e},Lt.pullAllWith=function(n,t,r){return n&&n.length&&t&&t.length?Qr(n,t,e,r):n},Lt.pullAt=ei,Lt.range=vu,Lt.rangeRight=hu,Lt.rearg=$i,Lt.reject=function(e,n){return(Mi(e)?Dn:gr)(e,Vi(fa(n,3)))},Lt.remove=function(e,n){var t=[];if(!e||!e.length)return t;var r=-1,o=[],a=e.length;for(n=fa(n,3);++r<a;){var i=e[r];n(i,r,e)&&(t.push(i),o.push(r))}return Gr(e,o),t},Lt.rest=function(t,r){if("function"!=typeof t)throw new Ae(n);return Hr(t,r=r===e?r:hl(r))},Lt.reverse=ni,Lt.sampleSize=function(n,t,r){return t=(r?wa(n,t,r):t===e)?1:hl(t),(Mi(n)?Xt:Xr)(n,t)},Lt.set=function(e,n,t){return null==e?e:eo(e,n,t)},Lt.setWith=function(n,t,r,o){return o="function"==typeof o?o:e,null==n?n:eo(n,t,r,o)},Lt.shuffle=function(e){return(Mi(e)?er:ro)(e)},Lt.slice=function(n,t,r){var o=null==n?0:n.length;return o?(r&&"number"!=typeof r&&wa(n,t,r)?(t=0,r=o):(t=null==t?0:hl(t),r=r===e?o:hl(r)),oo(n,t,r)):[]},Lt.sortBy=Ii,Lt.sortedUniq=function(e){return e&&e.length?uo(e):[]},Lt.sortedUniqBy=function(e,n){return e&&e.length?uo(e,fa(n,2)):[]},Lt.split=function(n,t,r){return r&&"number"!=typeof r&&wa(n,t,r)&&(t=r=e),(r=r===e?d:r>>>0)?(n=_l(n))&&("string"==typeof t||null!=t&&!il(t))&&!(t=fo(t))&&lt(n)?ko(vt(n),0,r):n.split(t,r):[]},Lt.spread=function(e,t){if("function"!=typeof e)throw new Ae(n);return t=null==t?0:_t(hl(t),0),Hr(function(n){var r=n[t],o=ko(n,0,t);return r&&Vn(o,r),En(e,this,o)})},Lt.tail=function(e){var n=null==e?0:e.length;return n?oo(e,1,n):[]},Lt.take=function(n,t,r){return n&&n.length?oo(n,0,(t=r||t===e?1:hl(t))<0?0:t):[]},Lt.takeRight=function(n,t,r){var o=null==n?0:n.length;return o?oo(n,(t=o-(t=r||t===e?1:hl(t)))<0?0:t,o):[]},Lt.takeRightWhile=function(e,n){return e&&e.length?ho(e,fa(n,3),!1,!0):[]},Lt.takeWhile=function(e,n){return e&&e.length?ho(e,fa(n,3)):[]},Lt.tap=function(e,n){return n(e),e},Lt.throttle=function(e,t,r){var o=!0,a=!0;if("function"!=typeof e)throw new Ae(n);return nl(r)&&(o="leading"in r?!!r.leading:o,a="trailing"in r?!!r.trailing:a),Di(e,t,{leading:o,maxWait:t,trailing:a})},Lt.thru=vi,Lt.toArray=pl,Lt.toPairs=Tl,Lt.toPairsIn=$l,Lt.toPath=function(e){return Mi(e)?Nn(e,za):cl(e)?[e]:Ro(Ba(_l(e)))},Lt.toPlainObject=yl,Lt.transform=function(e,n,t){var r=Mi(e),o=r||Zi(e)||fl(e);if(n=fa(n,4),null==t){var a=e&&e.constructor;t=o?r?new a:[]:nl(e)&&Yi(a)?Pt(Qe(e)):{}}return(o?On:wr)(e,function(e,r,o){return n(t,e,r,o)}),t},Lt.unary=function(e){return Si(e,1)},Lt.union=ti,Lt.unionBy=ri,Lt.unionWith=oi,Lt.uniq=function(e){return e&&e.length?so(e):[]},Lt.uniqBy=function(e,n){return e&&e.length?so(e,fa(n,2)):[]},Lt.uniqWith=function(n,t){return t="function"==typeof t?t:e,n&&n.length?so(n,e,t):[]},Lt.unset=function(e,n){return null==e||po(e,n)},Lt.unzip=ai,Lt.unzipWith=ii,Lt.update=function(e,n,t){return null==e?e:vo(e,n,bo(t))},Lt.updateWith=function(n,t,r,o){return o="function"==typeof o?o:e,null==n?n:vo(n,t,bo(r),o)},Lt.values=Ll,Lt.valuesIn=function(e){return null==e?[]:et(e,Fl(e))},Lt.without=li,Lt.words=Yl,Lt.wrap=function(e,n){return zi(bo(n),e)},Lt.xor=ui,Lt.xorBy=ci,Lt.xorWith=fi,Lt.zip=si,Lt.zipObject=function(e,n){return yo(e||[],n||[],tr)},Lt.zipObjectDeep=function(e,n){return yo(e||[],n||[],eo)},Lt.zipWith=di,Lt.entries=Tl,Lt.entriesIn=$l,Lt.extend=wl,Lt.extendWith=xl,uu(Lt,Lt),Lt.add=_u,Lt.attempt=Xl,Lt.camelCase=Pl,Lt.capitalize=Kl,Lt.ceil=bu,Lt.clamp=function(n,t,r){return r===e&&(r=t,t=e),r!==e&&(r=(r=gl(r))==r?r:0),t!==e&&(t=(t=gl(t))==t?t:0),ur(gl(n),t,r)},Lt.clone=function(e){return cr(e,4)},Lt.cloneDeep=function(e){return cr(e,5)},Lt.cloneDeepWith=function(n,t){return cr(n,5,t="function"==typeof t?t:e)},Lt.cloneWith=function(n,t){return cr(n,4,t="function"==typeof t?t:e)},Lt.conformsTo=function(e,n){return null==n||fr(e,n,Dl(n))},Lt.deburr=Wl,Lt.defaultTo=function(e,n){return null==e||e!=e?n:e},Lt.divide=wu,Lt.endsWith=function(n,t,r){n=_l(n),t=fo(t);var o=n.length,a=r=r===e?o:ur(hl(r),0,o);return(r-=t.length)>=0&&n.slice(r,a)==t},Lt.eq=Li,Lt.escape=function(e){return(e=_l(e))&&Q.test(e)?e.replace(M,at):e},Lt.escapeRegExp=function(e){return(e=_l(e))&&oe.test(e)?e.replace(re,"\\$&"):e},Lt.every=function(n,t,r){var o=Mi(n)?Rn:hr;return r&&wa(n,t,r)&&(t=e),o(n,fa(t,3))},Lt.find=gi,Lt.findIndex=Wa,Lt.findKey=function(e,n){return Ln(e,fa(n,3),wr)},Lt.findLast=yi,Lt.findLastIndex=Ma,Lt.findLastKey=function(e,n){return Ln(e,fa(n,3),xr)},Lt.floor=xu,Lt.forEach=_i,Lt.forEachRight=bi,Lt.forIn=function(e,n){return null==e?e:_r(e,fa(n,3),Fl)},Lt.forInRight=function(e,n){return null==e?e:br(e,fa(n,3),Fl)},Lt.forOwn=function(e,n){return e&&wr(e,fa(n,3))},Lt.forOwnRight=function(e,n){return e&&xr(e,fa(n,3))},Lt.get=El,Lt.gt=Pi,Lt.gte=Ki,Lt.has=function(e,n){return null!=e&&ga(e,n,Sr)},Lt.hasIn=Sl,Lt.head=Qa,Lt.identity=ou,Lt.includes=function(e,n,t,r){e=Qi(e)?e:Ll(e),t=t&&!r?hl(t):0;var o=e.length;return t<0&&(t=_t(o+t,0)),ul(e)?t<=o&&e.indexOf(n,t)>-1:!!o&&Kn(e,n,t)>-1},Lt.indexOf=function(e,n,t){var r=null==e?0:e.length;if(!r)return-1;var o=null==t?0:hl(t);return o<0&&(o=_t(r+o,0)),Kn(e,n,o)},Lt.inRange=function(n,t,r){return t=vl(t),r===e?(r=t,t=0):r=vl(r),function(e,n,t){return e>=bt(n,t)&&e<_t(n,t)}(n=gl(n),t,r)},Lt.invoke=Rl,Lt.isArguments=Wi,Lt.isArray=Mi,Lt.isArrayBuffer=qi,Lt.isArrayLike=Qi,Lt.isArrayLikeObject=Gi,Lt.isBoolean=function(e){return!0===e||!1===e||tl(e)&&Ir(e)==m},Lt.isBuffer=Zi,Lt.isDate=Ji,Lt.isElement=function(e){return tl(e)&&1===e.nodeType&&!al(e)},Lt.isEmpty=function(e){if(null==e)return!0;if(Qi(e)&&(Mi(e)||"string"==typeof e||"function"==typeof e.splice||Zi(e)||fl(e)||Wi(e)))return!e.length;var n=ma(e);if(n==w||n==I)return!e.size;if(ja(e))return!Br(e).length;for(var t in e)if(Ve.call(e,t))return!1;return!0},Lt.isEqual=function(e,n){return Fr(e,n)},Lt.isEqualWith=function(n,t,r){var o=(r="function"==typeof r?r:e)?r(n,t):e;return o===e?Fr(n,t,e,r):!!o},Lt.isError=Hi,Lt.isFinite=function(e){return"number"==typeof e&&$n(e)},Lt.isFunction=Yi,Lt.isInteger=Xi,Lt.isLength=el,Lt.isMap=rl,Lt.isMatch=function(e,n){return e===n||Ur(e,n,da(n))},Lt.isMatchWith=function(n,t,r){return r="function"==typeof r?r:e,Ur(n,t,da(t),r)},Lt.isNaN=function(e){return ol(e)&&e!=+e},Lt.isNative=function(e){if(Ca(e))throw new Ce("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Nr(e)},Lt.isNil=function(e){return null==e},Lt.isNull=function(e){return null===e},Lt.isNumber=ol,Lt.isObject=nl,Lt.isObjectLike=tl,Lt.isPlainObject=al,Lt.isRegExp=il,Lt.isSafeInteger=function(e){return Xi(e)&&e>=-9007199254740991&&e<=f},Lt.isSet=ll,Lt.isString=ul,Lt.isSymbol=cl,Lt.isTypedArray=fl,Lt.isUndefined=function(n){return n===e},Lt.isWeakMap=function(e){return tl(e)&&ma(e)==O},Lt.isWeakSet=function(e){return tl(e)&&"[object WeakSet]"==Ir(e)},Lt.join=function(e,n){return null==e?"":Gn.call(e,n)},Lt.kebabCase=Ml,Lt.last=Ha,Lt.lastIndexOf=function(n,t,r){var o=null==n?0:n.length;if(!o)return-1;var a=o;return r!==e&&(a=(a=hl(r))<0?_t(o+a,0):bt(a,o-1)),t==t?function(e,n,t){for(var r=t+1;r--;)if(e[r]===n)return r;return r}(n,t,a):Pn(n,Mn,a,!0)},Lt.lowerCase=ql,Lt.lowerFirst=Ql,Lt.lt=sl,Lt.lte=dl,Lt.max=function(n){return n&&n.length?mr(n,ou,Er):e},Lt.maxBy=function(n,t){return n&&n.length?mr(n,fa(t,2),Er):e},Lt.mean=function(e){return qn(e,ou)},Lt.meanBy=function(e,n){return qn(e,fa(n,2))},Lt.min=function(n){return n&&n.length?mr(n,ou,Tr):e},Lt.minBy=function(n,t){return n&&n.length?mr(n,fa(t,2),Tr):e},Lt.stubArray=mu,Lt.stubFalse=gu,Lt.stubObject=function(){return{}},Lt.stubString=function(){return""},Lt.stubTrue=function(){return!0},Lt.multiply=ku,Lt.nth=function(n,t){return n&&n.length?Wr(n,hl(t)):e},Lt.noConflict=function(){return hn._===this&&(hn._=Le),this},Lt.noop=cu,Lt.now=Ei,Lt.pad=function(e,n,t){e=_l(e);var r=(n=hl(n))?pt(e):0;if(!n||r>=n)return e;var o=(n-r)/2;return qo(gn(o),t)+e+qo(mn(o),t)},Lt.padEnd=function(e,n,t){e=_l(e);var r=(n=hl(n))?pt(e):0;return n&&r<n?e+qo(n-r,t):e},Lt.padStart=function(e,n,t){e=_l(e);var r=(n=hl(n))?pt(e):0;return n&&r<n?qo(n-r,t)+e:e},Lt.parseInt=function(e,n,t){return t||null==n?n=0:n&&(n=+n),xt(_l(e).replace(ae,""),n||0)},Lt.random=function(n,t,r){if(r&&"boolean"!=typeof r&&wa(n,t,r)&&(t=r=e),r===e&&("boolean"==typeof t?(r=t,t=e):"boolean"==typeof n&&(r=n,n=e)),n===e&&t===e?(n=0,t=1):(n=vl(n),t===e?(t=n,n=0):t=vl(t)),n>t){var o=n;n=t,t=o}if(r||n%1||t%1){var a=kt();return bt(n+a*(t-n+sn("1e-"+((a+"").length-1))),t)}return Zr(n,t)},Lt.reduce=function(e,n,t){var r=Mi(e)?Bn:Zn,o=arguments.length<3;return r(e,fa(n,4),t,o,pr)},Lt.reduceRight=function(e,n,t){var r=Mi(e)?zn:Zn,o=arguments.length<3;return r(e,fa(n,4),t,o,vr)},Lt.repeat=function(n,t,r){return t=(r?wa(n,t,r):t===e)?1:hl(t),Jr(_l(n),t)},Lt.replace=function(){var e=arguments,n=_l(e[0]);return e.length<3?n:n.replace(e[1],e[2])},Lt.result=function(n,t,r){var o=-1,a=(t=wo(t,n)).length;for(a||(a=1,n=e);++o<a;){var i=null==n?e:n[za(t[o])];i===e&&(o=a,i=r),n=Yi(i)?i.call(n):i}return n},Lt.round=Cu,Lt.runInContext=J,Lt.sample=function(e){return(Mi(e)?Yt:Yr)(e)},Lt.size=function(e){if(null==e)return 0;if(Qi(e))return ul(e)?pt(e):e.length;var n=ma(e);return n==w||n==I?e.size:Br(e).length},Lt.snakeCase=Gl,Lt.some=function(n,t,r){var o=Mi(n)?Tn:ao;return r&&wa(n,t,r)&&(t=e),o(n,fa(t,3))},Lt.sortedIndex=function(e,n){return io(e,n)},Lt.sortedIndexBy=function(e,n,t){return lo(e,n,fa(t,2))},Lt.sortedIndexOf=function(e,n){var t=null==e?0:e.length;if(t){var r=io(e,n);if(r<t&&Li(e[r],n))return r}return-1},Lt.sortedLastIndex=function(e,n){return io(e,n,!0)},Lt.sortedLastIndexBy=function(e,n,t){return lo(e,n,fa(t,2),!0)},Lt.sortedLastIndexOf=function(e,n){if(null!=e&&e.length){var t=io(e,n,!0)-1;if(Li(e[t],n))return t}return-1},Lt.startCase=Zl,Lt.startsWith=function(e,n,t){return e=_l(e),t=null==t?0:ur(hl(t),0,e.length),n=fo(n),e.slice(t,t+n.length)==n},Lt.subtract=ju,Lt.sum=function(e){return e&&e.length?Jn(e,ou):0},Lt.sumBy=function(e,n){return e&&e.length?Jn(e,fa(n,2)):0},Lt.template=function(n,t,r){var o=Lt.templateSettings;r&&wa(n,t,r)&&(t=e),n=_l(n),t=xl({},t,o,ea);var a,i,l=xl({},t.imports,o.imports,ea),u=Dl(l),c=et(l,u),f=0,s=t.interpolate||we,d="__p += '",p=Se((t.escape||we).source+"|"+s.source+"|"+(s===Y?pe:we).source+"|"+(t.evaluate||we).source+"|$","g"),v="//# sourceURL="+(Ve.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ln+"]")+"\n";n.replace(p,function(e,t,r,o,l,u){return r||(r=o),d+=n.slice(f,u).replace(xe,it),t&&(a=!0,d+="' +\n__e("+t+") +\n'"),l&&(i=!0,d+="';\n"+l+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),f=u+e.length,e}),d+="';\n";var h=Ve.call(t,"variable")&&t.variable;if(h){if(se.test(h))throw new Ce("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(i?d.replace(L,""):d).replace(P,"$1").replace(K,"$1;"),d="function("+(h||"obj")+") {\n"+(h?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=Xl(function(){return je(u,v+"return "+d).apply(e,c)});if(m.source=d,Hi(m))throw m;return m},Lt.times=function(e,n){if((e=hl(e))<1||e>f)return[];var t=d,r=bt(e,d);n=fa(n),e-=d;for(var o=Hn(r,n);++t<e;)n(t);return o},Lt.toFinite=vl,Lt.toInteger=hl,Lt.toLength=ml,Lt.toLower=function(e){return _l(e).toLowerCase()},Lt.toNumber=gl,Lt.toSafeInteger=function(e){return e?ur(hl(e),-9007199254740991,f):0===e?e:0},Lt.toString=_l,Lt.toUpper=function(e){return _l(e).toUpperCase()},Lt.trim=function(n,t,r){if((n=_l(n))&&(r||t===e))return Yn(n);if(!n||!(t=fo(t)))return n;var o=vt(n),a=vt(t);return ko(o,tt(o,a),rt(o,a)+1).join("")},Lt.trimEnd=function(n,t,r){if((n=_l(n))&&(r||t===e))return n.slice(0,ht(n)+1);if(!n||!(t=fo(t)))return n;var o=vt(n);return ko(o,0,rt(o,vt(t))+1).join("")},Lt.trimStart=function(n,t,r){if((n=_l(n))&&(r||t===e))return n.replace(ae,"");if(!n||!(t=fo(t)))return n;var o=vt(n);return ko(o,tt(o,vt(t))).join("")},Lt.truncate=function(n,t){var r=30,o="...";if(nl(t)){var a="separator"in t?t.separator:a;r="length"in t?hl(t.length):r,o="omission"in t?fo(t.omission):o}var i=(n=_l(n)).length;if(lt(n)){var l=vt(n);i=l.length}if(r>=i)return n;var u=r-pt(o);if(u<1)return o;var c=l?ko(l,0,u).join(""):n.slice(0,u);if(a===e)return c+o;if(l&&(u+=c.length-u),il(a)){if(n.slice(u).search(a)){var f,s=c;for(a.global||(a=Se(a.source,_l(ve.exec(a))+"g")),a.lastIndex=0;f=a.exec(s);)var d=f.index;c=c.slice(0,d===e?u:d)}}else if(n.indexOf(fo(a),u)!=u){var p=c.lastIndexOf(a);p>-1&&(c=c.slice(0,p))}return c+o},Lt.unescape=function(e){return(e=_l(e))&&q.test(e)?e.replace(W,mt):e},Lt.uniqueId=function(e){var n=++Be;return _l(e)+n},Lt.upperCase=Jl,Lt.upperFirst=Hl,Lt.each=_i,Lt.eachRight=bi,Lt.first=Qa,uu(Lt,(yu={},wr(Lt,function(e,n){Ve.call(Lt.prototype,n)||(yu[n]=e)}),yu),{chain:!1}),Lt.VERSION="4.17.21",On(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){Lt[e].placeholder=Lt}),On(["drop","take"],function(n,t){Mt.prototype[n]=function(r){r=r===e?1:_t(hl(r),0);var o=this.__filtered__&&!t?new Mt(this):this.clone();return o.__filtered__?o.__takeCount__=bt(r,o.__takeCount__):o.__views__.push({size:bt(r,d),type:n+(o.__dir__<0?"Right":"")}),o},Mt.prototype[n+"Right"]=function(e){return this.reverse()[n](e).reverse()}}),On(["filter","map","takeWhile"],function(e,n){var t=n+1,r=1==t||3==t;Mt.prototype[e]=function(e){var n=this.clone();return n.__iteratees__.push({iteratee:fa(e,3),type:t}),n.__filtered__=n.__filtered__||r,n}}),On(["head","last"],function(e,n){var t="take"+(n?"Right":"");Mt.prototype[e]=function(){return this[t](1).value()[0]}}),On(["initial","tail"],function(e,n){var t="drop"+(n?"":"Right");Mt.prototype[e]=function(){return this.__filtered__?new Mt(this):this[t](1)}}),Mt.prototype.compact=function(){return this.filter(ou)},Mt.prototype.find=function(e){return this.filter(e).head()},Mt.prototype.findLast=function(e){return this.reverse().find(e)},Mt.prototype.invokeMap=Hr(function(e,n){return"function"==typeof e?new Mt(this):this.map(function(t){return Rr(t,e,n)})}),Mt.prototype.reject=function(e){return this.filter(Vi(fa(e)))},Mt.prototype.slice=function(n,t){n=hl(n);var r=this;return r.__filtered__&&(n>0||t<0)?new Mt(r):(n<0?r=r.takeRight(-n):n&&(r=r.drop(n)),t!==e&&(r=(t=hl(t))<0?r.dropRight(-t):r.take(t-n)),r)},Mt.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Mt.prototype.toArray=function(){return this.take(d)},wr(Mt.prototype,function(n,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),o=/^(?:head|last)$/.test(t),a=Lt[o?"take"+("last"==t?"Right":""):t],i=o||/^find/.test(t);a&&(Lt.prototype[t]=function(){var t=this.__wrapped__,l=o?[1]:arguments,u=t instanceof Mt,c=l[0],f=u||Mi(t),s=function(e){var n=a.apply(Lt,Vn([e],l));return o&&d?n[0]:n};f&&r&&"function"==typeof c&&1!=c.length&&(u=f=!1);var d=this.__chain__,p=!!this.__actions__.length,v=i&&!d,h=u&&!p;if(!i&&f){t=h?t:new Mt(this);var m=n.apply(t,l);return m.__actions__.push({func:vi,args:[s],thisArg:e}),new Wt(m,d)}return v&&h?n.apply(this,l):(m=this.thru(s),v?o?m.value()[0]:m.value():m)})}),On(["pop","push","shift","sort","splice","unshift"],function(e){var n=Re[e],t=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Lt.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var o=this.value();return n.apply(Mi(o)?o:[],e)}return this[t](function(t){return n.apply(Mi(t)?t:[],e)})}}),wr(Mt.prototype,function(e,n){var t=Lt[n];if(t){var r=t.name+"";Ve.call(Dt,r)||(Dt[r]=[]),Dt[r].push({name:n,func:t})}}),Dt[Po(e,2).name]=[{name:"wrapper",func:e}],Mt.prototype.clone=function(){var e=new Mt(this.__wrapped__);return e.__actions__=Ro(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ro(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ro(this.__views__),e},Mt.prototype.reverse=function(){if(this.__filtered__){var e=new Mt(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Mt.prototype.value=function(){var e=this.__wrapped__.value(),n=this.__dir__,t=Mi(e),r=n<0,o=t?e.length:0,a=function(e,n,t){for(var r=-1,o=t.length;++r<o;){var a=t[r],i=a.size;switch(a.type){case"drop":e+=i;break;case"dropRight":n-=i;break;case"take":n=bt(n,e+i);break;case"takeRight":e=_t(e,n-i)}}return{start:e,end:n}}(0,o,this.__views__),i=a.start,l=a.end,u=l-i,c=r?l:i-1,f=this.__iteratees__,s=f.length,d=0,p=bt(u,this.__takeCount__);if(!t||!r&&o==u&&p==u)return mo(e,this.__actions__);var v=[];e:for(;u--&&d<p;){for(var h=-1,m=e[c+=n];++h<s;){var g=f[h],y=g.iteratee,_=g.type,b=y(m);if(2==_)m=b;else if(!b){if(1==_)continue e;break e}}v[d++]=m}return v},Lt.prototype.at=hi,Lt.prototype.chain=function(){return pi(this)},Lt.prototype.commit=function(){return new Wt(this.value(),this.__chain__)},Lt.prototype.next=function(){this.__values__===e&&(this.__values__=pl(this.value()));var n=this.__index__>=this.__values__.length;return{done:n,value:n?e:this.__values__[this.__index__++]}},Lt.prototype.plant=function(n){for(var t,r=this;r instanceof Kt;){var o=$a(r);o.__index__=0,o.__values__=e,t?a.__wrapped__=o:t=o;var a=o;r=r.__wrapped__}return a.__wrapped__=n,t},Lt.prototype.reverse=function(){var n=this.__wrapped__;if(n instanceof Mt){var t=n;return this.__actions__.length&&(t=new Mt(this)),(t=t.reverse()).__actions__.push({func:vi,args:[ni],thisArg:e}),new Wt(t,this.__chain__)}return this.thru(ni)},Lt.prototype.toJSON=Lt.prototype.valueOf=Lt.prototype.value=function(){return mo(this.__wrapped__,this.__actions__)},Lt.prototype.first=Lt.prototype.head,Ye&&(Lt.prototype[Ye]=function(){return this}),Lt}();gn?((gn.exports=gt)._=gt,mn._=gt):hn._=gt}.call(X);var ne=ee.exports;O("\n.m2o-dropdown[data-v-c534bf5f] {\n  position: relative;\n  width: 100%;\n}\n.dropdown-toggle[data-v-c534bf5f] {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 10px 12px;\n  background-color: var(--theme--background);\n  border: var(--theme--border-width) solid\n  var(--theme--form--field--input--border-color);\n  border-radius: var(--theme--border-radius);\n  cursor: pointer;\n  transition: all var(--fast) var(--transition);\n  min-height: 44px;\n}\n.dropdown-toggle[data-v-c534bf5f]:hover:not(.disabled) {\n  border-color: var(--theme--form--field--input--border-color-hover);\n}\n.dropdown-toggle.open[data-v-c534bf5f] {\n  border-color: var(--theme--primary);\n}\n.dropdown-toggle.disabled[data-v-c534bf5f] {\n  cursor: not-allowed;\n  opacity: 0.5;\n}\n.selected-value[data-v-c534bf5f] {\n  flex: 1;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.toggle-icons[data-v-c534bf5f] {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  flex-shrink: 0;\n}\n.placeholder[data-v-c534bf5f] {\n  color: var(--theme--foreground-subdued);\n}\n.dropdown-content[data-v-c534bf5f] {\n  position: absolute;\n  top: calc(100% + 4px);\n  left: 0;\n  right: 0;\n  background-color: var(--theme--background);\n  border: var(--theme--border-width) solid\n  var(--theme--form--field--input--border-color);\n  border-radius: var(--theme--border-radius);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n  z-index: 100;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  padding: 8px;\n  max-height: 400px;\n}\n.loading-container[data-v-c534bf5f] {\n  display: flex;\n  justify-content: center;\n  padding: 20px;\n}\n.items-list[data-v-c534bf5f] {\n  max-height: 300px;\n  overflow-y: auto;\n  border: var(--theme--border-width) solid\n  var(--theme--form--field--input--border-color);\n  border-radius: var(--theme--border-radius);\n}\n.item[data-v-c534bf5f] {\n  padding: 10px 12px;\n  cursor: pointer;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  transition: background-color var(--fast) var(--transition);\n  border-bottom: var(--theme--border-width) solid\n  var(--theme--form--field--input--border-color);\n}\n.item[data-v-c534bf5f]:last-child {\n  border-bottom: none;\n}\n.item[data-v-c534bf5f]:hover {\n  background-color: var(--theme--background-subdued);\n}\n.item.selected[data-v-c534bf5f] {\n  background-color: var(--theme--primary-background);\n  color: var(--theme--primary);\n}\n.check-icon[data-v-c534bf5f] {\n  color: var(--theme--primary);\n}\n.no-results[data-v-c534bf5f] {\n  padding: 20px;\n  text-align: center;\n  color: var(--theme--foreground-subdued);\n}\n.add-new[data-v-c534bf5f] {\n  width: 100%;\n}\n.drawer-content[data-v-c534bf5f] {\n  padding: var(--content-padding);\n  padding-top: 0;\n  padding-bottom: var(--content-padding-bottom);\n}\n",{});const te=b({props:{value:{type:[String,Number],default:null},collection:{type:String,required:!0},field:{type:String,required:!0},primaryKey:{type:[String,Number],required:!0},disabled:{type:Boolean,default:!1},template:{type:String,default:null},enableCreate:{type:Boolean,default:!1},filter:{type:Object,default:null}},emits:["input"],setup(t,{emit:o}){const{t:a}=I(),i=e(),{useRelationsStore:u,useFieldsStore:c}=n(),f=u(),s=c(),d=r([]),p=r(!1),v=r(""),h=r(!1),m=r({}),g=r(!1),y=r(!1),_=r(null),b=w(()=>f.getRelationsForField(t.collection,t.field).find(e=>e.collection===t.collection&&e.field===t.field)),x=w(()=>b.value?.related_collection),k=w(()=>x.value?s.getPrimaryKeyFieldForCollection(x.value):null),C=w(()=>{if(!x.value)return null;const e=s.getPrimaryKeyFieldForCollection(x.value);return e?.field||"id"}),j=w(()=>t.template?t.template:C.value?`{{ ${C.value} }}`:"{{ id }}"),E=w(()=>t.value),S=()=>{y.value=!1,v.value=""},O=async(e="")=>{if(x.value){p.value=!0;try{const n={limit:100,fields:["*"]};if(e){const t=s.getFieldsForCollection(x.value).filter(e=>["string","text"].includes(e.type)&&!e.meta?.hidden).map(e=>e.field);t.length>0&&(n.filter={_or:t.map(n=>({[n]:{_contains:e}}))})}t.filter&&(n.filter=n.filter?{_and:[n.filter,t.filter]}:t.filter);const r=await i.get(`/items/${x.value}`,{params:n});d.value=r.data.data||[]}catch(e){console.error("Error fetching items:",e),d.value=[]}finally{p.value=!1}}},A=ne.debounce(e=>{O(e)},300);return l(()=>t.value,async e=>{if(!e)return void(_.value=null);if(!x.value||!C.value)return;const n=d.value.find(n=>n[C.value]===e);n?_.value=n:await(async()=>{if(t.value&&x.value&&C.value)try{const e=await i.get(`/items/${x.value}/${t.value}`,{params:{fields:["*"]}});e.data.data&&(_.value=e.data.data)}catch(e){console.error("Error fetching selected item:",e)}})()},{immediate:!0}),{t:a,relationInfo:b,items:d,loading:p,selectedItem:E,selectedItemData:_,searchQuery:v,onSearchInput:A,clearSearch:()=>{v.value="",O()},selectItem:e=>{if(t.disabled)return;const n=e[C.value];_.value=e,console.log("SELL",_.value,n);let r=n;if(null!=n){const e=s.getField(t.collection,t.field);["integer","bigInteger"].includes(e?.type)&&"string"==typeof n?r=parseInt(n,10):"uuid"===e?.type&&"number"==typeof n&&(r=n.toString())}S(),console.log("Emitting value:",r,"type:",typeof r),console.log("Field schema type:",s.getField(t.collection,t.field)?.type),console.log("Related PK field name:",C.value),o("input",r)},displayTemplate:j,relatedCollection:x,relatedPrimaryKey:k,createNew:()=>{m.value={},h.value=!0},drawerOpen:h,newItem:m,saving:g,saveNewItem:async()=>{g.value=!0;try{const e=(await i.post(`/items/${x.value}`,m.value)).data.data;if(d.value.unshift(e),C.value){let n=e[C.value];const r=s.getField(t.collection,t.field);["integer","bigInteger"].includes(r?.type)&&"string"==typeof n?n=parseInt(n,10):"uuid"===r?.type&&"number"==typeof n&&(n=n.toString()),_.value=e,o("input",n)}h.value=!1,m.value={},S()}catch(e){console.error("Error saving new item:",e)}finally{g.value=!1}},dropdownOpen:y,toggleDropdown:()=>{t.disabled||(y.value=!y.value,y.value&&O())},closeDropdown:S,clearSelection:()=>{_.value=null,console.log("Emitting value:",valueToEmit,"type:",typeof valueToEmit),console.log("Field schema type:",s.getField(t.collection,t.field)?.type),console.log("Related PK field name:",C.value),o("input",null)}}}}),re={key:1,class:"m2o-dropdown"},oe={class:"selected-value"},ae={key:1,class:"placeholder"},ie={class:"toggle-icons"},le={key:0,class:"dropdown-content"},ue={key:0,class:"loading-container"},ce={key:1,class:"items-list"},fe=["onClick"],se={key:2,class:"no-results"},de={class:"drawer-content"};var pe=t({id:"m2o-dropdown",name:"M2O Dropdown",description:"Searchable dropdown for Many-to-One relationships",icon:"arrow_drop_down",component:A(te,[["render",function(e,n,t,r,o,a){const i=u("v-notice"),l=u("render-template"),b=u("v-icon"),w=u("v-input"),I=u("v-progress-circular"),E=u("v-button"),S=u("v-form"),O=u("v-drawer"),A=x("click-outside");return e.relationInfo?k((c(),f("div",re,[h("div",{class:C(["dropdown-toggle",{disabled:e.disabled,open:e.dropdownOpen}]),onClick:n[0]||(n[0]=(...n)=>e.toggleDropdown&&e.toggleDropdown(...n))},[h("div",oe,[e.selectedItemData?(c(),g(l,{key:0,collection:e.relatedCollection,item:e.selectedItemData,template:e.displayTemplate},null,8,["collection","item","template"])):(c(),f("span",ae,y(e.t("select_an_item")),1))]),h("div",ie,[e.selectedItemData&&!e.disabled?(c(),g(b,{key:0,name:"close",small:"",clickable:"",onClick:j(e.clearSelection,["stop"])},null,8,["onClick"])):p("v-if",!0),v(b,{name:e.dropdownOpen?"expand_less":"expand_more"},null,8,["name"])])],2),e.dropdownOpen?(c(),f("div",le,[v(w,{modelValue:e.searchQuery,"onUpdate:modelValue":[n[1]||(n[1]=n=>e.searchQuery=n),e.onSearchInput],placeholder:e.t("search_items"),onClick:n[2]||(n[2]=j(()=>{},["stop"]))},{prepend:m(()=>[v(b,{name:"search"})]),append:m(()=>[e.searchQuery?(c(),g(b,{key:0,name:"close",clickable:"",onClick:e.clearSearch},null,8,["onClick"])):p("v-if",!0)]),_:1},8,["modelValue","placeholder","onUpdate:modelValue"]),e.loading?(c(),f("div",ue,[v(I,{indeterminate:""})])):e.items.length>0?(c(),f("div",ce,[(c(!0),f(s,null,d(e.items,n=>(c(),f("div",{key:n[e.relatedPrimaryKey],class:C(["item",{selected:e.selectedItem===n[e.relatedPrimaryKey]}]),onClick:t=>e.selectItem(n)},[v(l,{collection:e.relatedCollection,item:n,template:e.displayTemplate},null,8,["collection","item","template"]),e.selectedItem===n[e.relatedPrimaryKey]?(c(),g(b,{key:0,name:"check",class:"check-icon"})):p("v-if",!0)],10,fe))),128))])):e.searchQuery?(c(),f("div",se,y(e.t("no_items_found")),1)):p("v-if",!0),e.enableCreate?(c(),g(E,{key:3,small:"",class:"add-new",onClick:j(e.createNew,["stop"])},{default:m(()=>[v(b,{name:"add",small:""}),_(" "+y(e.t("create_new")),1)]),_:1},8,["onClick"])):p("v-if",!0)])):p("v-if",!0),v(O,{modelValue:e.drawerOpen,"onUpdate:modelValue":n[5]||(n[5]=n=>e.drawerOpen=n),title:e.t("create_item"),persistent:"",onCancel:n[6]||(n[6]=n=>e.drawerOpen=!1)},{actions:m(()=>[v(E,{secondary:"",onClick:n[3]||(n[3]=n=>e.drawerOpen=!1)},{default:m(()=>[_(y(e.t("cancel")),1)]),_:1}),v(E,{loading:e.saving,onClick:e.saveNewItem},{default:m(()=>[_(y(e.t("save")),1)]),_:1},8,["loading","onClick"])]),default:m(()=>[h("div",de,[v(S,{modelValue:e.newItem,"onUpdate:modelValue":n[4]||(n[4]=n=>e.newItem=n),collection:e.relatedCollection,"primary-key":"+",loading:!1,disabled:!1},null,8,["modelValue","collection"])])]),_:1},8,["modelValue","title"])])),[[A,e.closeDropdown]]):(c(),g(i,{key:0,type:"warning"},{default:m(()=>[_(y(e.t("relationship_not_setup")),1)]),_:1}))}],["__scopeId","data-v-c534bf5f"],["__file","interface.vue"]]),types:["string","uuid","integer"],localTypes:["m2o"],group:"relational",options:({relations:e})=>{const n=e.m2o;return[{field:"template",name:"$t:display_template",meta:{interface:"system-display-template",options:{collectionName:n?.related_collection},width:"full"}},{field:"enableCreate",name:"Enable Create",type:"boolean",meta:{interface:"boolean",options:{label:"Allow creating new items"},width:"half"},schema:{default_value:!1}},{field:"filter",name:"$t:filter",type:"json",meta:{interface:"system-filter",options:{collectionName:n?.related_collection},width:"full"}}]},recommendedDisplays:["related-value"]});O("\n.m2m-dropdown[data-v-f64c38d2] {\n    display: flex;\n    flex-direction: column;\n    gap: 12px;\n}\n.selected-items[data-v-f64c38d2] {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 8px;\n    padding: 8px;\n    background-color: var(--theme--background-subdued);\n    border-radius: var(--theme--border-radius);\n    min-height: 40px;\n}\n.loading-container[data-v-f64c38d2] {\n    display: flex;\n    justify-content: center;\n    padding: 20px;\n}\n.items-list[data-v-f64c38d2] {\n    max-height: 300px;\n    overflow-y: auto;\n    border: var(--theme--border-width) solid\n        var(--theme--form--field--input--border-color);\n    border-radius: var(--theme--border-radius);\n}\n.item[data-v-f64c38d2] {\n    padding: 8px 12px;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    gap: 12px;\n    transition: background-color var(--fast) var(--transition);\n    border-bottom: var(--theme--border-width) solid\n        var(--theme--form--field--input--border-color);\n}\n.item[data-v-f64c38d2]:last-child {\n    border-bottom: none;\n}\n.item[data-v-f64c38d2]:hover {\n    background-color: var(--theme--background-subdued);\n}\n.item.selected[data-v-f64c38d2] {\n    background-color: var(--theme--primary-background);\n}\n.item-content[data-v-f64c38d2] {\n    flex: 1;\n}\n.no-results[data-v-f64c38d2] {\n    padding: 20px;\n    text-align: center;\n    color: var(--theme--foreground-subdued);\n}\n.add-new[data-v-f64c38d2] {\n    align-self: flex-start;\n}\n.drawer-content[data-v-f64c38d2] {\n    padding: var(--content-padding);\n    padding-top: 0;\n    padding-bottom: var(--content-padding-bottom);\n}\n[data-v-f64c38d2] .v-chip {\n    cursor: pointer;\n}\n",{});const ve=b({props:{value:{type:Array,default:()=>[]},collection:{type:String,required:!0},field:{type:String,required:!0},primaryKey:{type:[String,Number],required:!0},disabled:{type:Boolean,default:!1},template:{type:String,default:null},enableCreate:{type:Boolean,default:!1},filter:{type:Object,default:null}},emits:["input"],setup(t,{emit:o}){const{t:a}=I(),i=e(),{useRelationsStore:u,useFieldsStore:c}=n(),f=u(),s=c(),d=r([]),p=r(!1),v=r(""),h=r(!1),m=r({}),g=r(!1),y=w(()=>{const e=f.getRelationsForField(t.collection,t.field).find(e=>e.collection===t.collection&&e.field===t.field);if(!e)return null;const n=e.related_collection,r=e.meta?.one_field,o=f.getRelationsForCollection(n).find(e=>e.collection===n&&e.field!==r&&e.related_collection);return{junctionRelation:e,relatedRelation:o,junctionCollection:n,relatedCollection:o?.related_collection,junctionField:e.field,relatedField:o?.field}}),_=w(()=>y.value?.relatedCollection);w(()=>y.value?.junctionCollection);const b=w(()=>_.value?s.getPrimaryKeyFieldForCollection(_.value):null),x=w(()=>t.template?t.template:b.value?`{{ ${b.value} }}`:"{{ id }}"),k=w(()=>{if(!t.value||!Array.isArray(t.value))return[];const e=y.value?.relatedField;return e?t.value.map(n=>{if("object"==typeof n&&null!==n){const t=n[e];return"object"==typeof t&&null!==t?t[b.value]:t}return n}).filter(Boolean):[]}),C=w(()=>d.value.filter(e=>k.value.includes(e[b.value]))),j=w(()=>d.value),E=e=>k.value.includes(e),S=async(e="")=>{if(_.value){p.value=!0;try{const n={limit:100,fields:["*"]};if(e){const t=s.getFieldsForCollection(_.value).filter(e=>["string","text"].includes(e.type)&&!e.meta?.hidden).map(e=>e.field);t.length>0&&(n.filter={_or:t.map(n=>({[n]:{_contains:e}}))})}t.filter&&(n.filter=n.filter?{_and:[n.filter,t.filter]}:t.filter);const r=await i.get(`/items/${_.value}`,{params:n});d.value=r.data.data||[]}catch(e){console.error("Error fetching items:",e),d.value=[]}finally{p.value=!1}}},O=ne.debounce(e=>{S(e)},300),A=e=>{const n=y.value?.relatedField;if(!n)return;if(!e||0===e.length)return void o("input",[]);const t=e.map(e=>({[n]:e}));o("input",t)};return l(()=>t.collection,()=>{S()},{immediate:!0}),l(()=>t.value,async e=>{if(!(e&&Array.isArray(e)&&0!==e.length&&_.value&&b.value))return;const n=k.value.filter(e=>!d.value.some(n=>n[b.value]===e));if(n.length>0)try{const e=await i.get(`/items/${_.value}`,{params:{filter:{[b.value]:{_in:n}},fields:["*"]}});(e.data.data||[]).forEach(e=>{d.value.some(n=>n[b.value]===e[b.value])||d.value.push(e)})}catch(e){console.error("Error fetching selected items:",e)}},{immediate:!0}),{t:a,relationInfo:y,items:d,loading:p,searchQuery:v,selectedItemsData:C,availableItems:j,isSelected:E,onSearchInput:O,clearSearch:()=>{v.value="",S()},toggleItem:e=>{if(t.disabled)return;const n=e[b.value];let r;r=E(n)?k.value.filter(e=>e!==n):[...k.value,n],A(r)},removeItem:e=>{if(t.disabled)return;const n=k.value.filter(n=>n!==e);A(n)},displayTemplate:x,relatedCollection:_,relatedPrimaryKey:b,createNew:()=>{m.value={},h.value=!0},drawerOpen:h,newItem:m,saving:g,saveNewItem:async()=>{if(_.value){g.value=!0;try{const e=(await i.post(`/items/${_.value}`,m.value)).data.data;d.value.unshift(e);const n=e[b.value];A([...k.value,n]),h.value=!1,m.value={}}catch(e){console.error("Error saving new item:",e)}finally{g.value=!1}}}}}}),he={key:1,class:"m2m-dropdown"},me={key:0,class:"selected-items"},ge={key:1,class:"loading-container"},ye={key:2,class:"items-list"},_e=["onClick"],be={class:"item-content"},we={key:3,class:"no-results"},xe={class:"drawer-content"};var ke=t({id:"m2m-dropdown",name:"M2M Dropdown",description:"Searchable dropdown for Many-to-Many relationships",icon:"arrow_drop_down",component:A(ve,[["render",function(e,n,t,r,o,a){const i=u("v-notice"),l=u("v-icon"),b=u("v-input"),w=u("render-template"),x=u("v-chip"),k=u("v-progress-circular"),I=u("v-checkbox"),E=u("v-button"),S=u("v-form"),O=u("v-drawer");return e.relationInfo?(c(),f("div",he,[v(b,{modelValue:e.searchQuery,"onUpdate:modelValue":[n[0]||(n[0]=n=>e.searchQuery=n),e.onSearchInput],placeholder:e.t("search_items"),disabled:e.disabled},{prepend:m(()=>[v(l,{name:"search"})]),append:m(()=>[e.searchQuery?(c(),g(l,{key:0,name:"close",clickable:"",onClick:e.clearSearch},null,8,["onClick"])):p("v-if",!0)]),_:1},8,["modelValue","placeholder","disabled","onUpdate:modelValue"]),e.selectedItemsData.length>0?(c(),f("div",me,[(c(!0),f(s,null,d(e.selectedItemsData,n=>(c(),g(x,{key:n[e.relatedPrimaryKey],small:"",disabled:e.disabled,"onClick:close":t=>e.removeItem(n[e.relatedPrimaryKey])},{default:m(()=>[v(w,{collection:e.relatedCollection,item:n,template:e.displayTemplate},null,8,["collection","item","template"])]),_:2},1032,["disabled","onClick:close"]))),128))])):p("v-if",!0),e.loading?(c(),f("div",ge,[v(k,{indeterminate:"",small:""})])):e.availableItems.length>0?(c(),f("div",ye,[(c(!0),f(s,null,d(e.availableItems,t=>(c(),f("div",{key:t[e.relatedPrimaryKey],class:C(["item",{selected:e.isSelected(t[e.relatedPrimaryKey])}]),onClick:n=>e.toggleItem(t)},[v(I,{"model-value":e.isSelected(t[e.relatedPrimaryKey]),disabled:e.disabled,onClick:n[1]||(n[1]=j(()=>{},["stop"]))},null,8,["model-value","disabled"]),h("div",be,[v(w,{collection:e.relatedCollection,item:t,template:e.displayTemplate},null,8,["collection","item","template"])])],10,_e))),128))])):e.searchQuery&&!e.loading?(c(),f("div",we,y(e.t("no_items_found")),1)):p("v-if",!0),e.enableCreate?(c(),g(E,{key:4,small:"",class:"add-new",disabled:e.disabled,onClick:e.createNew},{default:m(()=>[v(l,{name:"add",small:""}),_(" "+y(e.t("create_new")),1)]),_:1},8,["disabled","onClick"])):p("v-if",!0),v(O,{modelValue:e.drawerOpen,"onUpdate:modelValue":n[4]||(n[4]=n=>e.drawerOpen=n),title:e.t("create_item"),persistent:"",onCancel:n[5]||(n[5]=n=>e.drawerOpen=!1)},{actions:m(()=>[v(E,{secondary:"",onClick:n[2]||(n[2]=n=>e.drawerOpen=!1)},{default:m(()=>[_(y(e.t("cancel")),1)]),_:1}),v(E,{loading:e.saving,onClick:e.saveNewItem},{default:m(()=>[_(y(e.t("save")),1)]),_:1},8,["loading","onClick"])]),default:m(()=>[h("div",xe,[v(S,{modelValue:e.newItem,"onUpdate:modelValue":n[3]||(n[3]=n=>e.newItem=n),collection:e.relatedCollection,"primary-key":"+",loading:!1,disabled:!1},null,8,["modelValue","collection"])])]),_:1},8,["modelValue","title"])])):(c(),g(i,{key:0,type:"warning"},{default:m(()=>[_(y(e.t("relationship_not_setup")),1)]),_:1}))}],["__scopeId","data-v-f64c38d2"],["__file","interface.vue"]]),types:["alias"],localTypes:["m2m"],group:"relational",options:({relations:e})=>{const n=e.m2m;return[{field:"template",name:"$t:display_template",meta:{interface:"system-display-template",options:{collectionName:n?.related_collection},width:"full"}},{field:"enableCreate",name:"Enable Create",type:"boolean",meta:{interface:"boolean",options:{label:"Allow creating new items"},width:"half"},schema:{default_value:!1}},{field:"filter",name:"$t:filter",type:"json",meta:{interface:"system-filter",options:{collectionName:n?.related_collection},width:"full"}}]},recommendedDisplays:["related-values"]});O("\n.m2m-dropdown[data-v-604e1b85] {\n    display: flex;\n    flex-direction: column;\n    gap: 12px;\n}\n.selected-items[data-v-604e1b85] {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 8px;\n    padding: 8px;\n    background-color: var(--theme--background-subdued);\n    border-radius: var(--theme--border-radius);\n    min-height: 40px;\n}\n.loading-container[data-v-604e1b85] {\n    display: flex;\n    justify-content: center;\n    padding: 20px;\n}\n.items-list[data-v-604e1b85] {\n    max-height: 300px;\n    overflow-y: auto;\n    border: var(--theme--border-width) solid\n        var(--theme--form--field--input--border-color);\n    border-radius: var(--theme--border-radius);\n}\n.item[data-v-604e1b85] {\n    padding: 8px 12px;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    gap: 12px;\n    transition: background-color var(--fast) var(--transition);\n    border-bottom: var(--theme--border-width) solid\n        var(--theme--form--field--input--border-color);\n}\n.item[data-v-604e1b85]:last-child {\n    border-bottom: none;\n}\n.item[data-v-604e1b85]:hover {\n    background-color: var(--theme--background-subdued);\n}\n.item.selected[data-v-604e1b85] {\n    background-color: var(--theme--primary-background);\n}\n.item-content[data-v-604e1b85] {\n    flex: 1;\n}\n.no-results[data-v-604e1b85] {\n    padding: 20px;\n    text-align: center;\n    color: var(--theme--foreground-subdued);\n}\n.add-new[data-v-604e1b85] {\n    align-self: flex-start;\n}\n.drawer-content[data-v-604e1b85] {\n    padding: var(--content-padding);\n    padding-top: 0;\n    padding-bottom: var(--content-padding-bottom);\n}\n[data-v-604e1b85] .v-chip {\n    cursor: pointer;\n}\n",{});const Ce=b({props:{value:{type:Array,default:()=>[]},collection:{type:String,required:!0},field:{type:String,required:!0},primaryKey:{type:[String,Number],required:!0},disabled:{type:Boolean,default:!1},template:{type:String,default:null},enableCreate:{type:Boolean,default:!1},filter:{type:Object,default:null}},emits:["input"],setup(t,{emit:o}){const{t:a}=I(),i=e(),{useRelationsStore:u,useFieldsStore:c}=n(),f=u(),s=c();console.log("DEBUG: Props received - collection:",t.collection,"field:",t.field);const d=r([]),p=r(!1),v=r(""),h=r(!1),m=r({}),g=r(!1);r(!1);const y=w(()=>{console.log("DEBUG: Computing relationInfo for collection:",t.collection,"field:",t.field);const e=f.getRelationsForField(t.collection,t.field);if(console.log("DEBUG: Relations for field:",e),!e||0===e.length)return console.error("ERROR: No relations found for field:",t.field),null;const n=e.find(e=>e.related_collection===t.collection&&e.collection!==t.collection);if(!n)return console.error("ERROR: No O2M junction relation found pointing back to current collection"),null;console.log("DEBUG: Found junction O2M relation:",n);const r=n.collection;console.log("DEBUG: Junction collection:",r);const o=e.find(e=>e.collection===r&&e.related_collection!==t.collection);return o?(console.log("DEBUG: Found related M2O relation:",o),{junctionCollection:r,relatedCollection:o.related_collection,relatedField:o.field}):(console.error("ERROR: No related M2O relation found in junction"),null)}),_=w(()=>{const e=y.value?.relatedCollection;return console.log("DEBUG: Related collection:",e),e});w(()=>{const e=y.value?.junctionCollection;return console.log("DEBUG: Junction collection:",e),e});const b=w(()=>{if(!_.value)return"id";const e=s.getPrimaryKeyFieldForCollection(_.value),n=e?.field||"id";return console.log("DEBUG: Related primary key field name:",n),n}),x=w(()=>{if(t.template)return t.template;return s.getFieldsForCollection(_.value).some(e=>"name"===e.field)?"{{ name }}":`{{ ${b.value} }}`}),k=w(()=>{if(!t.value||!Array.isArray(t.value))return[];const e=y.value?.relatedField;if(!e)return[];const n=t.value.map(n=>{if(!n)return null;if("object"==typeof n){const t=n[e];return t?"object"==typeof t&&null!==t?t[b.value]:t:null}return n}).filter(e=>null!=e);return console.log("DEBUG: Selected item IDs:",n),n}),C=w(()=>{const e=d.value.filter(e=>k.value.includes(e[b.value]));return console.log("DEBUG: Selected items data:",e),e}),j=w(()=>d.value),E=e=>k.value.includes(e),S=async(e="")=>{if(_.value){p.value=!0;try{const n={limit:100,fields:["*"]};if(e){const t=s.getFieldsForCollection(_.value).filter(e=>["string","text"].includes(e.type)&&!e.meta?.hidden).map(e=>e.field);t.length>0&&(n.filter={_or:t.map(n=>({[n]:{_contains:e}}))})}t.filter&&(n.filter=n.filter?{_and:[n.filter,t.filter]}:t.filter);const r=await i.get(`/items/${_.value}`,{params:n});d.value=r.data.data||[],console.log("DEBUG: Fetched items:",d.value)}catch(e){console.error("Error fetching items:",e),d.value=[]}finally{p.value=!1}}},O=ne.debounce(e=>{S(e)},300),A=e=>{const n=y.value?.relatedField;if(!n)return;if(!e||0===e.length)return o("input",[]),void console.log("DEBUG: Emitted empty array for no selections");const r=e.map(e=>{const r=t.value?.find(t=>{if(!t||"object"!=typeof t)return!1;const r=t[n];return"object"==typeof r&&null!==r?r[b.value]===e:r===e});return r||{[n]:{[b.value]:e}}});o("input",r),console.log("DEBUG: Emitted updated value:",r)};return l(()=>t.collection,()=>{S()},{immediate:!0}),l(()=>t.value,async e=>{if(!(e&&Array.isArray(e)&&0!==e.length&&_.value&&b.value))return;const n=k.value.filter(e=>!d.value.some(n=>n[b.value]===e));if(n.length>0)try{const e=(await i.get(`/items/${_.value}`,{params:{filter:{[b.value]:{_in:n}},fields:["*"]}})).data.data||[];e.forEach(e=>{d.value.some(n=>n[b.value]===e[b.value])||d.value.push(e)}),console.log("DEBUG: Fetched missing selected items:",e)}catch(e){console.error("Error fetching selected items:",e)}},{immediate:!0}),{t:a,relationInfo:y,items:d,loading:p,searchQuery:v,selectedItemsData:C,availableItems:j,isSelected:E,onSearchInput:O,clearSearch:()=>{v.value="",S()},toggleItem:e=>{if(t.disabled)return;const n=e[b.value];let r;r=E(n)?k.value.filter(e=>e!==n):[...k.value,n],A(r)},removeItem:e=>{if(t.disabled)return;const n=k.value.filter(n=>n!==e);A(n)},displayTemplate:x,relatedCollection:_,relatedPrimaryKeyFieldName:b,createNew:()=>{m.value={},h.value=!0},drawerOpen:h,newItem:m,saving:g,saveNewItem:async()=>{if(_.value){g.value=!0;try{const e=(await i.post(`/items/${_.value}`,m.value)).data.data;d.value.unshift(e);const n=e[b.value];A([...k.value,n]),h.value=!1,m.value={},console.log("DEBUG: Saved new item and updated selection:",e)}catch(e){console.error("Error saving new item:",e)}finally{g.value=!1}}}}}}),je={key:1,class:"m2m-dropdown"},Ie={key:0,class:"selected-items"},Ee={key:1},Se={key:0,class:"loading-container"},Oe={key:1,class:"items-list"},Ae=["onClick"],Re={class:"item-content"},De={key:2,class:"no-results"},Fe={class:"drawer-content"};const Ue=[Y,pe,ke,t({id:"junction-dropdown",name:"Junction M2M Dropdown",description:"Searchable dropdown for Many-to-Many relationships via junction table",icon:"link",component:A(Ce,[["render",function(e,n,t,r,o,a){const i=u("v-notice"),l=u("v-icon"),b=u("v-input"),w=u("render-template"),x=u("v-chip"),k=u("v-progress-circular"),I=u("v-checkbox"),E=u("v-button"),S=u("v-form"),O=u("v-drawer");return e.relationInfo?(c(),f("div",je,[v(b,{modelValue:e.searchQuery,"onUpdate:modelValue":[n[0]||(n[0]=n=>e.searchQuery=n),e.onSearchInput],placeholder:e.t("search_items"),disabled:e.disabled,onFocus:n[1]||(n[1]=n=>e.listOpen=!0)},{prepend:m(()=>[v(l,{name:"search"})]),append:m(()=>[e.searchQuery?(c(),g(l,{key:0,name:"close",clickable:"",onClick:e.clearSearch},null,8,["onClick"])):p("v-if",!0)]),_:1},8,["modelValue","placeholder","disabled","onUpdate:modelValue"]),e.selectedItemsData.length>0?(c(),f("div",Ie,[(c(!0),f(s,null,d(e.selectedItemsData,n=>(c(),g(x,{key:n[e.relatedPrimaryKeyFieldName],small:"","close-icon":"close",disabled:e.disabled,"onClick:close":t=>e.removeItem(n[e.relatedPrimaryKeyFieldName])},{default:m(()=>[v(w,{collection:e.relatedCollection,item:n,template:e.displayTemplate},null,8,["collection","item","template"])]),_:2},1032,["disabled","onClick:close"]))),128))])):p("v-if",!0),e.listOpen||e.searchQuery?(c(),f("div",Ee,[e.loading?(c(),f("div",Se,[v(k,{indeterminate:"",small:""})])):e.availableItems.length>0?(c(),f("div",Oe,[(c(!0),f(s,null,d(e.availableItems,t=>(c(),f("div",{key:t[e.relatedPrimaryKeyFieldName],class:C(["item",{selected:e.isSelected(t[e.relatedPrimaryKeyFieldName])}]),onClick:n=>e.toggleItem(t)},[v(I,{"model-value":e.isSelected(t[e.relatedPrimaryKeyFieldName]),disabled:e.disabled,onClick:n[2]||(n[2]=j(()=>{},["stop"]))},null,8,["model-value","disabled"]),h("div",Re,[v(w,{collection:e.relatedCollection,item:t,template:e.displayTemplate},null,8,["collection","item","template"])])],10,Ae))),128))])):e.searchQuery&&!e.loading?(c(),f("div",De,y(e.t("no_items_found")),1)):p("v-if",!0),e.enableCreate?(c(),g(E,{key:3,small:"",class:"add-new",disabled:e.disabled,onClick:e.createNew},{default:m(()=>[v(l,{name:"add",small:""}),_(" "+y(e.t("create_new")),1)]),_:1},8,["disabled","onClick"])):p("v-if",!0)])):p("v-if",!0),v(O,{modelValue:e.drawerOpen,"onUpdate:modelValue":n[5]||(n[5]=n=>e.drawerOpen=n),title:e.t("create_item"),persistent:"",onCancel:n[6]||(n[6]=n=>e.drawerOpen=!1)},{actions:m(()=>[v(E,{secondary:"",onClick:n[3]||(n[3]=n=>e.drawerOpen=!1)},{default:m(()=>[_(y(e.t("cancel")),1)]),_:1}),v(E,{loading:e.saving,onClick:e.saveNewItem},{default:m(()=>[_(y(e.t("save")),1)]),_:1},8,["loading","onClick"])]),default:m(()=>[h("div",Fe,[v(S,{modelValue:e.newItem,"onUpdate:modelValue":n[4]||(n[4]=n=>e.newItem=n),collection:e.relatedCollection,"primary-key":"+",loading:!1,disabled:!1},null,8,["modelValue","collection"])])]),_:1},8,["modelValue","title"])])):(c(),g(i,{key:0,type:"warning"},{default:m(()=>[_(y(e.t("relationship_not_setup")),1)]),_:1}))}],["__scopeId","data-v-604e1b85"],["__file","interface.vue"]]),types:["alias"],localTypes:["m2m"],group:"relational",options:({relations:e})=>{let n=null;if(e&&e.length>=2){const t=e.find(n=>n.related_collection&&n.related_collection!==e[0].related_collection);t&&(n=t.related_collection)}return[{field:"template",name:"$t:display_template",meta:{interface:"system-display-template",options:{collectionName:n},width:"full"}},{field:"enableCreate",name:"Enable Create",type:"boolean",meta:{interface:"boolean",options:{label:"Allow creating new items in related collection"},width:"half"},schema:{default_value:!1}},{field:"filter",name:"$t:filter",type:"json",meta:{interface:"system-filter",options:{collectionName:n},width:"full"}}]},recommendedDisplays:["related-values"]})],Ne=[],Ve=[],Be=[],ze=[],Te=[],$e=[];export{Ne as displays,Ue as interfaces,Ve as layouts,Be as modules,$e as operations,ze as panels,Te as themes};
