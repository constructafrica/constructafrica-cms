import{useApi as e,useStores as n,defineInterface as t}from"@directus/extensions-sdk";import{ref as r,reactive as a,onMounted as o,onBeforeUnmount as i,watch as l,resolveComponent as u,openBlock as c,createElementBlock as f,Fragment as s,renderList as d,createCommentVNode as p,createVNode as v,createElementVNode as h,withCtx as m,createBlock as g,toDisplayString as y,createTextVNode as _,defineComponent as b,computed as w,resolveDirective as x,withDirectives as k,normalizeClass as C,withModifiers as j}from"vue";import{useI18n as I}from"vue-i18n";var S=[],A=[];function O(e,n){if(e&&"undefined"!=typeof document){var t,r=!0===n.prepend?"prepend":"append",a=!0===n.singleTag,o="string"==typeof n.container?document.querySelector(n.container):document.getElementsByTagName("head")[0];if(a){var i=S.indexOf(o);-1===i&&(i=S.push(o)-1,A[i]={}),t=A[i]&&A[i][r]?A[i][r]:A[i][r]=l()}else t=l();65279===e.charCodeAt(0)&&(e=e.substring(1)),t.styleSheet?t.styleSheet.cssText+=e:t.appendChild(document.createTextNode(e))}function l(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),n.attributes)for(var t=Object.keys(n.attributes),a=0;a<t.length;a++)e.setAttribute(t[a],n.attributes[t[a]]);var i="prepend"===r?"afterbegin":"beforeend";return o.insertAdjacentElement(i,e),e}}O("\n.project-companies-selector[data-v-9354d9c3] {\n  padding: 12px;\n  background-color: var(--theme--background-subdued);\n  border-radius: var(--theme--border-radius);\n}\n.company-row[data-v-9354d9c3] {\n  display: grid;\n  grid-template-columns: 200px 1fr 40px;\n  gap: 12px;\n  align-items: start;\n  margin-bottom: 12px;\n  padding: 12px;\n  background-color: var(--theme--background);\n  border-radius: var(--theme--border-radius);\n  border: 2px solid var(--theme--border-color-subdued);\n}\n.role-select[data-v-9354d9c3] {\n  width: 100%;\n}\n.company-select-wrapper[data-v-9354d9c3] {\n  position: relative;\n  width: 100%;\n}\n.company-dropdown[data-v-9354d9c3] {\n  position: absolute;\n  top: 100%;\n  left: 0;\n  right: 0;\n  margin-top: 4px;\n  max-height: 300px;\n  overflow-y: auto;\n  background-color: var(--theme--background);\n  border: 2px solid var(--theme--border-color-subdued);\n  border-radius: var(--theme--border-radius);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n  z-index: 100;\n}\n.company-option[data-v-9354d9c3] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px;\n  cursor: pointer;\n  transition: background-color 0.2s;\n}\n.company-option[data-v-9354d9c3]:hover {\n  background-color: var(--theme--background-subdued);\n}\n.company-option.create-new[data-v-9354d9c3] {\n  border-top: 2px solid var(--theme--border-color-subdued);\n  color: var(--theme--primary);\n  font-weight: 500;\n}\n.company-info[data-v-9354d9c3] {\n  flex: 1;\n  min-width: 0;\n}\n.company-name[data-v-9354d9c3] {\n  font-size: 14px;\n  font-weight: 500;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.company-email[data-v-9354d9c3] {\n  font-size: 12px;\n  color: var(--theme--foreground-subdued);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.no-results[data-v-9354d9c3] {\n  padding: 12px;\n  text-align: center;\n  color: var(--theme--foreground-subdued);\n  font-size: 14px;\n}\n.remove-btn[data-v-9354d9c3] {\n  color: var(--theme--danger);\n  cursor: pointer;\n  transition: transform 0.2s;\n  margin-top: 8px;\n}\n.remove-btn[data-v-9354d9c3]:hover {\n  transform: scale(1.1);\n}\n.grid[data-v-9354d9c3] {\n  display: grid;\n  gap: 20px;\n}\n.field[data-v-9354d9c3] {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n.field.full[data-v-9354d9c3] {\n  grid-column: 1 / -1;\n}\n.field.half[data-v-9354d9c3] {\n  grid-column: span 1;\n}\n.type-label[data-v-9354d9c3] {\n  font-weight: 600;\n  font-size: 14px;\n  color: var(--theme--foreground);\n}\n@media (max-width: 768px) {\n.company-row[data-v-9354d9c3] {\n    grid-template-columns: 1fr;\n}\n.remove-btn[data-v-9354d9c3] {\n    justify-self: end;\n    margin-top: 0;\n}\n.field.half[data-v-9354d9c3] {\n    grid-column: 1 / -1;\n}\n}\n",{});var E=(e,n)=>{const t=e.__vccOpts||e;for(const[e,r]of n)t[e]=r;return t};const F={props:{value:{type:Array,default:()=>[]},collection:{type:String,default:null},primaryKey:{type:[String,Number],default:null}},emits:["input"],setup(n,{emit:t}){const u=e(),{t:c}=I(),f=r([]),s=r([]),d=a({}),p=a({}),v=a({}),h=a({}),m=r(!1),g=r(!1),y=r(!1),_=r(!1),b=r(null),w=r(null),x={},k=r({name:"",email:"",phone:""}),C=async(e,n)=>{if(!n||n.length<2)p[e]=[];else{b.value=e,_.value=!0;try{const t=n.trim().split(/\s+/).filter(e=>e.length>0).map(e=>({name:{_icontains:e}})),r=await u.get("/items/companies",{params:{fields:["id","name","email"],limit:50,filter:{_or:t},sort:["name"]}});p[e]=r.data.data.map(e=>({text:e.name,value:e.id,company:e}))}catch(n){console.error("Error searching companies:",n),p[e]=[]}finally{_.value=!1,b.value=null}}},j=async()=>{if(!n.primaryKey||"+"===n.primaryKey)return console.log("New item or invalid primaryKey, adding empty row"),void(0===f.value.length&&A());try{console.log("Loading existing data for project:",n.primaryKey);const e=await u.get("/items/project_companies",{params:{filter:{project_id:{_eq:n.primaryKey}},fields:["id","role_id","company_id.id","company_id.name"],limit:-1}});console.log("Loaded project_companies:",e.data.data),e.data.data.length>0?(f.value=[],e.data.data.forEach((e,n)=>{const t="object"==typeof e.company_id?e.company_id.id:e.company_id,r="object"==typeof e.company_id?e.company_id.name:"";f.value.push({id:e.id,role_id:e.role_id,company_id:t}),r&&(d[n]=r,h[n]=r),p[n]=[],v[n]=!1})):A()}catch(e){console.error("Error loading existing data:",e),0===f.value.length&&A()}};o(async()=>{console.log("Component mounted, primaryKey:",n.primaryKey),await(async()=>{y.value=!0;try{const e=await u.get("/items/project_company_roles",{params:{fields:["id","name","slug"],limit:-1,sort:["name"]}});s.value=e.data.data.map(e=>({text:e.name,value:e.id}))}catch(e){console.error("Error loading roles:",e)}finally{y.value=!1}})(),await j(),console.log("After loadExistingData:",{internalValue:f.value,searchQueries:{...d}}),document.addEventListener("click",S)}),i(()=>{document.removeEventListener("click",S),Object.values(x).forEach(e=>clearTimeout(e))});const S=e=>{e.target.closest(".company-select-wrapper")||Object.keys(v).forEach(e=>{v[e]=!1})};l(()=>n.value,e=>{e&&Array.isArray(e)&&e.length>0&&(f.value=e.map(e=>({id:e.id||null,role_id:e.role_id||null,company_id:"object"==typeof e.company_id?e.company_id?.id:e.company_id})))},{deep:!0}),l(()=>n.primaryKey,(e,n)=>{console.log("PrimaryKey changed from",n,"to",e),e!==n&&e&&"+"!==e&&(f.value=[],Object.keys(d).forEach(e=>delete d[e]),Object.keys(p).forEach(e=>delete p[e]),Object.keys(v).forEach(e=>delete v[e]),Object.keys(h).forEach(e=>delete h[e]),j())});const A=()=>{const e=f.value.length;f.value.push({id:null,role_id:null,company_id:null}),d[e]="",p[e]=[],v[e]=!1,O()},O=()=>{const e=f.value.filter(e=>e.role_id&&e.company_id).map(e=>({id:e.id,role_id:e.role_id,company_id:e.company_id}));t("input",e.length>0?e:[])};return{t:c,internalValue:f,roleOptions:s,searchQueries:d,filteredCompanies:p,showDropdown:v,selectedCompanyNames:h,showCreateDialog:m,creating:g,loadingRoles:y,loadingCompanies:_,activeSearchIndex:b,newCompany:k,addItem:A,removeItem:e=>{f.value.splice(e,1),delete d[e],delete p[e],delete v[e],delete h[e],O()},handleSearchInput:(e,n)=>{d[e]=n,v[e]=!0,x[e]&&clearTimeout(x[e]),x[e]=setTimeout(()=>{C(e,n)},300)},handleSearchFocus:e=>{v[e]=!0,d[e]&&d[e].length>=2&&C(e,d[e])},selectCompany:(e,n)=>{f.value[e].company_id=n.value,d[e]=n.text,h[e]=n.text,v[e]=!1,O()},companyExistsInResults:e=>{const n=d[e]?.toLowerCase();return p[e]?.some(e=>e.text.toLowerCase()===n)},handleCreateNew:e=>{w.value=e,k.value.name=d[e],v[e]=!1,m.value=!0},createCompany:async()=>{if(k.value.name){g.value=!0;try{const e=(await u.post("/items/companies",k.value)).data.data;if(null!==w.value){const n=w.value;f.value[n].company_id=e.id,d[n]=e.name,h[n]=e.name,O()}m.value=!1,k.value={name:"",email:"",phone:""},w.value=null}catch(e){console.error("Error creating company:",e),alert("Failed to create company. Please try again.")}finally{g.value=!1}}},updateValue:O}}},R={class:"project-companies-selector"},V={class:"company-select-wrapper"},D={key:0,class:"company-dropdown"},z=["onClick"],N={class:"company-info"},T={class:"company-name"},L={key:0,class:"company-email"},U=["onClick"],$={class:"company-info"},K={class:"company-name"},P={key:1,class:"no-results"},B={class:"grid"},W={class:"field full"},M={class:"type-label"},q={class:"field half"},Q={class:"type-label"},Z={class:"field half"},G={class:"type-label"};var J,H,Y={id:"project-companies-selector",name:"Project Companies Selector",description:"Select companies with roles in a user-friendly interface",icon:"business",component:E(F,[["render",function(e,n,t,r,a,o){const i=u("v-select"),l=u("v-icon"),b=u("v-input"),w=u("v-button"),x=u("v-card-title"),k=u("v-card-text"),C=u("v-card-actions"),j=u("v-card"),I=u("v-dialog");return c(),f("div",R,[(c(!0),f(s,null,d(r.internalValue,(e,n)=>(c(),f("div",{key:e.id||`new-${n}`,class:"company-row"},[p(" Role Dropdown "),v(i,{modelValue:e.role_id,"onUpdate:modelValue":[n=>e.role_id=n,r.updateValue],items:r.roleOptions,"item-title":"text","item-value":"value",placeholder:r.t("select_role"),loading:r.loadingRoles,class:"role-select"},null,8,["modelValue","onUpdate:modelValue","items","placeholder","loading"]),p(" Company Search Input with Dropdown "),h("div",V,[v(b,{"model-value":r.searchQueries[n]||"",placeholder:r.t("search_or_create_company"),"onUpdate:modelValue":e=>r.handleSearchInput(n,e),onFocus:e=>r.handleSearchFocus(n)},{prepend:m(()=>[v(l,{name:"business",small:""})]),append:m(()=>[r.loadingCompanies&&r.activeSearchIndex===n?(c(),g(l,{key:0,name:"refresh",small:"",spin:""})):p("v-if",!0)]),_:2},1032,["model-value","placeholder","onUpdate:modelValue","onFocus"]),p(" Dropdown Results "),r.showDropdown[n]&&(r.filteredCompanies[n]?.length>0||r.searchQueries[n]?.length>0)?(c(),f("div",D,[(c(!0),f(s,null,d(r.filteredCompanies[n],e=>(c(),f("div",{key:e.value,class:"company-option",onClick:t=>r.selectCompany(n,e)},[v(l,{name:"business",small:""}),h("div",N,[h("div",T,y(e.text),1),e.company?.email?(c(),f("div",L,y(e.company.email),1)):p("v-if",!0)])],8,z))),128)),p(" Create New Option "),r.searchQueries[n]&&r.searchQueries[n].length>2&&!r.companyExistsInResults(n)?(c(),f("div",{key:0,class:"company-option create-new",onClick:e=>r.handleCreateNew(n)},[v(l,{name:"add_circle",small:""}),h("div",$,[h("div",K,'Create "'+y(r.searchQueries[n])+'"',1)])],8,U)):p("v-if",!0),!r.loadingCompanies&&0===r.filteredCompanies[n]?.length&&r.searchQueries[n]?.length>0?(c(),f("div",P," No companies found. Type to create new. ")):p("v-if",!0)])):p("v-if",!0)]),p(" Remove Button "),v(l,{name:"close",clickable:"",class:"remove-btn",onClick:e=>r.removeItem(n)},null,8,["onClick"])]))),128)),p(" Add New Button "),v(w,{secondary:"",small:"",onClick:r.addItem},{default:m(()=>[v(l,{name:"add",small:""}),_(" "+y(r.t("add_company")),1)]),_:1},8,["onClick"]),p(" Create Company Dialog "),v(I,{modelValue:r.showCreateDialog,"onUpdate:modelValue":n[4]||(n[4]=e=>r.showCreateDialog=e),onEsc:n[5]||(n[5]=e=>r.showCreateDialog=!1)},{default:m(()=>[v(j,null,{default:m(()=>[v(x,null,{default:m(()=>[_(y(r.t("create_new_company")),1)]),_:1}),v(k,null,{default:m(()=>[h("div",B,[h("div",W,[h("div",M,y(r.t("company_name")),1),v(b,{modelValue:r.newCompany.name,"onUpdate:modelValue":n[0]||(n[0]=e=>r.newCompany.name=e),placeholder:r.t("enter_company_name"),autofocus:""},null,8,["modelValue","placeholder"])]),h("div",q,[h("div",Q,y(r.t("email")),1),v(b,{modelValue:r.newCompany.email,"onUpdate:modelValue":n[1]||(n[1]=e=>r.newCompany.email=e),type:"email",placeholder:r.t("enter_email")},null,8,["modelValue","placeholder"])]),h("div",Z,[h("div",G,y(r.t("phone")),1),v(b,{modelValue:r.newCompany.phone,"onUpdate:modelValue":n[2]||(n[2]=e=>r.newCompany.phone=e),placeholder:r.t("enter_phone")},null,8,["modelValue","placeholder"])])])]),_:1}),v(C,null,{default:m(()=>[v(w,{secondary:"",onClick:n[3]||(n[3]=e=>r.showCreateDialog=!1)},{default:m(()=>[_(y(r.t("cancel")),1)]),_:1}),v(w,{loading:r.creating,disabled:!r.newCompany.name,onClick:r.createCompany},{default:m(()=>[_(y(r.t("create")),1)]),_:1},8,["loading","disabled","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}],["__scopeId","data-v-9354d9c3"],["__file","interface.vue"]]),options:null,types:["alias"],localTypes:["o2m"],group:"relational",relational:!0},X="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ee={exports:{}};J=ee,H=ee.exports,function(){var e,n="Expected a function",t="__lodash_hash_undefined__",r="__lodash_placeholder__",a=16,o=32,i=64,l=128,u=256,c=1/0,f=9007199254740991,s=NaN,d=4294967295,p=[["ary",l],["bind",1],["bindKey",2],["curry",8],["curryRight",a],["flip",512],["partial",o],["partialRight",i],["rearg",u]],v="[object Arguments]",h="[object Array]",m="[object Boolean]",g="[object Date]",y="[object Error]",_="[object Function]",b="[object GeneratorFunction]",w="[object Map]",x="[object Number]",k="[object Object]",C="[object Promise]",j="[object RegExp]",I="[object Set]",S="[object String]",A="[object Symbol]",O="[object WeakMap]",E="[object ArrayBuffer]",F="[object DataView]",R="[object Float32Array]",V="[object Float64Array]",D="[object Int8Array]",z="[object Int16Array]",N="[object Int32Array]",T="[object Uint8Array]",L="[object Uint8ClampedArray]",U="[object Uint16Array]",$="[object Uint32Array]",K=/\b__p \+= '';/g,P=/\b(__p \+=) '' \+/g,B=/(__e\(.*?\)|\b__t\)) \+\n'';/g,W=/&(?:amp|lt|gt|quot|#39);/g,M=/[&<>"']/g,q=RegExp(W.source),Q=RegExp(M.source),Z=/<%-([\s\S]+?)%>/g,G=/<%([\s\S]+?)%>/g,Y=/<%=([\s\S]+?)%>/g,ee=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ne=/^\w*$/,te=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,re=/[\\^$.*+?()[\]{}|]/g,ae=RegExp(re.source),oe=/^\s+/,ie=/\s/,le=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ue=/\{\n\/\* \[wrapped with (.+)\] \*/,ce=/,? & /,fe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,se=/[()=,{}\[\]\/\s]/,de=/\\(\\)?/g,pe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ve=/\w*$/,he=/^[-+]0x[0-9a-f]+$/i,me=/^0b[01]+$/i,ge=/^\[object .+?Constructor\]$/,ye=/^0o[0-7]+$/i,_e=/^(?:0|[1-9]\d*)$/,be=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,we=/($^)/,xe=/['\n\r\u2028\u2029\\]/g,ke="\\ud800-\\udfff",Ce="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",je="\\u2700-\\u27bf",Ie="a-z\\xdf-\\xf6\\xf8-\\xff",Se="A-Z\\xc0-\\xd6\\xd8-\\xde",Ae="\\ufe0e\\ufe0f",Oe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ee="['’]",Fe="["+ke+"]",Re="["+Oe+"]",Ve="["+Ce+"]",De="\\d+",ze="["+je+"]",Ne="["+Ie+"]",Te="[^"+ke+Oe+De+je+Ie+Se+"]",Le="\\ud83c[\\udffb-\\udfff]",Ue="[^"+ke+"]",$e="(?:\\ud83c[\\udde6-\\uddff]){2}",Ke="[\\ud800-\\udbff][\\udc00-\\udfff]",Pe="["+Se+"]",Be="\\u200d",We="(?:"+Ne+"|"+Te+")",Me="(?:"+Pe+"|"+Te+")",qe="(?:['’](?:d|ll|m|re|s|t|ve))?",Qe="(?:['’](?:D|LL|M|RE|S|T|VE))?",Ze="(?:"+Ve+"|"+Le+")?",Ge="["+Ae+"]?",Je=Ge+Ze+"(?:"+Be+"(?:"+[Ue,$e,Ke].join("|")+")"+Ge+Ze+")*",He="(?:"+[ze,$e,Ke].join("|")+")"+Je,Ye="(?:"+[Ue+Ve+"?",Ve,$e,Ke,Fe].join("|")+")",Xe=RegExp(Ee,"g"),en=RegExp(Ve,"g"),nn=RegExp(Le+"(?="+Le+")|"+Ye+Je,"g"),tn=RegExp([Pe+"?"+Ne+"+"+qe+"(?="+[Re,Pe,"$"].join("|")+")",Me+"+"+Qe+"(?="+[Re,Pe+We,"$"].join("|")+")",Pe+"?"+We+"+"+qe,Pe+"+"+Qe,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",De,He].join("|"),"g"),rn=RegExp("["+Be+ke+Ce+Ae+"]"),an=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,on=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ln=-1,un={};un[R]=un[V]=un[D]=un[z]=un[N]=un[T]=un[L]=un[U]=un[$]=!0,un[v]=un[h]=un[E]=un[m]=un[F]=un[g]=un[y]=un[_]=un[w]=un[x]=un[k]=un[j]=un[I]=un[S]=un[O]=!1;var cn={};cn[v]=cn[h]=cn[E]=cn[F]=cn[m]=cn[g]=cn[R]=cn[V]=cn[D]=cn[z]=cn[N]=cn[w]=cn[x]=cn[k]=cn[j]=cn[I]=cn[S]=cn[A]=cn[T]=cn[L]=cn[U]=cn[$]=!0,cn[y]=cn[_]=cn[O]=!1;var fn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},sn=parseFloat,dn=parseInt,pn="object"==typeof X&&X&&X.Object===Object&&X,vn="object"==typeof self&&self&&self.Object===Object&&self,hn=pn||vn||Function("return this")(),mn=H&&!H.nodeType&&H,gn=mn&&J&&!J.nodeType&&J,yn=gn&&gn.exports===mn,_n=yn&&pn.process,bn=function(){try{var e=gn&&gn.require&&gn.require("util").types;return e||_n&&_n.binding&&_n.binding("util")}catch(e){}}(),wn=bn&&bn.isArrayBuffer,xn=bn&&bn.isDate,kn=bn&&bn.isMap,Cn=bn&&bn.isRegExp,jn=bn&&bn.isSet,In=bn&&bn.isTypedArray;function Sn(e,n,t){switch(t.length){case 0:return e.call(n);case 1:return e.call(n,t[0]);case 2:return e.call(n,t[0],t[1]);case 3:return e.call(n,t[0],t[1],t[2])}return e.apply(n,t)}function An(e,n,t,r){for(var a=-1,o=null==e?0:e.length;++a<o;){var i=e[a];n(r,i,t(i),e)}return r}function On(e,n){for(var t=-1,r=null==e?0:e.length;++t<r&&!1!==n(e[t],t,e););return e}function En(e,n){for(var t=null==e?0:e.length;t--&&!1!==n(e[t],t,e););return e}function Fn(e,n){for(var t=-1,r=null==e?0:e.length;++t<r;)if(!n(e[t],t,e))return!1;return!0}function Rn(e,n){for(var t=-1,r=null==e?0:e.length,a=0,o=[];++t<r;){var i=e[t];n(i,t,e)&&(o[a++]=i)}return o}function Vn(e,n){return!(null==e||!e.length)&&Bn(e,n,0)>-1}function Dn(e,n,t){for(var r=-1,a=null==e?0:e.length;++r<a;)if(t(n,e[r]))return!0;return!1}function zn(e,n){for(var t=-1,r=null==e?0:e.length,a=Array(r);++t<r;)a[t]=n(e[t],t,e);return a}function Nn(e,n){for(var t=-1,r=n.length,a=e.length;++t<r;)e[a+t]=n[t];return e}function Tn(e,n,t,r){var a=-1,o=null==e?0:e.length;for(r&&o&&(t=e[++a]);++a<o;)t=n(t,e[a],a,e);return t}function Ln(e,n,t,r){var a=null==e?0:e.length;for(r&&a&&(t=e[--a]);a--;)t=n(t,e[a],a,e);return t}function Un(e,n){for(var t=-1,r=null==e?0:e.length;++t<r;)if(n(e[t],t,e))return!0;return!1}var $n=Qn("length");function Kn(e,n,t){var r;return t(e,function(e,t,a){if(n(e,t,a))return r=t,!1}),r}function Pn(e,n,t,r){for(var a=e.length,o=t+(r?1:-1);r?o--:++o<a;)if(n(e[o],o,e))return o;return-1}function Bn(e,n,t){return n==n?function(e,n,t){for(var r=t-1,a=e.length;++r<a;)if(e[r]===n)return r;return-1}(e,n,t):Pn(e,Mn,t)}function Wn(e,n,t,r){for(var a=t-1,o=e.length;++a<o;)if(r(e[a],n))return a;return-1}function Mn(e){return e!=e}function qn(e,n){var t=null==e?0:e.length;return t?Jn(e,n)/t:s}function Qn(n){return function(t){return null==t?e:t[n]}}function Zn(n){return function(t){return null==n?e:n[t]}}function Gn(e,n,t,r,a){return a(e,function(e,a,o){t=r?(r=!1,e):n(t,e,a,o)}),t}function Jn(n,t){for(var r,a=-1,o=n.length;++a<o;){var i=t(n[a]);i!==e&&(r=r===e?i:r+i)}return r}function Hn(e,n){for(var t=-1,r=Array(e);++t<e;)r[t]=n(t);return r}function Yn(e){return e?e.slice(0,ht(e)+1).replace(oe,""):e}function Xn(e){return function(n){return e(n)}}function et(e,n){return zn(n,function(n){return e[n]})}function nt(e,n){return e.has(n)}function tt(e,n){for(var t=-1,r=e.length;++t<r&&Bn(n,e[t],0)>-1;);return t}function rt(e,n){for(var t=e.length;t--&&Bn(n,e[t],0)>-1;);return t}var at=Zn({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),ot=Zn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function it(e){return"\\"+fn[e]}function lt(e){return rn.test(e)}function ut(e){var n=-1,t=Array(e.size);return e.forEach(function(e,r){t[++n]=[r,e]}),t}function ct(e,n){return function(t){return e(n(t))}}function ft(e,n){for(var t=-1,a=e.length,o=0,i=[];++t<a;){var l=e[t];l!==n&&l!==r||(e[t]=r,i[o++]=t)}return i}function st(e){var n=-1,t=Array(e.size);return e.forEach(function(e){t[++n]=e}),t}function dt(e){var n=-1,t=Array(e.size);return e.forEach(function(e){t[++n]=[e,e]}),t}function pt(e){return lt(e)?function(e){for(var n=nn.lastIndex=0;nn.test(e);)++n;return n}(e):$n(e)}function vt(e){return lt(e)?function(e){return e.match(nn)||[]}(e):function(e){return e.split("")}(e)}function ht(e){for(var n=e.length;n--&&ie.test(e.charAt(n)););return n}var mt=Zn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),gt=function J(H){var X,ie=(H=null==H?hn:gt.defaults(hn.Object(),H,gt.pick(hn,on))).Array,ke=H.Date,Ce=H.Error,je=H.Function,Ie=H.Math,Se=H.Object,Ae=H.RegExp,Oe=H.String,Ee=H.TypeError,Fe=ie.prototype,Re=je.prototype,Ve=Se.prototype,De=H["__core-js_shared__"],ze=Re.toString,Ne=Ve.hasOwnProperty,Te=0,Le=(X=/[^.]+$/.exec(De&&De.keys&&De.keys.IE_PROTO||""))?"Symbol(src)_1."+X:"",Ue=Ve.toString,$e=ze.call(Se),Ke=hn._,Pe=Ae("^"+ze.call(Ne).replace(re,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Be=yn?H.Buffer:e,We=H.Symbol,Me=H.Uint8Array,qe=Be?Be.allocUnsafe:e,Qe=ct(Se.getPrototypeOf,Se),Ze=Se.create,Ge=Ve.propertyIsEnumerable,Je=Fe.splice,He=We?We.isConcatSpreadable:e,Ye=We?We.iterator:e,nn=We?We.toStringTag:e,rn=function(){try{var e=po(Se,"defineProperty");return e({},"",{}),e}catch(e){}}(),fn=H.clearTimeout!==hn.clearTimeout&&H.clearTimeout,pn=ke&&ke.now!==hn.Date.now&&ke.now,vn=H.setTimeout!==hn.setTimeout&&H.setTimeout,mn=Ie.ceil,gn=Ie.floor,_n=Se.getOwnPropertySymbols,bn=Be?Be.isBuffer:e,$n=H.isFinite,Zn=Fe.join,yt=ct(Se.keys,Se),_t=Ie.max,bt=Ie.min,wt=ke.now,xt=H.parseInt,kt=Ie.random,Ct=Fe.reverse,jt=po(H,"DataView"),It=po(H,"Map"),St=po(H,"Promise"),At=po(H,"Set"),Ot=po(H,"WeakMap"),Et=po(Se,"create"),Ft=Ot&&new Ot,Rt={},Vt=Uo(jt),Dt=Uo(It),zt=Uo(St),Nt=Uo(At),Tt=Uo(Ot),Lt=We?We.prototype:e,Ut=Lt?Lt.valueOf:e,$t=Lt?Lt.toString:e;function Kt(e){if(tl(e)&&!Mi(e)&&!(e instanceof Mt)){if(e instanceof Wt)return e;if(Ne.call(e,"__wrapped__"))return $o(e)}return new Wt(e)}var Pt=function(){function n(){}return function(t){if(!nl(t))return{};if(Ze)return Ze(t);n.prototype=t;var r=new n;return n.prototype=e,r}}();function Bt(){}function Wt(n,t){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=e}function Mt(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=d,this.__views__=[]}function qt(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function Qt(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function Zt(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function Gt(e){var n=-1,t=null==e?0:e.length;for(this.__data__=new Zt;++n<t;)this.add(e[n])}function Jt(e){var n=this.__data__=new Qt(e);this.size=n.size}function Ht(e,n){var t=Mi(e),r=!t&&Wi(e),a=!t&&!r&&Gi(e),o=!t&&!r&&!a&&fl(e),i=t||r||a||o,l=i?Hn(e.length,Oe):[],u=l.length;for(var c in e)!n&&!Ne.call(e,c)||i&&("length"==c||a&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||bo(c,u))||l.push(c);return l}function Yt(n){var t=n.length;return t?n[Gr(0,t-1)]:e}function Xt(e,n){return No(Ea(e),ur(n,0,e.length))}function er(e){return No(Ea(e))}function nr(n,t,r){(r!==e&&!Ki(n[t],r)||r===e&&!(t in n))&&ir(n,t,r)}function tr(n,t,r){var a=n[t];Ne.call(n,t)&&Ki(a,r)&&(r!==e||t in n)||ir(n,t,r)}function rr(e,n){for(var t=e.length;t--;)if(Ki(e[t][0],n))return t;return-1}function ar(e,n,t,r){return pr(e,function(e,a,o){n(r,e,t(e),o)}),r}function or(e,n){return e&&Fa(n,Rl(n),e)}function ir(e,n,t){"__proto__"==n&&rn?rn(e,n,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[n]=t}function lr(n,t){for(var r=-1,a=t.length,o=ie(a),i=null==n;++r<a;)o[r]=i?e:Sl(n,t[r]);return o}function ur(n,t,r){return n==n&&(r!==e&&(n=n<=r?n:r),t!==e&&(n=n>=t?n:t)),n}function cr(n,t,r,a,o,i){var l,u=1&t,c=2&t,f=4&t;if(r&&(l=o?r(n,a,o,i):r(n)),l!==e)return l;if(!nl(n))return n;var s=Mi(n);if(s){if(l=function(e){var n=e.length,t=new e.constructor(n);return n&&"string"==typeof e[0]&&Ne.call(e,"index")&&(t.index=e.index,t.input=e.input),t}(n),!u)return Ea(n,l)}else{var d=mo(n),p=d==_||d==b;if(Gi(n))return Ca(n,u);if(d==k||d==v||p&&!o){if(l=c||p?{}:yo(n),!u)return c?function(e,n){return Fa(e,ho(e),n)}(n,function(e,n){return e&&Fa(n,Vl(n),e)}(l,n)):function(e,n){return Fa(e,vo(e),n)}(n,or(l,n))}else{if(!cn[d])return o?n:{};l=function(e,n,t){var r,a=e.constructor;switch(n){case E:return ja(e);case m:case g:return new a(+e);case F:return function(e,n){var t=n?ja(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.byteLength)}(e,t);case R:case V:case D:case z:case N:case T:case L:case U:case $:return Ia(e,t);case w:return new a;case x:case S:return new a(e);case j:return function(e){var n=new e.constructor(e.source,ve.exec(e));return n.lastIndex=e.lastIndex,n}(e);case I:return new a;case A:return r=e,Ut?Se(Ut.call(r)):{}}}(n,d,u)}}i||(i=new Jt);var h=i.get(n);if(h)return h;i.set(n,l),ll(n)?n.forEach(function(e){l.add(cr(e,t,r,e,n,i))}):rl(n)&&n.forEach(function(e,a){l.set(a,cr(e,t,r,a,n,i))});var y=s?e:(f?c?oo:ao:c?Vl:Rl)(n);return On(y||n,function(e,a){y&&(e=n[a=e]),tr(l,a,cr(e,t,r,a,n,i))}),l}function fr(n,t,r){var a=r.length;if(null==n)return!a;for(n=Se(n);a--;){var o=r[a],i=t[o],l=n[o];if(l===e&&!(o in n)||!i(l))return!1}return!0}function sr(t,r,a){if("function"!=typeof t)throw new Ee(n);return Ro(function(){t.apply(e,a)},r)}function dr(e,n,t,r){var a=-1,o=Vn,i=!0,l=e.length,u=[],c=n.length;if(!l)return u;t&&(n=zn(n,Xn(t))),r?(o=Dn,i=!1):n.length>=200&&(o=nt,i=!1,n=new Gt(n));e:for(;++a<l;){var f=e[a],s=null==t?f:t(f);if(f=r||0!==f?f:0,i&&s==s){for(var d=c;d--;)if(n[d]===s)continue e;u.push(f)}else o(n,s,r)||u.push(f)}return u}Kt.templateSettings={escape:Z,evaluate:G,interpolate:Y,variable:"",imports:{_:Kt}},Kt.prototype=Bt.prototype,Kt.prototype.constructor=Kt,Wt.prototype=Pt(Bt.prototype),Wt.prototype.constructor=Wt,Mt.prototype=Pt(Bt.prototype),Mt.prototype.constructor=Mt,qt.prototype.clear=function(){this.__data__=Et?Et(null):{},this.size=0},qt.prototype.delete=function(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n},qt.prototype.get=function(n){var r=this.__data__;if(Et){var a=r[n];return a===t?e:a}return Ne.call(r,n)?r[n]:e},qt.prototype.has=function(n){var t=this.__data__;return Et?t[n]!==e:Ne.call(t,n)},qt.prototype.set=function(n,r){var a=this.__data__;return this.size+=this.has(n)?0:1,a[n]=Et&&r===e?t:r,this},Qt.prototype.clear=function(){this.__data__=[],this.size=0},Qt.prototype.delete=function(e){var n=this.__data__,t=rr(n,e);return!(t<0||(t==n.length-1?n.pop():Je.call(n,t,1),--this.size,0))},Qt.prototype.get=function(n){var t=this.__data__,r=rr(t,n);return r<0?e:t[r][1]},Qt.prototype.has=function(e){return rr(this.__data__,e)>-1},Qt.prototype.set=function(e,n){var t=this.__data__,r=rr(t,e);return r<0?(++this.size,t.push([e,n])):t[r][1]=n,this},Zt.prototype.clear=function(){this.size=0,this.__data__={hash:new qt,map:new(It||Qt),string:new qt}},Zt.prototype.delete=function(e){var n=fo(this,e).delete(e);return this.size-=n?1:0,n},Zt.prototype.get=function(e){return fo(this,e).get(e)},Zt.prototype.has=function(e){return fo(this,e).has(e)},Zt.prototype.set=function(e,n){var t=fo(this,e),r=t.size;return t.set(e,n),this.size+=t.size==r?0:1,this},Gt.prototype.add=Gt.prototype.push=function(e){return this.__data__.set(e,t),this},Gt.prototype.has=function(e){return this.__data__.has(e)},Jt.prototype.clear=function(){this.__data__=new Qt,this.size=0},Jt.prototype.delete=function(e){var n=this.__data__,t=n.delete(e);return this.size=n.size,t},Jt.prototype.get=function(e){return this.__data__.get(e)},Jt.prototype.has=function(e){return this.__data__.has(e)},Jt.prototype.set=function(e,n){var t=this.__data__;if(t instanceof Qt){var r=t.__data__;if(!It||r.length<199)return r.push([e,n]),this.size=++t.size,this;t=this.__data__=new Zt(r)}return t.set(e,n),this.size=t.size,this};var pr=Da(wr),vr=Da(xr,!0);function hr(e,n){var t=!0;return pr(e,function(e,r,a){return t=!!n(e,r,a)}),t}function mr(n,t,r){for(var a=-1,o=n.length;++a<o;){var i=n[a],l=t(i);if(null!=l&&(u===e?l==l&&!cl(l):r(l,u)))var u=l,c=i}return c}function gr(e,n){var t=[];return pr(e,function(e,r,a){n(e,r,a)&&t.push(e)}),t}function yr(e,n,t,r,a){var o=-1,i=e.length;for(t||(t=_o),a||(a=[]);++o<i;){var l=e[o];n>0&&t(l)?n>1?yr(l,n-1,t,r,a):Nn(a,l):r||(a[a.length]=l)}return a}var _r=za(),br=za(!0);function wr(e,n){return e&&_r(e,n,Rl)}function xr(e,n){return e&&br(e,n,Rl)}function kr(e,n){return Rn(n,function(n){return Yi(e[n])})}function Cr(n,t){for(var r=0,a=(t=ba(t,n)).length;null!=n&&r<a;)n=n[Lo(t[r++])];return r&&r==a?n:e}function jr(e,n,t){var r=n(e);return Mi(e)?r:Nn(r,t(e))}function Ir(n){return null==n?n===e?"[object Undefined]":"[object Null]":nn&&nn in Se(n)?function(n){var t=Ne.call(n,nn),r=n[nn];try{n[nn]=e;var a=!0}catch(e){}var o=Ue.call(n);return a&&(t?n[nn]=r:delete n[nn]),o}(n):function(e){return Ue.call(e)}(n)}function Sr(e,n){return e>n}function Ar(e,n){return null!=e&&Ne.call(e,n)}function Or(e,n){return null!=e&&n in Se(e)}function Er(n,t,r){for(var a=r?Dn:Vn,o=n[0].length,i=n.length,l=i,u=ie(i),c=1/0,f=[];l--;){var s=n[l];l&&t&&(s=zn(s,Xn(t))),c=bt(s.length,c),u[l]=!r&&(t||o>=120&&s.length>=120)?new Gt(l&&s):e}s=n[0];var d=-1,p=u[0];e:for(;++d<o&&f.length<c;){var v=s[d],h=t?t(v):v;if(v=r||0!==v?v:0,!(p?nt(p,h):a(f,h,r))){for(l=i;--l;){var m=u[l];if(!(m?nt(m,h):a(n[l],h,r)))continue e}p&&p.push(h),f.push(v)}}return f}function Fr(n,t,r){var a=null==(n=Oo(n,t=ba(t,n)))?n:n[Lo(Ho(t))];return null==a?e:Sn(a,n,r)}function Rr(e){return tl(e)&&Ir(e)==v}function Vr(n,t,r,a,o){return n===t||(null==n||null==t||!tl(n)&&!tl(t)?n!=n&&t!=t:function(n,t,r,a,o,i){var l=Mi(n),u=Mi(t),c=l?h:mo(n),f=u?h:mo(t),s=(c=c==v?k:c)==k,d=(f=f==v?k:f)==k,p=c==f;if(p&&Gi(n)){if(!Gi(t))return!1;l=!0,s=!1}if(p&&!s)return i||(i=new Jt),l||fl(n)?to(n,t,r,a,o,i):function(e,n,t,r,a,o,i){switch(t){case F:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case E:return!(e.byteLength!=n.byteLength||!o(new Me(e),new Me(n)));case m:case g:case x:return Ki(+e,+n);case y:return e.name==n.name&&e.message==n.message;case j:case S:return e==n+"";case w:var l=ut;case I:var u=1&r;if(l||(l=st),e.size!=n.size&&!u)return!1;var c=i.get(e);if(c)return c==n;r|=2,i.set(e,n);var f=to(l(e),l(n),r,a,o,i);return i.delete(e),f;case A:if(Ut)return Ut.call(e)==Ut.call(n)}return!1}(n,t,c,r,a,o,i);if(!(1&r)){var _=s&&Ne.call(n,"__wrapped__"),b=d&&Ne.call(t,"__wrapped__");if(_||b){var C=_?n.value():n,O=b?t.value():t;return i||(i=new Jt),o(C,O,r,a,i)}}return!!p&&(i||(i=new Jt),function(n,t,r,a,o,i){var l=1&r,u=ao(n),c=u.length,f=ao(t),s=f.length;if(c!=s&&!l)return!1;for(var d=c;d--;){var p=u[d];if(!(l?p in t:Ne.call(t,p)))return!1}var v=i.get(n),h=i.get(t);if(v&&h)return v==t&&h==n;var m=!0;i.set(n,t),i.set(t,n);for(var g=l;++d<c;){var y=n[p=u[d]],_=t[p];if(a)var b=l?a(_,y,p,t,n,i):a(y,_,p,n,t,i);if(!(b===e?y===_||o(y,_,r,a,i):b)){m=!1;break}g||(g="constructor"==p)}if(m&&!g){var w=n.constructor,x=t.constructor;w==x||!("constructor"in n)||!("constructor"in t)||"function"==typeof w&&w instanceof w&&"function"==typeof x&&x instanceof x||(m=!1)}return i.delete(n),i.delete(t),m}(n,t,r,a,o,i))}(n,t,r,a,Vr,o))}function Dr(n,t,r,a){var o=r.length,i=o,l=!a;if(null==n)return!i;for(n=Se(n);o--;){var u=r[o];if(l&&u[2]?u[1]!==n[u[0]]:!(u[0]in n))return!1}for(;++o<i;){var c=(u=r[o])[0],f=n[c],s=u[1];if(l&&u[2]){if(f===e&&!(c in n))return!1}else{var d=new Jt;if(a)var p=a(f,s,c,n,t,d);if(!(p===e?Vr(s,f,3,a,d):p))return!1}}return!0}function zr(e){return!(!nl(e)||(n=e,Le&&Le in n))&&(Yi(e)?Pe:ge).test(Uo(e));var n}function Nr(e){return"function"==typeof e?e:null==e?au:"object"==typeof e?Mi(e)?Pr(e[0],e[1]):Kr(e):pu(e)}function Tr(e){if(!jo(e))return yt(e);var n=[];for(var t in Se(e))Ne.call(e,t)&&"constructor"!=t&&n.push(t);return n}function Lr(e){if(!nl(e))return function(e){var n=[];if(null!=e)for(var t in Se(e))n.push(t);return n}(e);var n=jo(e),t=[];for(var r in e)("constructor"!=r||!n&&Ne.call(e,r))&&t.push(r);return t}function Ur(e,n){return e<n}function $r(e,n){var t=-1,r=Qi(e)?ie(e.length):[];return pr(e,function(e,a,o){r[++t]=n(e,a,o)}),r}function Kr(e){var n=so(e);return 1==n.length&&n[0][2]?So(n[0][0],n[0][1]):function(t){return t===e||Dr(t,e,n)}}function Pr(n,t){return xo(n)&&Io(t)?So(Lo(n),t):function(r){var a=Sl(r,n);return a===e&&a===t?Al(r,n):Vr(t,a,3)}}function Br(n,t,r,a,o){n!==t&&_r(t,function(i,l){if(o||(o=new Jt),nl(i))!function(n,t,r,a,o,i,l){var u=Eo(n,r),c=Eo(t,r),f=l.get(c);if(f)nr(n,r,f);else{var s=i?i(u,c,r+"",n,t,l):e,d=s===e;if(d){var p=Mi(c),v=!p&&Gi(c),h=!p&&!v&&fl(c);s=c,p||v||h?Mi(u)?s=u:Zi(u)?s=Ea(u):v?(d=!1,s=Ca(c,!0)):h?(d=!1,s=Ia(c,!0)):s=[]:ol(c)||Wi(c)?(s=u,Wi(u)?s=yl(u):nl(u)&&!Yi(u)||(s=yo(c))):d=!1}d&&(l.set(c,s),o(s,c,a,i,l),l.delete(c)),nr(n,r,s)}}(n,t,l,r,Br,a,o);else{var u=a?a(Eo(n,l),i,l+"",n,t,o):e;u===e&&(u=i),nr(n,l,u)}},Vl)}function Wr(n,t){var r=n.length;if(r)return bo(t+=t<0?r:0,r)?n[t]:e}function Mr(e,n,t){n=n.length?zn(n,function(e){return Mi(e)?function(n){return Cr(n,1===e.length?e[0]:e)}:e}):[au];var r=-1;n=zn(n,Xn(co()));var a=$r(e,function(e,t,a){var o=zn(n,function(n){return n(e)});return{criteria:o,index:++r,value:e}});return function(e,n){var t=e.length;for(e.sort(n);t--;)e[t]=e[t].value;return e}(a,function(e,n){return function(e,n,t){for(var r=-1,a=e.criteria,o=n.criteria,i=a.length,l=t.length;++r<i;){var u=Sa(a[r],o[r]);if(u)return r>=l?u:u*("desc"==t[r]?-1:1)}return e.index-n.index}(e,n,t)})}function qr(e,n,t){for(var r=-1,a=n.length,o={};++r<a;){var i=n[r],l=Cr(e,i);t(l,i)&&ea(o,ba(i,e),l)}return o}function Qr(e,n,t,r){var a=r?Wn:Bn,o=-1,i=n.length,l=e;for(e===n&&(n=Ea(n)),t&&(l=zn(e,Xn(t)));++o<i;)for(var u=0,c=n[o],f=t?t(c):c;(u=a(l,f,u,r))>-1;)l!==e&&Je.call(l,u,1),Je.call(e,u,1);return e}function Zr(e,n){for(var t=e?n.length:0,r=t-1;t--;){var a=n[t];if(t==r||a!==o){var o=a;bo(a)?Je.call(e,a,1):da(e,a)}}return e}function Gr(e,n){return e+gn(kt()*(n-e+1))}function Jr(e,n){var t="";if(!e||n<1||n>f)return t;do{n%2&&(t+=e),(n=gn(n/2))&&(e+=e)}while(n);return t}function Hr(e,n){return Vo(Ao(e,n,au),e+"")}function Yr(e){return Yt(Kl(e))}function Xr(e,n){var t=Kl(e);return No(t,ur(n,0,t.length))}function ea(n,t,r,a){if(!nl(n))return n;for(var o=-1,i=(t=ba(t,n)).length,l=i-1,u=n;null!=u&&++o<i;){var c=Lo(t[o]),f=r;if("__proto__"===c||"constructor"===c||"prototype"===c)return n;if(o!=l){var s=u[c];(f=a?a(s,c,u):e)===e&&(f=nl(s)?s:bo(t[o+1])?[]:{})}tr(u,c,f),u=u[c]}return n}var na=Ft?function(e,n){return Ft.set(e,n),e}:au,ta=rn?function(e,n){return rn(e,"toString",{configurable:!0,enumerable:!1,value:nu(n),writable:!0})}:au;function ra(e){return No(Kl(e))}function aa(e,n,t){var r=-1,a=e.length;n<0&&(n=-n>a?0:a+n),(t=t>a?a:t)<0&&(t+=a),a=n>t?0:t-n>>>0,n>>>=0;for(var o=ie(a);++r<a;)o[r]=e[r+n];return o}function oa(e,n){var t;return pr(e,function(e,r,a){return!(t=n(e,r,a))}),!!t}function ia(e,n,t){var r=0,a=null==e?r:e.length;if("number"==typeof n&&n==n&&a<=2147483647){for(;r<a;){var o=r+a>>>1,i=e[o];null!==i&&!cl(i)&&(t?i<=n:i<n)?r=o+1:a=o}return a}return la(e,n,au,t)}function la(n,t,r,a){var o=0,i=null==n?0:n.length;if(0===i)return 0;for(var l=(t=r(t))!=t,u=null===t,c=cl(t),f=t===e;o<i;){var s=gn((o+i)/2),d=r(n[s]),p=d!==e,v=null===d,h=d==d,m=cl(d);if(l)var g=a||h;else g=f?h&&(a||p):u?h&&p&&(a||!v):c?h&&p&&!v&&(a||!m):!v&&!m&&(a?d<=t:d<t);g?o=s+1:i=s}return bt(i,4294967294)}function ua(e,n){for(var t=-1,r=e.length,a=0,o=[];++t<r;){var i=e[t],l=n?n(i):i;if(!t||!Ki(l,u)){var u=l;o[a++]=0===i?0:i}}return o}function ca(e){return"number"==typeof e?e:cl(e)?s:+e}function fa(e){if("string"==typeof e)return e;if(Mi(e))return zn(e,fa)+"";if(cl(e))return $t?$t.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}function sa(e,n,t){var r=-1,a=Vn,o=e.length,i=!0,l=[],u=l;if(t)i=!1,a=Dn;else if(o>=200){var c=n?null:Ja(e);if(c)return st(c);i=!1,a=nt,u=new Gt}else u=n?[]:l;e:for(;++r<o;){var f=e[r],s=n?n(f):f;if(f=t||0!==f?f:0,i&&s==s){for(var d=u.length;d--;)if(u[d]===s)continue e;n&&u.push(s),l.push(f)}else a(u,s,t)||(u!==l&&u.push(s),l.push(f))}return l}function da(e,n){return null==(e=Oo(e,n=ba(n,e)))||delete e[Lo(Ho(n))]}function pa(e,n,t,r){return ea(e,n,t(Cr(e,n)),r)}function va(e,n,t,r){for(var a=e.length,o=r?a:-1;(r?o--:++o<a)&&n(e[o],o,e););return t?aa(e,r?0:o,r?o+1:a):aa(e,r?o+1:0,r?a:o)}function ha(e,n){var t=e;return t instanceof Mt&&(t=t.value()),Tn(n,function(e,n){return n.func.apply(n.thisArg,Nn([e],n.args))},t)}function ma(e,n,t){var r=e.length;if(r<2)return r?sa(e[0]):[];for(var a=-1,o=ie(r);++a<r;)for(var i=e[a],l=-1;++l<r;)l!=a&&(o[a]=dr(o[a]||i,e[l],n,t));return sa(yr(o,1),n,t)}function ga(n,t,r){for(var a=-1,o=n.length,i=t.length,l={};++a<o;){var u=a<i?t[a]:e;r(l,n[a],u)}return l}function ya(e){return Zi(e)?e:[]}function _a(e){return"function"==typeof e?e:au}function ba(e,n){return Mi(e)?e:xo(e,n)?[e]:To(_l(e))}var wa=Hr;function xa(n,t,r){var a=n.length;return r=r===e?a:r,!t&&r>=a?n:aa(n,t,r)}var ka=fn||function(e){return hn.clearTimeout(e)};function Ca(e,n){if(n)return e.slice();var t=e.length,r=qe?qe(t):new e.constructor(t);return e.copy(r),r}function ja(e){var n=new e.constructor(e.byteLength);return new Me(n).set(new Me(e)),n}function Ia(e,n){var t=n?ja(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}function Sa(n,t){if(n!==t){var r=n!==e,a=null===n,o=n==n,i=cl(n),l=t!==e,u=null===t,c=t==t,f=cl(t);if(!u&&!f&&!i&&n>t||i&&l&&c&&!u&&!f||a&&l&&c||!r&&c||!o)return 1;if(!a&&!i&&!f&&n<t||f&&r&&o&&!a&&!i||u&&r&&o||!l&&o||!c)return-1}return 0}function Aa(e,n,t,r){for(var a=-1,o=e.length,i=t.length,l=-1,u=n.length,c=_t(o-i,0),f=ie(u+c),s=!r;++l<u;)f[l]=n[l];for(;++a<i;)(s||a<o)&&(f[t[a]]=e[a]);for(;c--;)f[l++]=e[a++];return f}function Oa(e,n,t,r){for(var a=-1,o=e.length,i=-1,l=t.length,u=-1,c=n.length,f=_t(o-l,0),s=ie(f+c),d=!r;++a<f;)s[a]=e[a];for(var p=a;++u<c;)s[p+u]=n[u];for(;++i<l;)(d||a<o)&&(s[p+t[i]]=e[a++]);return s}function Ea(e,n){var t=-1,r=e.length;for(n||(n=ie(r));++t<r;)n[t]=e[t];return n}function Fa(n,t,r,a){var o=!r;r||(r={});for(var i=-1,l=t.length;++i<l;){var u=t[i],c=a?a(r[u],n[u],u,r,n):e;c===e&&(c=n[u]),o?ir(r,u,c):tr(r,u,c)}return r}function Ra(e,n){return function(t,r){var a=Mi(t)?An:ar,o=n?n():{};return a(t,e,co(r,2),o)}}function Va(n){return Hr(function(t,r){var a=-1,o=r.length,i=o>1?r[o-1]:e,l=o>2?r[2]:e;for(i=n.length>3&&"function"==typeof i?(o--,i):e,l&&wo(r[0],r[1],l)&&(i=o<3?e:i,o=1),t=Se(t);++a<o;){var u=r[a];u&&n(t,u,a,i)}return t})}function Da(e,n){return function(t,r){if(null==t)return t;if(!Qi(t))return e(t,r);for(var a=t.length,o=n?a:-1,i=Se(t);(n?o--:++o<a)&&!1!==r(i[o],o,i););return t}}function za(e){return function(n,t,r){for(var a=-1,o=Se(n),i=r(n),l=i.length;l--;){var u=i[e?l:++a];if(!1===t(o[u],u,o))break}return n}}function Na(n){return function(t){var r=lt(t=_l(t))?vt(t):e,a=r?r[0]:t.charAt(0),o=r?xa(r,1).join(""):t.slice(1);return a[n]()+o}}function Ta(e){return function(n){return Tn(Yl(Wl(n).replace(Xe,"")),e,"")}}function La(e){return function(){var n=arguments;switch(n.length){case 0:return new e;case 1:return new e(n[0]);case 2:return new e(n[0],n[1]);case 3:return new e(n[0],n[1],n[2]);case 4:return new e(n[0],n[1],n[2],n[3]);case 5:return new e(n[0],n[1],n[2],n[3],n[4]);case 6:return new e(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new e(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var t=Pt(e.prototype),r=e.apply(t,n);return nl(r)?r:t}}function Ua(n){return function(t,r,a){var o=Se(t);if(!Qi(t)){var i=co(r,3);t=Rl(t),r=function(e){return i(o[e],e,o)}}var l=n(t,r,a);return l>-1?o[i?t[l]:l]:e}}function $a(t){return ro(function(r){var a=r.length,o=a,i=Wt.prototype.thru;for(t&&r.reverse();o--;){var l=r[o];if("function"!=typeof l)throw new Ee(n);if(i&&!u&&"wrapper"==lo(l))var u=new Wt([],!0)}for(o=u?o:a;++o<a;){var c=lo(l=r[o]),f="wrapper"==c?io(l):e;u=f&&ko(f[0])&&424==f[1]&&!f[4].length&&1==f[9]?u[lo(f[0])].apply(u,f[3]):1==l.length&&ko(l)?u[c]():u.thru(l)}return function(){var e=arguments,n=e[0];if(u&&1==e.length&&Mi(n))return u.plant(n).value();for(var t=0,o=a?r[t].apply(this,e):n;++t<a;)o=r[t].call(this,o);return o}})}function Ka(n,t,r,a,o,i,u,c,f,s){var d=t&l,p=1&t,v=2&t,h=24&t,m=512&t,g=v?e:La(n);return function l(){for(var y=arguments.length,_=ie(y),b=y;b--;)_[b]=arguments[b];if(h)var w=uo(l),x=function(e,n){for(var t=e.length,r=0;t--;)e[t]===n&&++r;return r}(_,w);if(a&&(_=Aa(_,a,o,h)),i&&(_=Oa(_,i,u,h)),y-=x,h&&y<s){var k=ft(_,w);return Za(n,t,Ka,l.placeholder,r,_,k,c,f,s-y)}var C=p?r:this,j=v?C[n]:n;return y=_.length,c?_=function(n,t){for(var r=n.length,a=bt(t.length,r),o=Ea(n);a--;){var i=t[a];n[a]=bo(i,r)?o[i]:e}return n}(_,c):m&&y>1&&_.reverse(),d&&f<y&&(_.length=f),this&&this!==hn&&this instanceof l&&(j=g||La(j)),j.apply(C,_)}}function Pa(e,n){return function(t,r){return function(e,n,t,r){return wr(e,function(e,a,o){n(r,t(e),a,o)}),r}(t,e,n(r),{})}}function Ba(n,t){return function(r,a){var o;if(r===e&&a===e)return t;if(r!==e&&(o=r),a!==e){if(o===e)return a;"string"==typeof r||"string"==typeof a?(r=fa(r),a=fa(a)):(r=ca(r),a=ca(a)),o=n(r,a)}return o}}function Wa(e){return ro(function(n){return n=zn(n,Xn(co())),Hr(function(t){var r=this;return e(n,function(e){return Sn(e,r,t)})})})}function Ma(n,t){var r=(t=t===e?" ":fa(t)).length;if(r<2)return r?Jr(t,n):t;var a=Jr(t,mn(n/pt(t)));return lt(t)?xa(vt(a),0,n).join(""):a.slice(0,n)}function qa(n){return function(t,r,a){return a&&"number"!=typeof a&&wo(t,r,a)&&(r=a=e),t=vl(t),r===e?(r=t,t=0):r=vl(r),function(e,n,t,r){for(var a=-1,o=_t(mn((n-e)/(t||1)),0),i=ie(o);o--;)i[r?o:++a]=e,e+=t;return i}(t,r,a=a===e?t<r?1:-1:vl(a),n)}}function Qa(e){return function(n,t){return"string"==typeof n&&"string"==typeof t||(n=gl(n),t=gl(t)),e(n,t)}}function Za(n,t,r,a,l,u,c,f,s,d){var p=8&t;t|=p?o:i,4&(t&=~(p?i:o))||(t&=-4);var v=[n,t,l,p?u:e,p?c:e,p?e:u,p?e:c,f,s,d],h=r.apply(e,v);return ko(n)&&Fo(h,v),h.placeholder=a,Do(h,n,t)}function Ga(e){var n=Ie[e];return function(e,t){if(e=gl(e),(t=null==t?0:bt(hl(t),292))&&$n(e)){var r=(_l(e)+"e").split("e");return+((r=(_l(n(r[0]+"e"+(+r[1]+t)))+"e").split("e"))[0]+"e"+(+r[1]-t))}return n(e)}}var Ja=At&&1/st(new At([,-0]))[1]==c?function(e){return new At(e)}:cu;function Ha(e){return function(n){var t=mo(n);return t==w?ut(n):t==I?dt(n):function(e,n){return zn(n,function(n){return[n,e[n]]})}(n,e(n))}}function Ya(t,c,f,s,d,p,v,h){var m=2&c;if(!m&&"function"!=typeof t)throw new Ee(n);var g=s?s.length:0;if(g||(c&=-97,s=d=e),v=v===e?v:_t(hl(v),0),h=h===e?h:hl(h),g-=d?d.length:0,c&i){var y=s,_=d;s=d=e}var b=m?e:io(t),w=[t,c,f,s,d,y,_,p,v,h];if(b&&function(e,n){var t=e[1],a=n[1],o=t|a,i=o<131,c=a==l&&8==t||a==l&&t==u&&e[7].length<=n[8]||384==a&&n[7].length<=n[8]&&8==t;if(!i&&!c)return e;1&a&&(e[2]=n[2],o|=1&t?0:4);var f=n[3];if(f){var s=e[3];e[3]=s?Aa(s,f,n[4]):f,e[4]=s?ft(e[3],r):n[4]}(f=n[5])&&(s=e[5],e[5]=s?Oa(s,f,n[6]):f,e[6]=s?ft(e[5],r):n[6]),(f=n[7])&&(e[7]=f),a&l&&(e[8]=null==e[8]?n[8]:bt(e[8],n[8])),null==e[9]&&(e[9]=n[9]),e[0]=n[0],e[1]=o}(w,b),t=w[0],c=w[1],f=w[2],s=w[3],d=w[4],!(h=w[9]=w[9]===e?m?0:t.length:_t(w[9]-g,0))&&24&c&&(c&=-25),c&&1!=c)x=8==c||c==a?function(n,t,r){var a=La(n);return function o(){for(var i=arguments.length,l=ie(i),u=i,c=uo(o);u--;)l[u]=arguments[u];var f=i<3&&l[0]!==c&&l[i-1]!==c?[]:ft(l,c);return(i-=f.length)<r?Za(n,t,Ka,o.placeholder,e,l,f,e,e,r-i):Sn(this&&this!==hn&&this instanceof o?a:n,this,l)}}(t,c,h):c!=o&&33!=c||d.length?Ka.apply(e,w):function(e,n,t,r){var a=1&n,o=La(e);return function n(){for(var i=-1,l=arguments.length,u=-1,c=r.length,f=ie(c+l),s=this&&this!==hn&&this instanceof n?o:e;++u<c;)f[u]=r[u];for(;l--;)f[u++]=arguments[++i];return Sn(s,a?t:this,f)}}(t,c,f,s);else var x=function(e,n,t){var r=1&n,a=La(e);return function n(){return(this&&this!==hn&&this instanceof n?a:e).apply(r?t:this,arguments)}}(t,c,f);return Do((b?na:Fo)(x,w),t,c)}function Xa(n,t,r,a){return n===e||Ki(n,Ve[r])&&!Ne.call(a,r)?t:n}function eo(n,t,r,a,o,i){return nl(n)&&nl(t)&&(i.set(t,n),Br(n,t,e,eo,i),i.delete(t)),n}function no(n){return ol(n)?e:n}function to(n,t,r,a,o,i){var l=1&r,u=n.length,c=t.length;if(u!=c&&!(l&&c>u))return!1;var f=i.get(n),s=i.get(t);if(f&&s)return f==t&&s==n;var d=-1,p=!0,v=2&r?new Gt:e;for(i.set(n,t),i.set(t,n);++d<u;){var h=n[d],m=t[d];if(a)var g=l?a(m,h,d,t,n,i):a(h,m,d,n,t,i);if(g!==e){if(g)continue;p=!1;break}if(v){if(!Un(t,function(e,n){if(!nt(v,n)&&(h===e||o(h,e,r,a,i)))return v.push(n)})){p=!1;break}}else if(h!==m&&!o(h,m,r,a,i)){p=!1;break}}return i.delete(n),i.delete(t),p}function ro(n){return Vo(Ao(n,e,qo),n+"")}function ao(e){return jr(e,Rl,vo)}function oo(e){return jr(e,Vl,ho)}var io=Ft?function(e){return Ft.get(e)}:cu;function lo(e){for(var n=e.name+"",t=Rt[n],r=Ne.call(Rt,n)?t.length:0;r--;){var a=t[r],o=a.func;if(null==o||o==e)return a.name}return n}function uo(e){return(Ne.call(Kt,"placeholder")?Kt:e).placeholder}function co(){var e=Kt.iteratee||ou;return e=e===ou?Nr:e,arguments.length?e(arguments[0],arguments[1]):e}function fo(e,n){var t,r,a=e.__data__;return("string"==(r=typeof(t=n))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t)?a["string"==typeof n?"string":"hash"]:a.map}function so(e){for(var n=Rl(e),t=n.length;t--;){var r=n[t],a=e[r];n[t]=[r,a,Io(a)]}return n}function po(n,t){var r=function(n,t){return null==n?e:n[t]}(n,t);return zr(r)?r:e}var vo=_n?function(e){return null==e?[]:(e=Se(e),Rn(_n(e),function(n){return Ge.call(e,n)}))}:mu,ho=_n?function(e){for(var n=[];e;)Nn(n,vo(e)),e=Qe(e);return n}:mu,mo=Ir;function go(e,n,t){for(var r=-1,a=(n=ba(n,e)).length,o=!1;++r<a;){var i=Lo(n[r]);if(!(o=null!=e&&t(e,i)))break;e=e[i]}return o||++r!=a?o:!!(a=null==e?0:e.length)&&el(a)&&bo(i,a)&&(Mi(e)||Wi(e))}function yo(e){return"function"!=typeof e.constructor||jo(e)?{}:Pt(Qe(e))}function _o(e){return Mi(e)||Wi(e)||!!(He&&e&&e[He])}function bo(e,n){var t=typeof e;return!!(n=null==n?f:n)&&("number"==t||"symbol"!=t&&_e.test(e))&&e>-1&&e%1==0&&e<n}function wo(e,n,t){if(!nl(t))return!1;var r=typeof n;return!!("number"==r?Qi(t)&&bo(n,t.length):"string"==r&&n in t)&&Ki(t[n],e)}function xo(e,n){if(Mi(e))return!1;var t=typeof e;return!("number"!=t&&"symbol"!=t&&"boolean"!=t&&null!=e&&!cl(e))||ne.test(e)||!ee.test(e)||null!=n&&e in Se(n)}function ko(e){var n=lo(e),t=Kt[n];if("function"!=typeof t||!(n in Mt.prototype))return!1;if(e===t)return!0;var r=io(t);return!!r&&e===r[0]}(jt&&mo(new jt(new ArrayBuffer(1)))!=F||It&&mo(new It)!=w||St&&mo(St.resolve())!=C||At&&mo(new At)!=I||Ot&&mo(new Ot)!=O)&&(mo=function(n){var t=Ir(n),r=t==k?n.constructor:e,a=r?Uo(r):"";if(a)switch(a){case Vt:return F;case Dt:return w;case zt:return C;case Nt:return I;case Tt:return O}return t});var Co=De?Yi:gu;function jo(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||Ve)}function Io(e){return e==e&&!nl(e)}function So(n,t){return function(r){return null!=r&&r[n]===t&&(t!==e||n in Se(r))}}function Ao(n,t,r){return t=_t(t===e?n.length-1:t,0),function(){for(var e=arguments,a=-1,o=_t(e.length-t,0),i=ie(o);++a<o;)i[a]=e[t+a];a=-1;for(var l=ie(t+1);++a<t;)l[a]=e[a];return l[t]=r(i),Sn(n,this,l)}}function Oo(e,n){return n.length<2?e:Cr(e,aa(n,0,-1))}function Eo(e,n){if(("constructor"!==n||"function"!=typeof e[n])&&"__proto__"!=n)return e[n]}var Fo=zo(na),Ro=vn||function(e,n){return hn.setTimeout(e,n)},Vo=zo(ta);function Do(e,n,t){var r=n+"";return Vo(e,function(e,n){var t=n.length;if(!t)return e;var r=t-1;return n[r]=(t>1?"& ":"")+n[r],n=n.join(t>2?", ":" "),e.replace(le,"{\n/* [wrapped with "+n+"] */\n")}(r,function(e,n){return On(p,function(t){var r="_."+t[0];n&t[1]&&!Vn(e,r)&&e.push(r)}),e.sort()}(function(e){var n=e.match(ue);return n?n[1].split(ce):[]}(r),t)))}function zo(n){var t=0,r=0;return function(){var a=wt(),o=16-(a-r);if(r=a,o>0){if(++t>=800)return arguments[0]}else t=0;return n.apply(e,arguments)}}function No(n,t){var r=-1,a=n.length,o=a-1;for(t=t===e?a:t;++r<t;){var i=Gr(r,o),l=n[i];n[i]=n[r],n[r]=l}return n.length=t,n}var To=function(e){var n=zi(e,function(e){return 500===t.size&&t.clear(),e}),t=n.cache;return n}(function(e){var n=[];return 46===e.charCodeAt(0)&&n.push(""),e.replace(te,function(e,t,r,a){n.push(r?a.replace(de,"$1"):t||e)}),n});function Lo(e){if("string"==typeof e||cl(e))return e;var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}function Uo(e){if(null!=e){try{return ze.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function $o(e){if(e instanceof Mt)return e.clone();var n=new Wt(e.__wrapped__,e.__chain__);return n.__actions__=Ea(e.__actions__),n.__index__=e.__index__,n.__values__=e.__values__,n}var Ko=Hr(function(e,n){return Zi(e)?dr(e,yr(n,1,Zi,!0)):[]}),Po=Hr(function(n,t){var r=Ho(t);return Zi(r)&&(r=e),Zi(n)?dr(n,yr(t,1,Zi,!0),co(r,2)):[]}),Bo=Hr(function(n,t){var r=Ho(t);return Zi(r)&&(r=e),Zi(n)?dr(n,yr(t,1,Zi,!0),e,r):[]});function Wo(e,n,t){var r=null==e?0:e.length;if(!r)return-1;var a=null==t?0:hl(t);return a<0&&(a=_t(r+a,0)),Pn(e,co(n,3),a)}function Mo(n,t,r){var a=null==n?0:n.length;if(!a)return-1;var o=a-1;return r!==e&&(o=hl(r),o=r<0?_t(a+o,0):bt(o,a-1)),Pn(n,co(t,3),o,!0)}function qo(e){return null!=e&&e.length?yr(e,1):[]}function Qo(n){return n&&n.length?n[0]:e}var Zo=Hr(function(e){var n=zn(e,ya);return n.length&&n[0]===e[0]?Er(n):[]}),Go=Hr(function(n){var t=Ho(n),r=zn(n,ya);return t===Ho(r)?t=e:r.pop(),r.length&&r[0]===n[0]?Er(r,co(t,2)):[]}),Jo=Hr(function(n){var t=Ho(n),r=zn(n,ya);return(t="function"==typeof t?t:e)&&r.pop(),r.length&&r[0]===n[0]?Er(r,e,t):[]});function Ho(n){var t=null==n?0:n.length;return t?n[t-1]:e}var Yo=Hr(Xo);function Xo(e,n){return e&&e.length&&n&&n.length?Qr(e,n):e}var ei=ro(function(e,n){var t=null==e?0:e.length,r=lr(e,n);return Zr(e,zn(n,function(e){return bo(e,t)?+e:e}).sort(Sa)),r});function ni(e){return null==e?e:Ct.call(e)}var ti=Hr(function(e){return sa(yr(e,1,Zi,!0))}),ri=Hr(function(n){var t=Ho(n);return Zi(t)&&(t=e),sa(yr(n,1,Zi,!0),co(t,2))}),ai=Hr(function(n){var t=Ho(n);return t="function"==typeof t?t:e,sa(yr(n,1,Zi,!0),e,t)});function oi(e){if(!e||!e.length)return[];var n=0;return e=Rn(e,function(e){if(Zi(e))return n=_t(e.length,n),!0}),Hn(n,function(n){return zn(e,Qn(n))})}function ii(n,t){if(!n||!n.length)return[];var r=oi(n);return null==t?r:zn(r,function(n){return Sn(t,e,n)})}var li=Hr(function(e,n){return Zi(e)?dr(e,n):[]}),ui=Hr(function(e){return ma(Rn(e,Zi))}),ci=Hr(function(n){var t=Ho(n);return Zi(t)&&(t=e),ma(Rn(n,Zi),co(t,2))}),fi=Hr(function(n){var t=Ho(n);return t="function"==typeof t?t:e,ma(Rn(n,Zi),e,t)}),si=Hr(oi),di=Hr(function(n){var t=n.length,r=t>1?n[t-1]:e;return r="function"==typeof r?(n.pop(),r):e,ii(n,r)});function pi(e){var n=Kt(e);return n.__chain__=!0,n}function vi(e,n){return n(e)}var hi=ro(function(n){var t=n.length,r=t?n[0]:0,a=this.__wrapped__,o=function(e){return lr(e,n)};return!(t>1||this.__actions__.length)&&a instanceof Mt&&bo(r)?((a=a.slice(r,+r+(t?1:0))).__actions__.push({func:vi,args:[o],thisArg:e}),new Wt(a,this.__chain__).thru(function(n){return t&&!n.length&&n.push(e),n})):this.thru(o)}),mi=Ra(function(e,n,t){Ne.call(e,t)?++e[t]:ir(e,t,1)}),gi=Ua(Wo),yi=Ua(Mo);function _i(e,n){return(Mi(e)?On:pr)(e,co(n,3))}function bi(e,n){return(Mi(e)?En:vr)(e,co(n,3))}var wi=Ra(function(e,n,t){Ne.call(e,t)?e[t].push(n):ir(e,t,[n])}),xi=Hr(function(e,n,t){var r=-1,a="function"==typeof n,o=Qi(e)?ie(e.length):[];return pr(e,function(e){o[++r]=a?Sn(n,e,t):Fr(e,n,t)}),o}),ki=Ra(function(e,n,t){ir(e,t,n)});function Ci(e,n){return(Mi(e)?zn:$r)(e,co(n,3))}var ji=Ra(function(e,n,t){e[t?0:1].push(n)},function(){return[[],[]]}),Ii=Hr(function(e,n){if(null==e)return[];var t=n.length;return t>1&&wo(e,n[0],n[1])?n=[]:t>2&&wo(n[0],n[1],n[2])&&(n=[n[0]]),Mr(e,yr(n,1),[])}),Si=pn||function(){return hn.Date.now()};function Ai(n,t,r){return t=r?e:t,t=n&&null==t?n.length:t,Ya(n,l,e,e,e,e,t)}function Oi(t,r){var a;if("function"!=typeof r)throw new Ee(n);return t=hl(t),function(){return--t>0&&(a=r.apply(this,arguments)),t<=1&&(r=e),a}}var Ei=Hr(function(e,n,t){var r=1;if(t.length){var a=ft(t,uo(Ei));r|=o}return Ya(e,r,n,t,a)}),Fi=Hr(function(e,n,t){var r=3;if(t.length){var a=ft(t,uo(Fi));r|=o}return Ya(n,r,e,t,a)});function Ri(t,r,a){var o,i,l,u,c,f,s=0,d=!1,p=!1,v=!0;if("function"!=typeof t)throw new Ee(n);function h(n){var r=o,a=i;return o=i=e,s=n,u=t.apply(a,r)}function m(n){var t=n-f;return f===e||t>=r||t<0||p&&n-s>=l}function g(){var e=Si();if(m(e))return y(e);c=Ro(g,function(e){var n=r-(e-f);return p?bt(n,l-(e-s)):n}(e))}function y(n){return c=e,v&&o?h(n):(o=i=e,u)}function _(){var n=Si(),t=m(n);if(o=arguments,i=this,f=n,t){if(c===e)return function(e){return s=e,c=Ro(g,r),d?h(e):u}(f);if(p)return ka(c),c=Ro(g,r),h(f)}return c===e&&(c=Ro(g,r)),u}return r=gl(r)||0,nl(a)&&(d=!!a.leading,l=(p="maxWait"in a)?_t(gl(a.maxWait)||0,r):l,v="trailing"in a?!!a.trailing:v),_.cancel=function(){c!==e&&ka(c),s=0,o=f=i=c=e},_.flush=function(){return c===e?u:y(Si())},_}var Vi=Hr(function(e,n){return sr(e,1,n)}),Di=Hr(function(e,n,t){return sr(e,gl(n)||0,t)});function zi(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Ee(n);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],o=r.cache;if(o.has(a))return o.get(a);var i=e.apply(this,n);return r.cache=o.set(a,i)||o,i};return r.cache=new(zi.Cache||Zt),r}function Ni(e){if("function"!=typeof e)throw new Ee(n);return function(){var n=arguments;switch(n.length){case 0:return!e.call(this);case 1:return!e.call(this,n[0]);case 2:return!e.call(this,n[0],n[1]);case 3:return!e.call(this,n[0],n[1],n[2])}return!e.apply(this,n)}}zi.Cache=Zt;var Ti=wa(function(e,n){var t=(n=1==n.length&&Mi(n[0])?zn(n[0],Xn(co())):zn(yr(n,1),Xn(co()))).length;return Hr(function(r){for(var a=-1,o=bt(r.length,t);++a<o;)r[a]=n[a].call(this,r[a]);return Sn(e,this,r)})}),Li=Hr(function(n,t){var r=ft(t,uo(Li));return Ya(n,o,e,t,r)}),Ui=Hr(function(n,t){var r=ft(t,uo(Ui));return Ya(n,i,e,t,r)}),$i=ro(function(n,t){return Ya(n,u,e,e,e,t)});function Ki(e,n){return e===n||e!=e&&n!=n}var Pi=Qa(Sr),Bi=Qa(function(e,n){return e>=n}),Wi=Rr(function(){return arguments}())?Rr:function(e){return tl(e)&&Ne.call(e,"callee")&&!Ge.call(e,"callee")},Mi=ie.isArray,qi=wn?Xn(wn):function(e){return tl(e)&&Ir(e)==E};function Qi(e){return null!=e&&el(e.length)&&!Yi(e)}function Zi(e){return tl(e)&&Qi(e)}var Gi=bn||gu,Ji=xn?Xn(xn):function(e){return tl(e)&&Ir(e)==g};function Hi(e){if(!tl(e))return!1;var n=Ir(e);return n==y||"[object DOMException]"==n||"string"==typeof e.message&&"string"==typeof e.name&&!ol(e)}function Yi(e){if(!nl(e))return!1;var n=Ir(e);return n==_||n==b||"[object AsyncFunction]"==n||"[object Proxy]"==n}function Xi(e){return"number"==typeof e&&e==hl(e)}function el(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=f}function nl(e){var n=typeof e;return null!=e&&("object"==n||"function"==n)}function tl(e){return null!=e&&"object"==typeof e}var rl=kn?Xn(kn):function(e){return tl(e)&&mo(e)==w};function al(e){return"number"==typeof e||tl(e)&&Ir(e)==x}function ol(e){if(!tl(e)||Ir(e)!=k)return!1;var n=Qe(e);if(null===n)return!0;var t=Ne.call(n,"constructor")&&n.constructor;return"function"==typeof t&&t instanceof t&&ze.call(t)==$e}var il=Cn?Xn(Cn):function(e){return tl(e)&&Ir(e)==j},ll=jn?Xn(jn):function(e){return tl(e)&&mo(e)==I};function ul(e){return"string"==typeof e||!Mi(e)&&tl(e)&&Ir(e)==S}function cl(e){return"symbol"==typeof e||tl(e)&&Ir(e)==A}var fl=In?Xn(In):function(e){return tl(e)&&el(e.length)&&!!un[Ir(e)]},sl=Qa(Ur),dl=Qa(function(e,n){return e<=n});function pl(e){if(!e)return[];if(Qi(e))return ul(e)?vt(e):Ea(e);if(Ye&&e[Ye])return function(e){for(var n,t=[];!(n=e.next()).done;)t.push(n.value);return t}(e[Ye]());var n=mo(e);return(n==w?ut:n==I?st:Kl)(e)}function vl(e){return e?(e=gl(e))===c||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function hl(e){var n=vl(e),t=n%1;return n==n?t?n-t:n:0}function ml(e){return e?ur(hl(e),0,d):0}function gl(e){if("number"==typeof e)return e;if(cl(e))return s;if(nl(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=nl(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=Yn(e);var t=me.test(e);return t||ye.test(e)?dn(e.slice(2),t?2:8):he.test(e)?s:+e}function yl(e){return Fa(e,Vl(e))}function _l(e){return null==e?"":fa(e)}var bl=Va(function(e,n){if(jo(n)||Qi(n))Fa(n,Rl(n),e);else for(var t in n)Ne.call(n,t)&&tr(e,t,n[t])}),wl=Va(function(e,n){Fa(n,Vl(n),e)}),xl=Va(function(e,n,t,r){Fa(n,Vl(n),e,r)}),kl=Va(function(e,n,t,r){Fa(n,Rl(n),e,r)}),Cl=ro(lr),jl=Hr(function(n,t){n=Se(n);var r=-1,a=t.length,o=a>2?t[2]:e;for(o&&wo(t[0],t[1],o)&&(a=1);++r<a;)for(var i=t[r],l=Vl(i),u=-1,c=l.length;++u<c;){var f=l[u],s=n[f];(s===e||Ki(s,Ve[f])&&!Ne.call(n,f))&&(n[f]=i[f])}return n}),Il=Hr(function(n){return n.push(e,eo),Sn(zl,e,n)});function Sl(n,t,r){var a=null==n?e:Cr(n,t);return a===e?r:a}function Al(e,n){return null!=e&&go(e,n,Or)}var Ol=Pa(function(e,n,t){null!=n&&"function"!=typeof n.toString&&(n=Ue.call(n)),e[n]=t},nu(au)),El=Pa(function(e,n,t){null!=n&&"function"!=typeof n.toString&&(n=Ue.call(n)),Ne.call(e,n)?e[n].push(t):e[n]=[t]},co),Fl=Hr(Fr);function Rl(e){return Qi(e)?Ht(e):Tr(e)}function Vl(e){return Qi(e)?Ht(e,!0):Lr(e)}var Dl=Va(function(e,n,t){Br(e,n,t)}),zl=Va(function(e,n,t,r){Br(e,n,t,r)}),Nl=ro(function(e,n){var t={};if(null==e)return t;var r=!1;n=zn(n,function(n){return n=ba(n,e),r||(r=n.length>1),n}),Fa(e,oo(e),t),r&&(t=cr(t,7,no));for(var a=n.length;a--;)da(t,n[a]);return t}),Tl=ro(function(e,n){return null==e?{}:function(e,n){return qr(e,n,function(n,t){return Al(e,t)})}(e,n)});function Ll(e,n){if(null==e)return{};var t=zn(oo(e),function(e){return[e]});return n=co(n),qr(e,t,function(e,t){return n(e,t[0])})}var Ul=Ha(Rl),$l=Ha(Vl);function Kl(e){return null==e?[]:et(e,Rl(e))}var Pl=Ta(function(e,n,t){return n=n.toLowerCase(),e+(t?Bl(n):n)});function Bl(e){return Hl(_l(e).toLowerCase())}function Wl(e){return(e=_l(e))&&e.replace(be,at).replace(en,"")}var Ml=Ta(function(e,n,t){return e+(t?"-":"")+n.toLowerCase()}),ql=Ta(function(e,n,t){return e+(t?" ":"")+n.toLowerCase()}),Ql=Na("toLowerCase"),Zl=Ta(function(e,n,t){return e+(t?"_":"")+n.toLowerCase()}),Gl=Ta(function(e,n,t){return e+(t?" ":"")+Hl(n)}),Jl=Ta(function(e,n,t){return e+(t?" ":"")+n.toUpperCase()}),Hl=Na("toUpperCase");function Yl(n,t,r){return n=_l(n),(t=r?e:t)===e?function(e){return an.test(e)}(n)?function(e){return e.match(tn)||[]}(n):function(e){return e.match(fe)||[]}(n):n.match(t)||[]}var Xl=Hr(function(n,t){try{return Sn(n,e,t)}catch(e){return Hi(e)?e:new Ce(e)}}),eu=ro(function(e,n){return On(n,function(n){n=Lo(n),ir(e,n,Ei(e[n],e))}),e});function nu(e){return function(){return e}}var tu=$a(),ru=$a(!0);function au(e){return e}function ou(e){return Nr("function"==typeof e?e:cr(e,1))}var iu=Hr(function(e,n){return function(t){return Fr(t,e,n)}}),lu=Hr(function(e,n){return function(t){return Fr(e,t,n)}});function uu(e,n,t){var r=Rl(n),a=kr(n,r);null!=t||nl(n)&&(a.length||!r.length)||(t=n,n=e,e=this,a=kr(n,Rl(n)));var o=!(nl(t)&&"chain"in t&&!t.chain),i=Yi(e);return On(a,function(t){var r=n[t];e[t]=r,i&&(e.prototype[t]=function(){var n=this.__chain__;if(o||n){var t=e(this.__wrapped__);return(t.__actions__=Ea(this.__actions__)).push({func:r,args:arguments,thisArg:e}),t.__chain__=n,t}return r.apply(e,Nn([this.value()],arguments))})}),e}function cu(){}var fu=Wa(zn),su=Wa(Fn),du=Wa(Un);function pu(e){return xo(e)?Qn(Lo(e)):function(e){return function(n){return Cr(n,e)}}(e)}var vu=qa(),hu=qa(!0);function mu(){return[]}function gu(){return!1}var yu,_u=Ba(function(e,n){return e+n},0),bu=Ga("ceil"),wu=Ba(function(e,n){return e/n},1),xu=Ga("floor"),ku=Ba(function(e,n){return e*n},1),Cu=Ga("round"),ju=Ba(function(e,n){return e-n},0);return Kt.after=function(e,t){if("function"!=typeof t)throw new Ee(n);return e=hl(e),function(){if(--e<1)return t.apply(this,arguments)}},Kt.ary=Ai,Kt.assign=bl,Kt.assignIn=wl,Kt.assignInWith=xl,Kt.assignWith=kl,Kt.at=Cl,Kt.before=Oi,Kt.bind=Ei,Kt.bindAll=eu,Kt.bindKey=Fi,Kt.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Mi(e)?e:[e]},Kt.chain=pi,Kt.chunk=function(n,t,r){t=(r?wo(n,t,r):t===e)?1:_t(hl(t),0);var a=null==n?0:n.length;if(!a||t<1)return[];for(var o=0,i=0,l=ie(mn(a/t));o<a;)l[i++]=aa(n,o,o+=t);return l},Kt.compact=function(e){for(var n=-1,t=null==e?0:e.length,r=0,a=[];++n<t;){var o=e[n];o&&(a[r++]=o)}return a},Kt.concat=function(){var e=arguments.length;if(!e)return[];for(var n=ie(e-1),t=arguments[0],r=e;r--;)n[r-1]=arguments[r];return Nn(Mi(t)?Ea(t):[t],yr(n,1))},Kt.cond=function(e){var t=null==e?0:e.length,r=co();return e=t?zn(e,function(e){if("function"!=typeof e[1])throw new Ee(n);return[r(e[0]),e[1]]}):[],Hr(function(n){for(var r=-1;++r<t;){var a=e[r];if(Sn(a[0],this,n))return Sn(a[1],this,n)}})},Kt.conforms=function(e){return function(e){var n=Rl(e);return function(t){return fr(t,e,n)}}(cr(e,1))},Kt.constant=nu,Kt.countBy=mi,Kt.create=function(e,n){var t=Pt(e);return null==n?t:or(t,n)},Kt.curry=function n(t,r,a){var o=Ya(t,8,e,e,e,e,e,r=a?e:r);return o.placeholder=n.placeholder,o},Kt.curryRight=function n(t,r,o){var i=Ya(t,a,e,e,e,e,e,r=o?e:r);return i.placeholder=n.placeholder,i},Kt.debounce=Ri,Kt.defaults=jl,Kt.defaultsDeep=Il,Kt.defer=Vi,Kt.delay=Di,Kt.difference=Ko,Kt.differenceBy=Po,Kt.differenceWith=Bo,Kt.drop=function(n,t,r){var a=null==n?0:n.length;return a?aa(n,(t=r||t===e?1:hl(t))<0?0:t,a):[]},Kt.dropRight=function(n,t,r){var a=null==n?0:n.length;return a?aa(n,0,(t=a-(t=r||t===e?1:hl(t)))<0?0:t):[]},Kt.dropRightWhile=function(e,n){return e&&e.length?va(e,co(n,3),!0,!0):[]},Kt.dropWhile=function(e,n){return e&&e.length?va(e,co(n,3),!0):[]},Kt.fill=function(n,t,r,a){var o=null==n?0:n.length;return o?(r&&"number"!=typeof r&&wo(n,t,r)&&(r=0,a=o),function(n,t,r,a){var o=n.length;for((r=hl(r))<0&&(r=-r>o?0:o+r),(a=a===e||a>o?o:hl(a))<0&&(a+=o),a=r>a?0:ml(a);r<a;)n[r++]=t;return n}(n,t,r,a)):[]},Kt.filter=function(e,n){return(Mi(e)?Rn:gr)(e,co(n,3))},Kt.flatMap=function(e,n){return yr(Ci(e,n),1)},Kt.flatMapDeep=function(e,n){return yr(Ci(e,n),c)},Kt.flatMapDepth=function(n,t,r){return r=r===e?1:hl(r),yr(Ci(n,t),r)},Kt.flatten=qo,Kt.flattenDeep=function(e){return null!=e&&e.length?yr(e,c):[]},Kt.flattenDepth=function(n,t){return null!=n&&n.length?yr(n,t=t===e?1:hl(t)):[]},Kt.flip=function(e){return Ya(e,512)},Kt.flow=tu,Kt.flowRight=ru,Kt.fromPairs=function(e){for(var n=-1,t=null==e?0:e.length,r={};++n<t;){var a=e[n];r[a[0]]=a[1]}return r},Kt.functions=function(e){return null==e?[]:kr(e,Rl(e))},Kt.functionsIn=function(e){return null==e?[]:kr(e,Vl(e))},Kt.groupBy=wi,Kt.initial=function(e){return null!=e&&e.length?aa(e,0,-1):[]},Kt.intersection=Zo,Kt.intersectionBy=Go,Kt.intersectionWith=Jo,Kt.invert=Ol,Kt.invertBy=El,Kt.invokeMap=xi,Kt.iteratee=ou,Kt.keyBy=ki,Kt.keys=Rl,Kt.keysIn=Vl,Kt.map=Ci,Kt.mapKeys=function(e,n){var t={};return n=co(n,3),wr(e,function(e,r,a){ir(t,n(e,r,a),e)}),t},Kt.mapValues=function(e,n){var t={};return n=co(n,3),wr(e,function(e,r,a){ir(t,r,n(e,r,a))}),t},Kt.matches=function(e){return Kr(cr(e,1))},Kt.matchesProperty=function(e,n){return Pr(e,cr(n,1))},Kt.memoize=zi,Kt.merge=Dl,Kt.mergeWith=zl,Kt.method=iu,Kt.methodOf=lu,Kt.mixin=uu,Kt.negate=Ni,Kt.nthArg=function(e){return e=hl(e),Hr(function(n){return Wr(n,e)})},Kt.omit=Nl,Kt.omitBy=function(e,n){return Ll(e,Ni(co(n)))},Kt.once=function(e){return Oi(2,e)},Kt.orderBy=function(n,t,r,a){return null==n?[]:(Mi(t)||(t=null==t?[]:[t]),Mi(r=a?e:r)||(r=null==r?[]:[r]),Mr(n,t,r))},Kt.over=fu,Kt.overArgs=Ti,Kt.overEvery=su,Kt.overSome=du,Kt.partial=Li,Kt.partialRight=Ui,Kt.partition=ji,Kt.pick=Tl,Kt.pickBy=Ll,Kt.property=pu,Kt.propertyOf=function(n){return function(t){return null==n?e:Cr(n,t)}},Kt.pull=Yo,Kt.pullAll=Xo,Kt.pullAllBy=function(e,n,t){return e&&e.length&&n&&n.length?Qr(e,n,co(t,2)):e},Kt.pullAllWith=function(n,t,r){return n&&n.length&&t&&t.length?Qr(n,t,e,r):n},Kt.pullAt=ei,Kt.range=vu,Kt.rangeRight=hu,Kt.rearg=$i,Kt.reject=function(e,n){return(Mi(e)?Rn:gr)(e,Ni(co(n,3)))},Kt.remove=function(e,n){var t=[];if(!e||!e.length)return t;var r=-1,a=[],o=e.length;for(n=co(n,3);++r<o;){var i=e[r];n(i,r,e)&&(t.push(i),a.push(r))}return Zr(e,a),t},Kt.rest=function(t,r){if("function"!=typeof t)throw new Ee(n);return Hr(t,r=r===e?r:hl(r))},Kt.reverse=ni,Kt.sampleSize=function(n,t,r){return t=(r?wo(n,t,r):t===e)?1:hl(t),(Mi(n)?Xt:Xr)(n,t)},Kt.set=function(e,n,t){return null==e?e:ea(e,n,t)},Kt.setWith=function(n,t,r,a){return a="function"==typeof a?a:e,null==n?n:ea(n,t,r,a)},Kt.shuffle=function(e){return(Mi(e)?er:ra)(e)},Kt.slice=function(n,t,r){var a=null==n?0:n.length;return a?(r&&"number"!=typeof r&&wo(n,t,r)?(t=0,r=a):(t=null==t?0:hl(t),r=r===e?a:hl(r)),aa(n,t,r)):[]},Kt.sortBy=Ii,Kt.sortedUniq=function(e){return e&&e.length?ua(e):[]},Kt.sortedUniqBy=function(e,n){return e&&e.length?ua(e,co(n,2)):[]},Kt.split=function(n,t,r){return r&&"number"!=typeof r&&wo(n,t,r)&&(t=r=e),(r=r===e?d:r>>>0)?(n=_l(n))&&("string"==typeof t||null!=t&&!il(t))&&!(t=fa(t))&&lt(n)?xa(vt(n),0,r):n.split(t,r):[]},Kt.spread=function(e,t){if("function"!=typeof e)throw new Ee(n);return t=null==t?0:_t(hl(t),0),Hr(function(n){var r=n[t],a=xa(n,0,t);return r&&Nn(a,r),Sn(e,this,a)})},Kt.tail=function(e){var n=null==e?0:e.length;return n?aa(e,1,n):[]},Kt.take=function(n,t,r){return n&&n.length?aa(n,0,(t=r||t===e?1:hl(t))<0?0:t):[]},Kt.takeRight=function(n,t,r){var a=null==n?0:n.length;return a?aa(n,(t=a-(t=r||t===e?1:hl(t)))<0?0:t,a):[]},Kt.takeRightWhile=function(e,n){return e&&e.length?va(e,co(n,3),!1,!0):[]},Kt.takeWhile=function(e,n){return e&&e.length?va(e,co(n,3)):[]},Kt.tap=function(e,n){return n(e),e},Kt.throttle=function(e,t,r){var a=!0,o=!0;if("function"!=typeof e)throw new Ee(n);return nl(r)&&(a="leading"in r?!!r.leading:a,o="trailing"in r?!!r.trailing:o),Ri(e,t,{leading:a,maxWait:t,trailing:o})},Kt.thru=vi,Kt.toArray=pl,Kt.toPairs=Ul,Kt.toPairsIn=$l,Kt.toPath=function(e){return Mi(e)?zn(e,Lo):cl(e)?[e]:Ea(To(_l(e)))},Kt.toPlainObject=yl,Kt.transform=function(e,n,t){var r=Mi(e),a=r||Gi(e)||fl(e);if(n=co(n,4),null==t){var o=e&&e.constructor;t=a?r?new o:[]:nl(e)&&Yi(o)?Pt(Qe(e)):{}}return(a?On:wr)(e,function(e,r,a){return n(t,e,r,a)}),t},Kt.unary=function(e){return Ai(e,1)},Kt.union=ti,Kt.unionBy=ri,Kt.unionWith=ai,Kt.uniq=function(e){return e&&e.length?sa(e):[]},Kt.uniqBy=function(e,n){return e&&e.length?sa(e,co(n,2)):[]},Kt.uniqWith=function(n,t){return t="function"==typeof t?t:e,n&&n.length?sa(n,e,t):[]},Kt.unset=function(e,n){return null==e||da(e,n)},Kt.unzip=oi,Kt.unzipWith=ii,Kt.update=function(e,n,t){return null==e?e:pa(e,n,_a(t))},Kt.updateWith=function(n,t,r,a){return a="function"==typeof a?a:e,null==n?n:pa(n,t,_a(r),a)},Kt.values=Kl,Kt.valuesIn=function(e){return null==e?[]:et(e,Vl(e))},Kt.without=li,Kt.words=Yl,Kt.wrap=function(e,n){return Li(_a(n),e)},Kt.xor=ui,Kt.xorBy=ci,Kt.xorWith=fi,Kt.zip=si,Kt.zipObject=function(e,n){return ga(e||[],n||[],tr)},Kt.zipObjectDeep=function(e,n){return ga(e||[],n||[],ea)},Kt.zipWith=di,Kt.entries=Ul,Kt.entriesIn=$l,Kt.extend=wl,Kt.extendWith=xl,uu(Kt,Kt),Kt.add=_u,Kt.attempt=Xl,Kt.camelCase=Pl,Kt.capitalize=Bl,Kt.ceil=bu,Kt.clamp=function(n,t,r){return r===e&&(r=t,t=e),r!==e&&(r=(r=gl(r))==r?r:0),t!==e&&(t=(t=gl(t))==t?t:0),ur(gl(n),t,r)},Kt.clone=function(e){return cr(e,4)},Kt.cloneDeep=function(e){return cr(e,5)},Kt.cloneDeepWith=function(n,t){return cr(n,5,t="function"==typeof t?t:e)},Kt.cloneWith=function(n,t){return cr(n,4,t="function"==typeof t?t:e)},Kt.conformsTo=function(e,n){return null==n||fr(e,n,Rl(n))},Kt.deburr=Wl,Kt.defaultTo=function(e,n){return null==e||e!=e?n:e},Kt.divide=wu,Kt.endsWith=function(n,t,r){n=_l(n),t=fa(t);var a=n.length,o=r=r===e?a:ur(hl(r),0,a);return(r-=t.length)>=0&&n.slice(r,o)==t},Kt.eq=Ki,Kt.escape=function(e){return(e=_l(e))&&Q.test(e)?e.replace(M,ot):e},Kt.escapeRegExp=function(e){return(e=_l(e))&&ae.test(e)?e.replace(re,"\\$&"):e},Kt.every=function(n,t,r){var a=Mi(n)?Fn:hr;return r&&wo(n,t,r)&&(t=e),a(n,co(t,3))},Kt.find=gi,Kt.findIndex=Wo,Kt.findKey=function(e,n){return Kn(e,co(n,3),wr)},Kt.findLast=yi,Kt.findLastIndex=Mo,Kt.findLastKey=function(e,n){return Kn(e,co(n,3),xr)},Kt.floor=xu,Kt.forEach=_i,Kt.forEachRight=bi,Kt.forIn=function(e,n){return null==e?e:_r(e,co(n,3),Vl)},Kt.forInRight=function(e,n){return null==e?e:br(e,co(n,3),Vl)},Kt.forOwn=function(e,n){return e&&wr(e,co(n,3))},Kt.forOwnRight=function(e,n){return e&&xr(e,co(n,3))},Kt.get=Sl,Kt.gt=Pi,Kt.gte=Bi,Kt.has=function(e,n){return null!=e&&go(e,n,Ar)},Kt.hasIn=Al,Kt.head=Qo,Kt.identity=au,Kt.includes=function(e,n,t,r){e=Qi(e)?e:Kl(e),t=t&&!r?hl(t):0;var a=e.length;return t<0&&(t=_t(a+t,0)),ul(e)?t<=a&&e.indexOf(n,t)>-1:!!a&&Bn(e,n,t)>-1},Kt.indexOf=function(e,n,t){var r=null==e?0:e.length;if(!r)return-1;var a=null==t?0:hl(t);return a<0&&(a=_t(r+a,0)),Bn(e,n,a)},Kt.inRange=function(n,t,r){return t=vl(t),r===e?(r=t,t=0):r=vl(r),function(e,n,t){return e>=bt(n,t)&&e<_t(n,t)}(n=gl(n),t,r)},Kt.invoke=Fl,Kt.isArguments=Wi,Kt.isArray=Mi,Kt.isArrayBuffer=qi,Kt.isArrayLike=Qi,Kt.isArrayLikeObject=Zi,Kt.isBoolean=function(e){return!0===e||!1===e||tl(e)&&Ir(e)==m},Kt.isBuffer=Gi,Kt.isDate=Ji,Kt.isElement=function(e){return tl(e)&&1===e.nodeType&&!ol(e)},Kt.isEmpty=function(e){if(null==e)return!0;if(Qi(e)&&(Mi(e)||"string"==typeof e||"function"==typeof e.splice||Gi(e)||fl(e)||Wi(e)))return!e.length;var n=mo(e);if(n==w||n==I)return!e.size;if(jo(e))return!Tr(e).length;for(var t in e)if(Ne.call(e,t))return!1;return!0},Kt.isEqual=function(e,n){return Vr(e,n)},Kt.isEqualWith=function(n,t,r){var a=(r="function"==typeof r?r:e)?r(n,t):e;return a===e?Vr(n,t,e,r):!!a},Kt.isError=Hi,Kt.isFinite=function(e){return"number"==typeof e&&$n(e)},Kt.isFunction=Yi,Kt.isInteger=Xi,Kt.isLength=el,Kt.isMap=rl,Kt.isMatch=function(e,n){return e===n||Dr(e,n,so(n))},Kt.isMatchWith=function(n,t,r){return r="function"==typeof r?r:e,Dr(n,t,so(t),r)},Kt.isNaN=function(e){return al(e)&&e!=+e},Kt.isNative=function(e){if(Co(e))throw new Ce("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return zr(e)},Kt.isNil=function(e){return null==e},Kt.isNull=function(e){return null===e},Kt.isNumber=al,Kt.isObject=nl,Kt.isObjectLike=tl,Kt.isPlainObject=ol,Kt.isRegExp=il,Kt.isSafeInteger=function(e){return Xi(e)&&e>=-9007199254740991&&e<=f},Kt.isSet=ll,Kt.isString=ul,Kt.isSymbol=cl,Kt.isTypedArray=fl,Kt.isUndefined=function(n){return n===e},Kt.isWeakMap=function(e){return tl(e)&&mo(e)==O},Kt.isWeakSet=function(e){return tl(e)&&"[object WeakSet]"==Ir(e)},Kt.join=function(e,n){return null==e?"":Zn.call(e,n)},Kt.kebabCase=Ml,Kt.last=Ho,Kt.lastIndexOf=function(n,t,r){var a=null==n?0:n.length;if(!a)return-1;var o=a;return r!==e&&(o=(o=hl(r))<0?_t(a+o,0):bt(o,a-1)),t==t?function(e,n,t){for(var r=t+1;r--;)if(e[r]===n)return r;return r}(n,t,o):Pn(n,Mn,o,!0)},Kt.lowerCase=ql,Kt.lowerFirst=Ql,Kt.lt=sl,Kt.lte=dl,Kt.max=function(n){return n&&n.length?mr(n,au,Sr):e},Kt.maxBy=function(n,t){return n&&n.length?mr(n,co(t,2),Sr):e},Kt.mean=function(e){return qn(e,au)},Kt.meanBy=function(e,n){return qn(e,co(n,2))},Kt.min=function(n){return n&&n.length?mr(n,au,Ur):e},Kt.minBy=function(n,t){return n&&n.length?mr(n,co(t,2),Ur):e},Kt.stubArray=mu,Kt.stubFalse=gu,Kt.stubObject=function(){return{}},Kt.stubString=function(){return""},Kt.stubTrue=function(){return!0},Kt.multiply=ku,Kt.nth=function(n,t){return n&&n.length?Wr(n,hl(t)):e},Kt.noConflict=function(){return hn._===this&&(hn._=Ke),this},Kt.noop=cu,Kt.now=Si,Kt.pad=function(e,n,t){e=_l(e);var r=(n=hl(n))?pt(e):0;if(!n||r>=n)return e;var a=(n-r)/2;return Ma(gn(a),t)+e+Ma(mn(a),t)},Kt.padEnd=function(e,n,t){e=_l(e);var r=(n=hl(n))?pt(e):0;return n&&r<n?e+Ma(n-r,t):e},Kt.padStart=function(e,n,t){e=_l(e);var r=(n=hl(n))?pt(e):0;return n&&r<n?Ma(n-r,t)+e:e},Kt.parseInt=function(e,n,t){return t||null==n?n=0:n&&(n=+n),xt(_l(e).replace(oe,""),n||0)},Kt.random=function(n,t,r){if(r&&"boolean"!=typeof r&&wo(n,t,r)&&(t=r=e),r===e&&("boolean"==typeof t?(r=t,t=e):"boolean"==typeof n&&(r=n,n=e)),n===e&&t===e?(n=0,t=1):(n=vl(n),t===e?(t=n,n=0):t=vl(t)),n>t){var a=n;n=t,t=a}if(r||n%1||t%1){var o=kt();return bt(n+o*(t-n+sn("1e-"+((o+"").length-1))),t)}return Gr(n,t)},Kt.reduce=function(e,n,t){var r=Mi(e)?Tn:Gn,a=arguments.length<3;return r(e,co(n,4),t,a,pr)},Kt.reduceRight=function(e,n,t){var r=Mi(e)?Ln:Gn,a=arguments.length<3;return r(e,co(n,4),t,a,vr)},Kt.repeat=function(n,t,r){return t=(r?wo(n,t,r):t===e)?1:hl(t),Jr(_l(n),t)},Kt.replace=function(){var e=arguments,n=_l(e[0]);return e.length<3?n:n.replace(e[1],e[2])},Kt.result=function(n,t,r){var a=-1,o=(t=ba(t,n)).length;for(o||(o=1,n=e);++a<o;){var i=null==n?e:n[Lo(t[a])];i===e&&(a=o,i=r),n=Yi(i)?i.call(n):i}return n},Kt.round=Cu,Kt.runInContext=J,Kt.sample=function(e){return(Mi(e)?Yt:Yr)(e)},Kt.size=function(e){if(null==e)return 0;if(Qi(e))return ul(e)?pt(e):e.length;var n=mo(e);return n==w||n==I?e.size:Tr(e).length},Kt.snakeCase=Zl,Kt.some=function(n,t,r){var a=Mi(n)?Un:oa;return r&&wo(n,t,r)&&(t=e),a(n,co(t,3))},Kt.sortedIndex=function(e,n){return ia(e,n)},Kt.sortedIndexBy=function(e,n,t){return la(e,n,co(t,2))},Kt.sortedIndexOf=function(e,n){var t=null==e?0:e.length;if(t){var r=ia(e,n);if(r<t&&Ki(e[r],n))return r}return-1},Kt.sortedLastIndex=function(e,n){return ia(e,n,!0)},Kt.sortedLastIndexBy=function(e,n,t){return la(e,n,co(t,2),!0)},Kt.sortedLastIndexOf=function(e,n){if(null!=e&&e.length){var t=ia(e,n,!0)-1;if(Ki(e[t],n))return t}return-1},Kt.startCase=Gl,Kt.startsWith=function(e,n,t){return e=_l(e),t=null==t?0:ur(hl(t),0,e.length),n=fa(n),e.slice(t,t+n.length)==n},Kt.subtract=ju,Kt.sum=function(e){return e&&e.length?Jn(e,au):0},Kt.sumBy=function(e,n){return e&&e.length?Jn(e,co(n,2)):0},Kt.template=function(n,t,r){var a=Kt.templateSettings;r&&wo(n,t,r)&&(t=e),n=_l(n),t=xl({},t,a,Xa);var o,i,l=xl({},t.imports,a.imports,Xa),u=Rl(l),c=et(l,u),f=0,s=t.interpolate||we,d="__p += '",p=Ae((t.escape||we).source+"|"+s.source+"|"+(s===Y?pe:we).source+"|"+(t.evaluate||we).source+"|$","g"),v="//# sourceURL="+(Ne.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ln+"]")+"\n";n.replace(p,function(e,t,r,a,l,u){return r||(r=a),d+=n.slice(f,u).replace(xe,it),t&&(o=!0,d+="' +\n__e("+t+") +\n'"),l&&(i=!0,d+="';\n"+l+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),f=u+e.length,e}),d+="';\n";var h=Ne.call(t,"variable")&&t.variable;if(h){if(se.test(h))throw new Ce("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(i?d.replace(K,""):d).replace(P,"$1").replace(B,"$1;"),d="function("+(h||"obj")+") {\n"+(h?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=Xl(function(){return je(u,v+"return "+d).apply(e,c)});if(m.source=d,Hi(m))throw m;return m},Kt.times=function(e,n){if((e=hl(e))<1||e>f)return[];var t=d,r=bt(e,d);n=co(n),e-=d;for(var a=Hn(r,n);++t<e;)n(t);return a},Kt.toFinite=vl,Kt.toInteger=hl,Kt.toLength=ml,Kt.toLower=function(e){return _l(e).toLowerCase()},Kt.toNumber=gl,Kt.toSafeInteger=function(e){return e?ur(hl(e),-9007199254740991,f):0===e?e:0},Kt.toString=_l,Kt.toUpper=function(e){return _l(e).toUpperCase()},Kt.trim=function(n,t,r){if((n=_l(n))&&(r||t===e))return Yn(n);if(!n||!(t=fa(t)))return n;var a=vt(n),o=vt(t);return xa(a,tt(a,o),rt(a,o)+1).join("")},Kt.trimEnd=function(n,t,r){if((n=_l(n))&&(r||t===e))return n.slice(0,ht(n)+1);if(!n||!(t=fa(t)))return n;var a=vt(n);return xa(a,0,rt(a,vt(t))+1).join("")},Kt.trimStart=function(n,t,r){if((n=_l(n))&&(r||t===e))return n.replace(oe,"");if(!n||!(t=fa(t)))return n;var a=vt(n);return xa(a,tt(a,vt(t))).join("")},Kt.truncate=function(n,t){var r=30,a="...";if(nl(t)){var o="separator"in t?t.separator:o;r="length"in t?hl(t.length):r,a="omission"in t?fa(t.omission):a}var i=(n=_l(n)).length;if(lt(n)){var l=vt(n);i=l.length}if(r>=i)return n;var u=r-pt(a);if(u<1)return a;var c=l?xa(l,0,u).join(""):n.slice(0,u);if(o===e)return c+a;if(l&&(u+=c.length-u),il(o)){if(n.slice(u).search(o)){var f,s=c;for(o.global||(o=Ae(o.source,_l(ve.exec(o))+"g")),o.lastIndex=0;f=o.exec(s);)var d=f.index;c=c.slice(0,d===e?u:d)}}else if(n.indexOf(fa(o),u)!=u){var p=c.lastIndexOf(o);p>-1&&(c=c.slice(0,p))}return c+a},Kt.unescape=function(e){return(e=_l(e))&&q.test(e)?e.replace(W,mt):e},Kt.uniqueId=function(e){var n=++Te;return _l(e)+n},Kt.upperCase=Jl,Kt.upperFirst=Hl,Kt.each=_i,Kt.eachRight=bi,Kt.first=Qo,uu(Kt,(yu={},wr(Kt,function(e,n){Ne.call(Kt.prototype,n)||(yu[n]=e)}),yu),{chain:!1}),Kt.VERSION="4.17.21",On(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){Kt[e].placeholder=Kt}),On(["drop","take"],function(n,t){Mt.prototype[n]=function(r){r=r===e?1:_t(hl(r),0);var a=this.__filtered__&&!t?new Mt(this):this.clone();return a.__filtered__?a.__takeCount__=bt(r,a.__takeCount__):a.__views__.push({size:bt(r,d),type:n+(a.__dir__<0?"Right":"")}),a},Mt.prototype[n+"Right"]=function(e){return this.reverse()[n](e).reverse()}}),On(["filter","map","takeWhile"],function(e,n){var t=n+1,r=1==t||3==t;Mt.prototype[e]=function(e){var n=this.clone();return n.__iteratees__.push({iteratee:co(e,3),type:t}),n.__filtered__=n.__filtered__||r,n}}),On(["head","last"],function(e,n){var t="take"+(n?"Right":"");Mt.prototype[e]=function(){return this[t](1).value()[0]}}),On(["initial","tail"],function(e,n){var t="drop"+(n?"":"Right");Mt.prototype[e]=function(){return this.__filtered__?new Mt(this):this[t](1)}}),Mt.prototype.compact=function(){return this.filter(au)},Mt.prototype.find=function(e){return this.filter(e).head()},Mt.prototype.findLast=function(e){return this.reverse().find(e)},Mt.prototype.invokeMap=Hr(function(e,n){return"function"==typeof e?new Mt(this):this.map(function(t){return Fr(t,e,n)})}),Mt.prototype.reject=function(e){return this.filter(Ni(co(e)))},Mt.prototype.slice=function(n,t){n=hl(n);var r=this;return r.__filtered__&&(n>0||t<0)?new Mt(r):(n<0?r=r.takeRight(-n):n&&(r=r.drop(n)),t!==e&&(r=(t=hl(t))<0?r.dropRight(-t):r.take(t-n)),r)},Mt.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Mt.prototype.toArray=function(){return this.take(d)},wr(Mt.prototype,function(n,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),a=/^(?:head|last)$/.test(t),o=Kt[a?"take"+("last"==t?"Right":""):t],i=a||/^find/.test(t);o&&(Kt.prototype[t]=function(){var t=this.__wrapped__,l=a?[1]:arguments,u=t instanceof Mt,c=l[0],f=u||Mi(t),s=function(e){var n=o.apply(Kt,Nn([e],l));return a&&d?n[0]:n};f&&r&&"function"==typeof c&&1!=c.length&&(u=f=!1);var d=this.__chain__,p=!!this.__actions__.length,v=i&&!d,h=u&&!p;if(!i&&f){t=h?t:new Mt(this);var m=n.apply(t,l);return m.__actions__.push({func:vi,args:[s],thisArg:e}),new Wt(m,d)}return v&&h?n.apply(this,l):(m=this.thru(s),v?a?m.value()[0]:m.value():m)})}),On(["pop","push","shift","sort","splice","unshift"],function(e){var n=Fe[e],t=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Kt.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var a=this.value();return n.apply(Mi(a)?a:[],e)}return this[t](function(t){return n.apply(Mi(t)?t:[],e)})}}),wr(Mt.prototype,function(e,n){var t=Kt[n];if(t){var r=t.name+"";Ne.call(Rt,r)||(Rt[r]=[]),Rt[r].push({name:n,func:t})}}),Rt[Ka(e,2).name]=[{name:"wrapper",func:e}],Mt.prototype.clone=function(){var e=new Mt(this.__wrapped__);return e.__actions__=Ea(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ea(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ea(this.__views__),e},Mt.prototype.reverse=function(){if(this.__filtered__){var e=new Mt(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Mt.prototype.value=function(){var e=this.__wrapped__.value(),n=this.__dir__,t=Mi(e),r=n<0,a=t?e.length:0,o=function(e,n,t){for(var r=-1,a=t.length;++r<a;){var o=t[r],i=o.size;switch(o.type){case"drop":e+=i;break;case"dropRight":n-=i;break;case"take":n=bt(n,e+i);break;case"takeRight":e=_t(e,n-i)}}return{start:e,end:n}}(0,a,this.__views__),i=o.start,l=o.end,u=l-i,c=r?l:i-1,f=this.__iteratees__,s=f.length,d=0,p=bt(u,this.__takeCount__);if(!t||!r&&a==u&&p==u)return ha(e,this.__actions__);var v=[];e:for(;u--&&d<p;){for(var h=-1,m=e[c+=n];++h<s;){var g=f[h],y=g.iteratee,_=g.type,b=y(m);if(2==_)m=b;else if(!b){if(1==_)continue e;break e}}v[d++]=m}return v},Kt.prototype.at=hi,Kt.prototype.chain=function(){return pi(this)},Kt.prototype.commit=function(){return new Wt(this.value(),this.__chain__)},Kt.prototype.next=function(){this.__values__===e&&(this.__values__=pl(this.value()));var n=this.__index__>=this.__values__.length;return{done:n,value:n?e:this.__values__[this.__index__++]}},Kt.prototype.plant=function(n){for(var t,r=this;r instanceof Bt;){var a=$o(r);a.__index__=0,a.__values__=e,t?o.__wrapped__=a:t=a;var o=a;r=r.__wrapped__}return o.__wrapped__=n,t},Kt.prototype.reverse=function(){var n=this.__wrapped__;if(n instanceof Mt){var t=n;return this.__actions__.length&&(t=new Mt(this)),(t=t.reverse()).__actions__.push({func:vi,args:[ni],thisArg:e}),new Wt(t,this.__chain__)}return this.thru(ni)},Kt.prototype.toJSON=Kt.prototype.valueOf=Kt.prototype.value=function(){return ha(this.__wrapped__,this.__actions__)},Kt.prototype.first=Kt.prototype.head,Ye&&(Kt.prototype[Ye]=function(){return this}),Kt}();gn?((gn.exports=gt)._=gt,mn._=gt):hn._=gt}.call(X);var ne=ee.exports;O("\n.m2o-dropdown[data-v-c534bf5f] {\n  position: relative;\n  width: 100%;\n}\n.dropdown-toggle[data-v-c534bf5f] {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 10px 12px;\n  background-color: var(--theme--background);\n  border: var(--theme--border-width) solid\n  var(--theme--form--field--input--border-color);\n  border-radius: var(--theme--border-radius);\n  cursor: pointer;\n  transition: all var(--fast) var(--transition);\n  min-height: 44px;\n}\n.dropdown-toggle[data-v-c534bf5f]:hover:not(.disabled) {\n  border-color: var(--theme--form--field--input--border-color-hover);\n}\n.dropdown-toggle.open[data-v-c534bf5f] {\n  border-color: var(--theme--primary);\n}\n.dropdown-toggle.disabled[data-v-c534bf5f] {\n  cursor: not-allowed;\n  opacity: 0.5;\n}\n.selected-value[data-v-c534bf5f] {\n  flex: 1;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.toggle-icons[data-v-c534bf5f] {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  flex-shrink: 0;\n}\n.placeholder[data-v-c534bf5f] {\n  color: var(--theme--foreground-subdued);\n}\n.dropdown-content[data-v-c534bf5f] {\n  position: absolute;\n  top: calc(100% + 4px);\n  left: 0;\n  right: 0;\n  background-color: var(--theme--background);\n  border: var(--theme--border-width) solid\n  var(--theme--form--field--input--border-color);\n  border-radius: var(--theme--border-radius);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n  z-index: 100;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  padding: 8px;\n  max-height: 400px;\n}\n.loading-container[data-v-c534bf5f] {\n  display: flex;\n  justify-content: center;\n  padding: 20px;\n}\n.items-list[data-v-c534bf5f] {\n  max-height: 300px;\n  overflow-y: auto;\n  border: var(--theme--border-width) solid\n  var(--theme--form--field--input--border-color);\n  border-radius: var(--theme--border-radius);\n}\n.item[data-v-c534bf5f] {\n  padding: 10px 12px;\n  cursor: pointer;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  transition: background-color var(--fast) var(--transition);\n  border-bottom: var(--theme--border-width) solid\n  var(--theme--form--field--input--border-color);\n}\n.item[data-v-c534bf5f]:last-child {\n  border-bottom: none;\n}\n.item[data-v-c534bf5f]:hover {\n  background-color: var(--theme--background-subdued);\n}\n.item.selected[data-v-c534bf5f] {\n  background-color: var(--theme--primary-background);\n  color: var(--theme--primary);\n}\n.check-icon[data-v-c534bf5f] {\n  color: var(--theme--primary);\n}\n.no-results[data-v-c534bf5f] {\n  padding: 20px;\n  text-align: center;\n  color: var(--theme--foreground-subdued);\n}\n.add-new[data-v-c534bf5f] {\n  width: 100%;\n}\n.drawer-content[data-v-c534bf5f] {\n  padding: var(--content-padding);\n  padding-top: 0;\n  padding-bottom: var(--content-padding-bottom);\n}\n",{});const te=b({props:{value:{type:[String,Number],default:null},collection:{type:String,required:!0},field:{type:String,required:!0},primaryKey:{type:[String,Number],required:!0},disabled:{type:Boolean,default:!1},template:{type:String,default:null},enableCreate:{type:Boolean,default:!1},filter:{type:Object,default:null}},emits:["input"],setup(t,{emit:a}){const{t:o}=I(),i=e(),{useRelationsStore:u,useFieldsStore:c}=n(),f=u(),s=c(),d=r([]),p=r(!1),v=r(""),h=r(!1),m=r({}),g=r(!1),y=r(!1),_=r(null),b=w(()=>f.getRelationsForField(t.collection,t.field).find(e=>e.collection===t.collection&&e.field===t.field)),x=w(()=>b.value?.related_collection),k=w(()=>x.value?s.getPrimaryKeyFieldForCollection(x.value):null),C=w(()=>{if(!x.value)return null;const e=s.getPrimaryKeyFieldForCollection(x.value);return e?.field||"id"}),j=w(()=>t.template?t.template:C.value?`{{ ${C.value} }}`:"{{ id }}"),S=w(()=>t.value),A=()=>{y.value=!1,v.value=""},O=async(e="")=>{if(x.value){p.value=!0;try{const n={limit:100,fields:["*"]};if(e){const t=s.getFieldsForCollection(x.value).filter(e=>["string","text"].includes(e.type)&&!e.meta?.hidden).map(e=>e.field);t.length>0&&(n.filter={_or:t.map(n=>({[n]:{_contains:e}}))})}t.filter&&(n.filter=n.filter?{_and:[n.filter,t.filter]}:t.filter);const r=await i.get(`/items/${x.value}`,{params:n});d.value=r.data.data||[]}catch(e){console.error("Error fetching items:",e),d.value=[]}finally{p.value=!1}}},E=ne.debounce(e=>{O(e)},300);return l(()=>t.value,async e=>{if(!e)return void(_.value=null);if(!x.value||!C.value)return;const n=d.value.find(n=>n[C.value]===e);n?_.value=n:await(async()=>{if(t.value&&x.value&&C.value)try{const e=await i.get(`/items/${x.value}/${t.value}`,{params:{fields:["*"]}});e.data.data&&(_.value=e.data.data)}catch(e){console.error("Error fetching selected item:",e)}})()},{immediate:!0}),{t:o,relationInfo:b,items:d,loading:p,selectedItem:S,selectedItemData:_,searchQuery:v,onSearchInput:E,clearSearch:()=>{v.value="",O()},selectItem:e=>{if(t.disabled)return;const n=e[C.value];_.value=e,console.log("SELL",_.value,n);let r=n;if(null!=n){const e=s.getField(t.collection,t.field);["integer","bigInteger"].includes(e?.type)&&"string"==typeof n?r=parseInt(n,10):"uuid"===e?.type&&"number"==typeof n&&(r=n.toString())}A(),console.log("Emitting value:",r,"type:",typeof r),console.log("Field schema type:",s.getField(t.collection,t.field)?.type),console.log("Related PK field name:",C.value),a("input",r)},displayTemplate:j,relatedCollection:x,relatedPrimaryKey:k,createNew:()=>{m.value={},h.value=!0},drawerOpen:h,newItem:m,saving:g,saveNewItem:async()=>{g.value=!0;try{const e=(await i.post(`/items/${x.value}`,m.value)).data.data;if(d.value.unshift(e),C.value){let n=e[C.value];const r=s.getField(t.collection,t.field);["integer","bigInteger"].includes(r?.type)&&"string"==typeof n?n=parseInt(n,10):"uuid"===r?.type&&"number"==typeof n&&(n=n.toString()),_.value=e,a("input",n)}h.value=!1,m.value={},A()}catch(e){console.error("Error saving new item:",e)}finally{g.value=!1}},dropdownOpen:y,toggleDropdown:()=>{t.disabled||(y.value=!y.value,y.value&&O())},closeDropdown:A,clearSelection:()=>{_.value=null,console.log("Emitting value:",valueToEmit,"type:",typeof valueToEmit),console.log("Field schema type:",s.getField(t.collection,t.field)?.type),console.log("Related PK field name:",C.value),a("input",null)}}}}),re={key:1,class:"m2o-dropdown"},ae={class:"selected-value"},oe={key:1,class:"placeholder"},ie={class:"toggle-icons"},le={key:0,class:"dropdown-content"},ue={key:0,class:"loading-container"},ce={key:1,class:"items-list"},fe=["onClick"],se={key:2,class:"no-results"},de={class:"drawer-content"};var pe=t({id:"m2o-dropdown",name:"M2O Dropdown",description:"Searchable dropdown for Many-to-One relationships",icon:"arrow_drop_down",component:E(te,[["render",function(e,n,t,r,a,o){const i=u("v-notice"),l=u("render-template"),b=u("v-icon"),w=u("v-input"),I=u("v-progress-circular"),S=u("v-button"),A=u("v-form"),O=u("v-drawer"),E=x("click-outside");return e.relationInfo?k((c(),f("div",re,[h("div",{class:C(["dropdown-toggle",{disabled:e.disabled,open:e.dropdownOpen}]),onClick:n[0]||(n[0]=(...n)=>e.toggleDropdown&&e.toggleDropdown(...n))},[h("div",ae,[e.selectedItemData?(c(),g(l,{key:0,collection:e.relatedCollection,item:e.selectedItemData,template:e.displayTemplate},null,8,["collection","item","template"])):(c(),f("span",oe,y(e.t("select_an_item")),1))]),h("div",ie,[e.selectedItemData&&!e.disabled?(c(),g(b,{key:0,name:"close",small:"",clickable:"",onClick:j(e.clearSelection,["stop"])},null,8,["onClick"])):p("v-if",!0),v(b,{name:e.dropdownOpen?"expand_less":"expand_more"},null,8,["name"])])],2),e.dropdownOpen?(c(),f("div",le,[v(w,{modelValue:e.searchQuery,"onUpdate:modelValue":[n[1]||(n[1]=n=>e.searchQuery=n),e.onSearchInput],placeholder:e.t("search_items"),onClick:n[2]||(n[2]=j(()=>{},["stop"]))},{prepend:m(()=>[v(b,{name:"search"})]),append:m(()=>[e.searchQuery?(c(),g(b,{key:0,name:"close",clickable:"",onClick:e.clearSearch},null,8,["onClick"])):p("v-if",!0)]),_:1},8,["modelValue","placeholder","onUpdate:modelValue"]),e.loading?(c(),f("div",ue,[v(I,{indeterminate:""})])):e.items.length>0?(c(),f("div",ce,[(c(!0),f(s,null,d(e.items,n=>(c(),f("div",{key:n[e.relatedPrimaryKey],class:C(["item",{selected:e.selectedItem===n[e.relatedPrimaryKey]}]),onClick:t=>e.selectItem(n)},[v(l,{collection:e.relatedCollection,item:n,template:e.displayTemplate},null,8,["collection","item","template"]),e.selectedItem===n[e.relatedPrimaryKey]?(c(),g(b,{key:0,name:"check",class:"check-icon"})):p("v-if",!0)],10,fe))),128))])):e.searchQuery?(c(),f("div",se,y(e.t("no_items_found")),1)):p("v-if",!0),e.enableCreate?(c(),g(S,{key:3,small:"",class:"add-new",onClick:j(e.createNew,["stop"])},{default:m(()=>[v(b,{name:"add",small:""}),_(" "+y(e.t("create_new")),1)]),_:1},8,["onClick"])):p("v-if",!0)])):p("v-if",!0),v(O,{modelValue:e.drawerOpen,"onUpdate:modelValue":n[5]||(n[5]=n=>e.drawerOpen=n),title:e.t("create_item"),persistent:"",onCancel:n[6]||(n[6]=n=>e.drawerOpen=!1)},{actions:m(()=>[v(S,{secondary:"",onClick:n[3]||(n[3]=n=>e.drawerOpen=!1)},{default:m(()=>[_(y(e.t("cancel")),1)]),_:1}),v(S,{loading:e.saving,onClick:e.saveNewItem},{default:m(()=>[_(y(e.t("save")),1)]),_:1},8,["loading","onClick"])]),default:m(()=>[h("div",de,[v(A,{modelValue:e.newItem,"onUpdate:modelValue":n[4]||(n[4]=n=>e.newItem=n),collection:e.relatedCollection,"primary-key":"+",loading:!1,disabled:!1},null,8,["modelValue","collection"])])]),_:1},8,["modelValue","title"])])),[[E,e.closeDropdown]]):(c(),g(i,{key:0,type:"warning"},{default:m(()=>[_(y(e.t("relationship_not_setup")),1)]),_:1}))}],["__scopeId","data-v-c534bf5f"],["__file","interface.vue"]]),types:["string","uuid","integer"],localTypes:["m2o"],group:"relational",options:({relations:e})=>{const n=e.m2o;return[{field:"template",name:"$t:display_template",meta:{interface:"system-display-template",options:{collectionName:n?.related_collection},width:"full"}},{field:"enableCreate",name:"Enable Create",type:"boolean",meta:{interface:"boolean",options:{label:"Allow creating new items"},width:"half"},schema:{default_value:!1}},{field:"filter",name:"$t:filter",type:"json",meta:{interface:"system-filter",options:{collectionName:n?.related_collection},width:"full"}}]},recommendedDisplays:["related-value"]});O("\n.m2m-dropdown[data-v-f64c38d2] {\n    display: flex;\n    flex-direction: column;\n    gap: 12px;\n}\n.selected-items[data-v-f64c38d2] {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 8px;\n    padding: 8px;\n    background-color: var(--theme--background-subdued);\n    border-radius: var(--theme--border-radius);\n    min-height: 40px;\n}\n.loading-container[data-v-f64c38d2] {\n    display: flex;\n    justify-content: center;\n    padding: 20px;\n}\n.items-list[data-v-f64c38d2] {\n    max-height: 300px;\n    overflow-y: auto;\n    border: var(--theme--border-width) solid\n        var(--theme--form--field--input--border-color);\n    border-radius: var(--theme--border-radius);\n}\n.item[data-v-f64c38d2] {\n    padding: 8px 12px;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    gap: 12px;\n    transition: background-color var(--fast) var(--transition);\n    border-bottom: var(--theme--border-width) solid\n        var(--theme--form--field--input--border-color);\n}\n.item[data-v-f64c38d2]:last-child {\n    border-bottom: none;\n}\n.item[data-v-f64c38d2]:hover {\n    background-color: var(--theme--background-subdued);\n}\n.item.selected[data-v-f64c38d2] {\n    background-color: var(--theme--primary-background);\n}\n.item-content[data-v-f64c38d2] {\n    flex: 1;\n}\n.no-results[data-v-f64c38d2] {\n    padding: 20px;\n    text-align: center;\n    color: var(--theme--foreground-subdued);\n}\n.add-new[data-v-f64c38d2] {\n    align-self: flex-start;\n}\n.drawer-content[data-v-f64c38d2] {\n    padding: var(--content-padding);\n    padding-top: 0;\n    padding-bottom: var(--content-padding-bottom);\n}\n[data-v-f64c38d2] .v-chip {\n    cursor: pointer;\n}\n",{});const ve=b({props:{value:{type:Array,default:()=>[]},collection:{type:String,required:!0},field:{type:String,required:!0},primaryKey:{type:[String,Number],required:!0},disabled:{type:Boolean,default:!1},template:{type:String,default:null},enableCreate:{type:Boolean,default:!1},filter:{type:Object,default:null}},emits:["input"],setup(t,{emit:a}){const{t:o}=I(),i=e(),{useRelationsStore:u,useFieldsStore:c}=n(),f=u(),s=c(),d=r([]),p=r(!1),v=r(""),h=r(!1),m=r({}),g=r(!1),y=w(()=>{const e=f.getRelationsForField(t.collection,t.field).find(e=>e.collection===t.collection&&e.field===t.field);if(!e)return null;const n=e.related_collection,r=e.meta?.one_field,a=f.getRelationsForCollection(n).find(e=>e.collection===n&&e.field!==r&&e.related_collection);return{junctionRelation:e,relatedRelation:a,junctionCollection:n,relatedCollection:a?.related_collection,junctionField:e.field,relatedField:a?.field}}),_=w(()=>y.value?.relatedCollection);w(()=>y.value?.junctionCollection);const b=w(()=>_.value?s.getPrimaryKeyFieldForCollection(_.value):null),x=w(()=>t.template?t.template:b.value?`{{ ${b.value} }}`:"{{ id }}"),k=w(()=>{if(!t.value||!Array.isArray(t.value))return[];const e=y.value?.relatedField;return e?t.value.map(n=>{if("object"==typeof n&&null!==n){const t=n[e];return"object"==typeof t&&null!==t?t[b.value]:t}return n}).filter(Boolean):[]}),C=w(()=>d.value.filter(e=>k.value.includes(e[b.value]))),j=w(()=>d.value),S=e=>k.value.includes(e),A=async(e="")=>{if(_.value){p.value=!0;try{const n={limit:100,fields:["*"]};if(e){const t=s.getFieldsForCollection(_.value).filter(e=>["string","text"].includes(e.type)&&!e.meta?.hidden).map(e=>e.field);t.length>0&&(n.filter={_or:t.map(n=>({[n]:{_contains:e}}))})}t.filter&&(n.filter=n.filter?{_and:[n.filter,t.filter]}:t.filter);const r=await i.get(`/items/${_.value}`,{params:n});d.value=r.data.data||[]}catch(e){console.error("Error fetching items:",e),d.value=[]}finally{p.value=!1}}},O=ne.debounce(e=>{A(e)},300),E=e=>{const n=y.value?.relatedField;if(!n)return;if(!e||0===e.length)return void a("input",[]);const t=e.map(e=>({[n]:e}));a("input",t)};return l(()=>t.collection,()=>{A()},{immediate:!0}),l(()=>t.value,async e=>{if(!(e&&Array.isArray(e)&&0!==e.length&&_.value&&b.value))return;const n=k.value.filter(e=>!d.value.some(n=>n[b.value]===e));if(n.length>0)try{const e=await i.get(`/items/${_.value}`,{params:{filter:{[b.value]:{_in:n}},fields:["*"]}});(e.data.data||[]).forEach(e=>{d.value.some(n=>n[b.value]===e[b.value])||d.value.push(e)})}catch(e){console.error("Error fetching selected items:",e)}},{immediate:!0}),{t:o,relationInfo:y,items:d,loading:p,searchQuery:v,selectedItemsData:C,availableItems:j,isSelected:S,onSearchInput:O,clearSearch:()=>{v.value="",A()},toggleItem:e=>{if(t.disabled)return;const n=e[b.value];let r;r=S(n)?k.value.filter(e=>e!==n):[...k.value,n],E(r)},removeItem:e=>{if(t.disabled)return;const n=k.value.filter(n=>n!==e);E(n)},displayTemplate:x,relatedCollection:_,relatedPrimaryKey:b,createNew:()=>{m.value={},h.value=!0},drawerOpen:h,newItem:m,saving:g,saveNewItem:async()=>{if(_.value){g.value=!0;try{const e=(await i.post(`/items/${_.value}`,m.value)).data.data;d.value.unshift(e);const n=e[b.value];E([...k.value,n]),h.value=!1,m.value={}}catch(e){console.error("Error saving new item:",e)}finally{g.value=!1}}}}}}),he={key:1,class:"m2m-dropdown"},me={key:0,class:"selected-items"},ge={key:1,class:"loading-container"},ye={key:2,class:"items-list"},_e=["onClick"],be={class:"item-content"},we={key:3,class:"no-results"},xe={class:"drawer-content"};var ke=t({id:"m2m-dropdown",name:"M2M Dropdown",description:"Searchable dropdown for Many-to-Many relationships",icon:"arrow_drop_down",component:E(ve,[["render",function(e,n,t,r,a,o){const i=u("v-notice"),l=u("v-icon"),b=u("v-input"),w=u("render-template"),x=u("v-chip"),k=u("v-progress-circular"),I=u("v-checkbox"),S=u("v-button"),A=u("v-form"),O=u("v-drawer");return e.relationInfo?(c(),f("div",he,[v(b,{modelValue:e.searchQuery,"onUpdate:modelValue":[n[0]||(n[0]=n=>e.searchQuery=n),e.onSearchInput],placeholder:e.t("search_items"),disabled:e.disabled},{prepend:m(()=>[v(l,{name:"search"})]),append:m(()=>[e.searchQuery?(c(),g(l,{key:0,name:"close",clickable:"",onClick:e.clearSearch},null,8,["onClick"])):p("v-if",!0)]),_:1},8,["modelValue","placeholder","disabled","onUpdate:modelValue"]),e.selectedItemsData.length>0?(c(),f("div",me,[(c(!0),f(s,null,d(e.selectedItemsData,n=>(c(),g(x,{key:n[e.relatedPrimaryKey],small:"",disabled:e.disabled,"onClick:close":t=>e.removeItem(n[e.relatedPrimaryKey])},{default:m(()=>[v(w,{collection:e.relatedCollection,item:n,template:e.displayTemplate},null,8,["collection","item","template"])]),_:2},1032,["disabled","onClick:close"]))),128))])):p("v-if",!0),e.loading?(c(),f("div",ge,[v(k,{indeterminate:"",small:""})])):e.availableItems.length>0?(c(),f("div",ye,[(c(!0),f(s,null,d(e.availableItems,t=>(c(),f("div",{key:t[e.relatedPrimaryKey],class:C(["item",{selected:e.isSelected(t[e.relatedPrimaryKey])}]),onClick:n=>e.toggleItem(t)},[v(I,{"model-value":e.isSelected(t[e.relatedPrimaryKey]),disabled:e.disabled,onClick:n[1]||(n[1]=j(()=>{},["stop"]))},null,8,["model-value","disabled"]),h("div",be,[v(w,{collection:e.relatedCollection,item:t,template:e.displayTemplate},null,8,["collection","item","template"])])],10,_e))),128))])):e.searchQuery&&!e.loading?(c(),f("div",we,y(e.t("no_items_found")),1)):p("v-if",!0),e.enableCreate?(c(),g(S,{key:4,small:"",class:"add-new",disabled:e.disabled,onClick:e.createNew},{default:m(()=>[v(l,{name:"add",small:""}),_(" "+y(e.t("create_new")),1)]),_:1},8,["disabled","onClick"])):p("v-if",!0),v(O,{modelValue:e.drawerOpen,"onUpdate:modelValue":n[4]||(n[4]=n=>e.drawerOpen=n),title:e.t("create_item"),persistent:"",onCancel:n[5]||(n[5]=n=>e.drawerOpen=!1)},{actions:m(()=>[v(S,{secondary:"",onClick:n[2]||(n[2]=n=>e.drawerOpen=!1)},{default:m(()=>[_(y(e.t("cancel")),1)]),_:1}),v(S,{loading:e.saving,onClick:e.saveNewItem},{default:m(()=>[_(y(e.t("save")),1)]),_:1},8,["loading","onClick"])]),default:m(()=>[h("div",xe,[v(A,{modelValue:e.newItem,"onUpdate:modelValue":n[3]||(n[3]=n=>e.newItem=n),collection:e.relatedCollection,"primary-key":"+",loading:!1,disabled:!1},null,8,["modelValue","collection"])])]),_:1},8,["modelValue","title"])])):(c(),g(i,{key:0,type:"warning"},{default:m(()=>[_(y(e.t("relationship_not_setup")),1)]),_:1}))}],["__scopeId","data-v-f64c38d2"],["__file","interface.vue"]]),types:["alias"],localTypes:["m2m"],group:"relational",options:({relations:e})=>{const n=e.m2m;return[{field:"template",name:"$t:display_template",meta:{interface:"system-display-template",options:{collectionName:n?.related_collection},width:"full"}},{field:"enableCreate",name:"Enable Create",type:"boolean",meta:{interface:"boolean",options:{label:"Allow creating new items"},width:"half"},schema:{default_value:!1}},{field:"filter",name:"$t:filter",type:"json",meta:{interface:"system-filter",options:{collectionName:n?.related_collection},width:"full"}}]},recommendedDisplays:["related-values"]});O("\n.m2m-dropdown[data-v-90e43c5b] {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  position: relative;\n}\n.selected-items[data-v-90e43c5b] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n  padding: 8px;\n  background-color: var(--theme--background-subdued);\n  border-radius: var(--theme--border-radius);\n  min-height: 40px;\n}\n.dropdown-container[data-v-90e43c5b] {\n  position: absolute;\n  top: 100%;\n  left: 0;\n  right: 0;\n  z-index: 100;\n  background-color: var(--theme--background);\n  border: var(--theme--border-width) solid var(--theme--form--field--input--border-color);\n  border-radius: var(--theme--border-radius);\n  margin-top: 4px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n.loading-container[data-v-90e43c5b] {\n  display: flex;\n  justify-content: center;\n  padding: 20px;\n}\n.items-list[data-v-90e43c5b] {\n  max-height: 300px;\n  overflow-y: auto;\n}\n.item[data-v-90e43c5b] {\n  padding: 8px 12px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  transition: background-color var(--fast) var(--transition);\n  border-bottom: var(--theme--border-width) solid\n  var(--theme--form--field--input--border-color);\n}\n.item[data-v-90e43c5b]:last-child {\n  border-bottom: none;\n}\n.item[data-v-90e43c5b]:hover {\n  background-color: var(--theme--background-subdued);\n}\n.item.selected[data-v-90e43c5b] {\n  background-color: var(--theme--primary-background);\n}\n.item-content[data-v-90e43c5b] {\n  flex: 1;\n}\n.no-results[data-v-90e43c5b] {\n  padding: 20px;\n  text-align: center;\n  color: var(--theme--foreground-subdued);\n}\n.add-new[data-v-90e43c5b] {\n  align-self: flex-start;\n  margin: 8px;\n}\n.drawer-content[data-v-90e43c5b] {\n  padding: var(--content-padding);\n  padding-top: 0;\n  padding-bottom: var(--content-padding-bottom);\n}\n[data-v-90e43c5b] .v-chip {\n  cursor: pointer;\n}\n",{});const Ce=b({props:{value:{type:Array,default:()=>[]},collection:{type:String,required:!0},field:{type:String,required:!0},primaryKey:{type:[String,Number],required:!0},disabled:{type:Boolean,default:!1},template:{type:String,default:null},enableCreate:{type:Boolean,default:!1},filter:{type:Object,default:null}},emits:["input"],setup(t,{emit:a}){const{t:i}=I(),u=e(),{useRelationsStore:c,useFieldsStore:f}=n(),s=c(),d=f(),p=r([]),v=r(!1),h=r(""),m=r(!1),g=r({}),y=r(!1),_=r(!1),b=w(()=>{const e=s.getRelationsForField(t.collection,t.field);if(!e||0===e.length)return null;const n=e.find(e=>e.related_collection===t.collection&&e.collection!==t.collection);if(!n)return null;const r=n.collection,a=e.find(e=>e.collection===r&&e.related_collection!==t.collection);return a?{junctionCollection:r,relatedCollection:a.related_collection,relatedField:a.field}:null}),x=w(()=>b.value?.relatedCollection);w(()=>b.value?.junctionCollection);const k=w(()=>{if(!x.value)return"id";const e=d.getPrimaryKeyFieldForCollection(x.value);return e?.field||"id"}),C=w(()=>{if(t.template)return t.template;return d.getFieldsForCollection(x.value).some(e=>"name"===e.field)?"{{ name }}":`{{ ${k.value} }}`}),j=w(()=>{if(!t.value||!Array.isArray(t.value))return[];const e=b.value?.relatedField;if(!e)return[];return t.value.map(n=>{if(!n)return null;if("object"==typeof n){const t=n[e];return t?"object"==typeof t&&null!==t?t[k.value]:t:null}return n}).filter(e=>null!=e)}),S=w(()=>p.value.filter(e=>j.value.includes(e[k.value]))),A=w(()=>p.value),O=e=>j.value.includes(e),E=async(e="")=>{if(x.value){v.value=!0;try{const n={limit:100,fields:["*"]};if(e){const t=d.getFieldsForCollection(x.value).filter(e=>["string","text"].includes(e.type)&&!e.meta?.hidden).map(e=>e.field);t.length>0&&(n.filter={_or:t.map(n=>({[n]:{_contains:e}}))})}t.filter&&(n.filter=n.filter?{_and:[n.filter,t.filter]}:t.filter);const r=await u.get(`/items/${x.value}`,{params:n});p.value=r.data.data||[]}catch(e){console.error("Error fetching items:",e),p.value=[]}finally{v.value=!1}}},F=ne.debounce(e=>{E(e)},300),R=e=>{const n=b.value?.relatedField;if(!n)return;if(!e||0===e.length)return void a("input",[]);const r=e.map(e=>{const r=t.value?.find(t=>{if(!t||"object"!=typeof t)return!1;const r=t[n];return"object"==typeof r&&null!==r?r[k.value]===e:r===e});return r||{[n]:{[k.value]:e}}});a("input",r)};return o(()=>{E()}),l(()=>t.collection,()=>{E()}),l(()=>t.value,async e=>{if(!(e&&Array.isArray(e)&&0!==e.length&&x.value&&k.value))return;const n=j.value.filter(e=>!p.value.some(n=>n[k.value]===e));if(n.length>0)try{const e=await u.get(`/items/${x.value}`,{params:{filter:{[k.value]:{_in:n}},fields:["*"]}});(e.data.data||[]).forEach(e=>{p.value.some(n=>n[k.value]===e[k.value])||p.value.push(e)})}catch(e){console.error("Error fetching selected items:",e)}},{immediate:!0}),{t:i,relationInfo:b,items:p,loading:v,searchQuery:h,selectedItemsData:S,availableItems:A,isSelected:O,onSearchInput:F,clearSearch:()=>{h.value="",E()},openList:()=>{disabled||(_.value=!0)},closeList:()=>{_.value=!1},toggleItem:e=>{if(t.disabled)return;const n=e[k.value];let r;r=O(n)?j.value.filter(e=>e!==n):[...j.value,n],R(r)},removeItem:e=>{if(t.disabled)return;const n=j.value.filter(n=>n!==e);R(n)},displayTemplate:C,relatedCollection:x,relatedPrimaryKeyFieldName:k,createNew:()=>{g.value={},m.value=!0},drawerOpen:m,newItem:g,saving:y,saveNewItem:async()=>{if(x.value){y.value=!0;try{const e=(await u.post(`/items/${x.value}`,g.value)).data.data;p.value.unshift(e);const n=e[k.value];R([...j.value,n]),m.value=!1,g.value={}}catch(e){console.error("Error saving new item:",e)}finally{y.value=!1}}},listOpen:_}},directives:{"click-outside":{beforeMount(e,n){e.clickOutsideEvent=t=>{e===t.target||e.contains(t.target)||n.value()},document.addEventListener("click",e.clickOutsideEvent)},unmounted(e){document.removeEventListener("click",e.clickOutsideEvent)}}}}),je={key:1,class:"m2m-dropdown"},Ie={key:0,class:"selected-items"},Se={key:1,class:"dropdown-container"},Ae={key:0,class:"loading-container"},Oe={key:1,class:"items-list"},Ee=["onClick"],Fe={class:"item-content"},Re={key:2,class:"no-results"},Ve={class:"drawer-content"};const De=[Y,pe,ke,t({id:"junction-dropdown",name:"Junction M2M Dropdown",description:"Searchable dropdown for Many-to-Many relationships via junction table",icon:"link",component:E(Ce,[["render",function(e,n,t,r,a,o){const i=u("v-notice"),l=u("v-icon"),b=u("v-input"),w=u("render-template"),I=u("v-chip"),S=u("v-progress-circular"),A=u("v-checkbox"),O=u("v-button"),E=u("v-form"),F=u("v-drawer"),R=x("click-outside");return e.relationInfo?k((c(),f("div",je,[v(b,{modelValue:e.searchQuery,"onUpdate:modelValue":[n[0]||(n[0]=n=>e.searchQuery=n),e.onSearchInput],placeholder:e.t("search_items"),disabled:e.disabled,onFocus:e.openList,onClick:e.openList},{prepend:m(()=>[v(l,{name:"search"})]),append:m(()=>[e.searchQuery?(c(),g(l,{key:0,name:"close",clickable:"",onClick:e.clearSearch},null,8,["onClick"])):p("v-if",!0)]),_:1},8,["modelValue","placeholder","disabled","onUpdate:modelValue","onFocus","onClick"]),e.selectedItemsData.length>0?(c(),f("div",Ie,[(c(!0),f(s,null,d(e.selectedItemsData,n=>(c(),g(I,{key:n[e.relatedPrimaryKeyFieldName],small:"","close-icon":"close",disabled:e.disabled,"onClick:close":t=>e.removeItem(n[e.relatedPrimaryKeyFieldName])},{default:m(()=>[v(w,{collection:e.relatedCollection,item:n,template:e.displayTemplate},null,8,["collection","item","template"])]),_:2},1032,["disabled","onClick:close"]))),128))])):p("v-if",!0),e.listOpen?(c(),f("div",Se,[e.loading?(c(),f("div",Ae,[v(S,{indeterminate:"",small:""})])):e.availableItems.length>0?(c(),f("div",Oe,[(c(!0),f(s,null,d(e.availableItems,t=>(c(),f("div",{key:t[e.relatedPrimaryKeyFieldName],class:C(["item",{selected:e.isSelected(t[e.relatedPrimaryKeyFieldName])}]),onClick:n=>e.toggleItem(t)},[v(A,{"model-value":e.isSelected(t[e.relatedPrimaryKeyFieldName]),disabled:e.disabled,onClick:n[1]||(n[1]=j(()=>{},["stop"]))},null,8,["model-value","disabled"]),h("div",Fe,[v(w,{collection:e.relatedCollection,item:t,template:e.displayTemplate},null,8,["collection","item","template"])])],10,Ee))),128))])):e.searchQuery&&!e.loading?(c(),f("div",Re,y(e.t("no_items_found")),1)):p("v-if",!0),e.enableCreate?(c(),g(O,{key:3,small:"",class:"add-new",disabled:e.disabled,onClick:e.createNew},{default:m(()=>[v(l,{name:"add",small:""}),_(" "+y(e.t("create_new")),1)]),_:1},8,["disabled","onClick"])):p("v-if",!0)])):p("v-if",!0),v(F,{modelValue:e.drawerOpen,"onUpdate:modelValue":n[4]||(n[4]=n=>e.drawerOpen=n),title:e.t("create_item"),persistent:"",onCancel:n[5]||(n[5]=n=>e.drawerOpen=!1)},{actions:m(()=>[v(O,{secondary:"",onClick:n[2]||(n[2]=n=>e.drawerOpen=!1)},{default:m(()=>[_(y(e.t("cancel")),1)]),_:1}),v(O,{loading:e.saving,onClick:e.saveNewItem},{default:m(()=>[_(y(e.t("save")),1)]),_:1},8,["loading","onClick"])]),default:m(()=>[h("div",Ve,[v(E,{modelValue:e.newItem,"onUpdate:modelValue":n[3]||(n[3]=n=>e.newItem=n),collection:e.relatedCollection,"primary-key":"+",loading:!1,disabled:!1},null,8,["modelValue","collection"])])]),_:1},8,["modelValue","title"])])),[[R,e.closeList]]):(c(),g(i,{key:0,type:"warning"},{default:m(()=>[_(y(e.t("relationship_not_setup")),1)]),_:1}))}],["__scopeId","data-v-90e43c5b"],["__file","interface.vue"]]),types:["alias"],localTypes:["m2m"],group:"relational",options:({relations:e})=>{let n=null;if(e&&e.length>=2){const t=e.find(n=>n.related_collection&&n.related_collection!==e[0].related_collection);t&&(n=t.related_collection)}return[{field:"template",name:"$t:display_template",meta:{interface:"system-display-template",options:{collectionName:n},width:"full"}},{field:"enableCreate",name:"Enable Create",type:"boolean",meta:{interface:"boolean",options:{label:"Allow creating new items in related collection"},width:"half"},schema:{default_value:!1}},{field:"filter",name:"$t:filter",type:"json",meta:{interface:"system-filter",options:{collectionName:n},width:"full"}}]},recommendedDisplays:["related-values"]})],ze=[],Ne=[],Te=[],Le=[],Ue=[],$e=[];export{ze as displays,De as interfaces,Ne as layouts,Te as modules,$e as operations,Le as panels,Ue as themes};
