import{useApi as e,useStores as n,defineInterface as t}from"@directus/extensions-sdk";import{ref as r,reactive as a,onMounted as o,onBeforeUnmount as i,watch as l,resolveComponent as u,openBlock as c,createElementBlock as f,Fragment as s,renderList as d,createCommentVNode as p,createVNode as v,createElementVNode as h,withCtx as m,createBlock as g,toDisplayString as y,createTextVNode as _,defineComponent as b,computed as w,resolveDirective as x,withDirectives as k,normalizeClass as C,withModifiers as I}from"vue";import{useI18n as j}from"vue-i18n";var E=[],S=[];function A(e,n){if(e&&"undefined"!=typeof document){var t,r=!0===n.prepend?"prepend":"append",a=!0===n.singleTag,o="string"==typeof n.container?document.querySelector(n.container):document.getElementsByTagName("head")[0];if(a){var i=E.indexOf(o);-1===i&&(i=E.push(o)-1,S[i]={}),t=S[i]&&S[i][r]?S[i][r]:S[i][r]=l()}else t=l();65279===e.charCodeAt(0)&&(e=e.substring(1)),t.styleSheet?t.styleSheet.cssText+=e:t.appendChild(document.createTextNode(e))}function l(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),n.attributes)for(var t=Object.keys(n.attributes),a=0;a<t.length;a++)e.setAttribute(t[a],n.attributes[t[a]]);var i="prepend"===r?"afterbegin":"beforeend";return o.insertAdjacentElement(i,e),e}}A("\n.project-companies-selector[data-v-9354d9c3] {\n  padding: 12px;\n  background-color: var(--theme--background-subdued);\n  border-radius: var(--theme--border-radius);\n}\n.company-row[data-v-9354d9c3] {\n  display: grid;\n  grid-template-columns: 200px 1fr 40px;\n  gap: 12px;\n  align-items: start;\n  margin-bottom: 12px;\n  padding: 12px;\n  background-color: var(--theme--background);\n  border-radius: var(--theme--border-radius);\n  border: 2px solid var(--theme--border-color-subdued);\n}\n.role-select[data-v-9354d9c3] {\n  width: 100%;\n}\n.company-select-wrapper[data-v-9354d9c3] {\n  position: relative;\n  width: 100%;\n}\n.company-dropdown[data-v-9354d9c3] {\n  position: absolute;\n  top: 100%;\n  left: 0;\n  right: 0;\n  margin-top: 4px;\n  max-height: 300px;\n  overflow-y: auto;\n  background-color: var(--theme--background);\n  border: 2px solid var(--theme--border-color-subdued);\n  border-radius: var(--theme--border-radius);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n  z-index: 100;\n}\n.company-option[data-v-9354d9c3] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px;\n  cursor: pointer;\n  transition: background-color 0.2s;\n}\n.company-option[data-v-9354d9c3]:hover {\n  background-color: var(--theme--background-subdued);\n}\n.company-option.create-new[data-v-9354d9c3] {\n  border-top: 2px solid var(--theme--border-color-subdued);\n  color: var(--theme--primary);\n  font-weight: 500;\n}\n.company-info[data-v-9354d9c3] {\n  flex: 1;\n  min-width: 0;\n}\n.company-name[data-v-9354d9c3] {\n  font-size: 14px;\n  font-weight: 500;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.company-email[data-v-9354d9c3] {\n  font-size: 12px;\n  color: var(--theme--foreground-subdued);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.no-results[data-v-9354d9c3] {\n  padding: 12px;\n  text-align: center;\n  color: var(--theme--foreground-subdued);\n  font-size: 14px;\n}\n.remove-btn[data-v-9354d9c3] {\n  color: var(--theme--danger);\n  cursor: pointer;\n  transition: transform 0.2s;\n  margin-top: 8px;\n}\n.remove-btn[data-v-9354d9c3]:hover {\n  transform: scale(1.1);\n}\n.grid[data-v-9354d9c3] {\n  display: grid;\n  gap: 20px;\n}\n.field[data-v-9354d9c3] {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n.field.full[data-v-9354d9c3] {\n  grid-column: 1 / -1;\n}\n.field.half[data-v-9354d9c3] {\n  grid-column: span 1;\n}\n.type-label[data-v-9354d9c3] {\n  font-weight: 600;\n  font-size: 14px;\n  color: var(--theme--foreground);\n}\n@media (max-width: 768px) {\n.company-row[data-v-9354d9c3] {\n    grid-template-columns: 1fr;\n}\n.remove-btn[data-v-9354d9c3] {\n    justify-self: end;\n    margin-top: 0;\n}\n.field.half[data-v-9354d9c3] {\n    grid-column: 1 / -1;\n}\n}\n",{});var O=(e,n)=>{const t=e.__vccOpts||e;for(const[e,r]of n)t[e]=r;return t};const D={props:{value:{type:Array,default:()=>[]},collection:{type:String,default:null},primaryKey:{type:[String,Number],default:null}},emits:["input"],setup(n,{emit:t}){const u=e(),{t:c}=j(),f=r([]),s=r([]),d=a({}),p=a({}),v=a({}),h=a({}),m=r(!1),g=r(!1),y=r(!1),_=r(!1),b=r(null),w=r(null),x={},k=r({name:"",email:"",phone:""}),C=async(e,n)=>{if(!n||n.length<2)p[e]=[];else{b.value=e,_.value=!0;try{const t=n.trim().split(/\s+/).filter(e=>e.length>0).map(e=>({name:{_icontains:e}})),r=await u.get("/items/companies",{params:{fields:["id","name","email"],limit:50,filter:{_or:t},sort:["name"]}});p[e]=r.data.data.map(e=>({text:e.name,value:e.id,company:e}))}catch(n){console.error("Error searching companies:",n),p[e]=[]}finally{_.value=!1,b.value=null}}},I=async()=>{if(!n.primaryKey||"+"===n.primaryKey)return console.log("New item or invalid primaryKey, adding empty row"),void(0===f.value.length&&S());try{console.log("Loading existing data for project:",n.primaryKey);const e=await u.get("/items/project_companies",{params:{filter:{project_id:{_eq:n.primaryKey}},fields:["id","role_id","company_id.id","company_id.name"],limit:-1}});console.log("Loaded project_companies:",e.data.data),e.data.data.length>0?(f.value=[],e.data.data.forEach((e,n)=>{const t="object"==typeof e.company_id?e.company_id.id:e.company_id,r="object"==typeof e.company_id?e.company_id.name:"";f.value.push({id:e.id,role_id:e.role_id,company_id:t}),r&&(d[n]=r,h[n]=r),p[n]=[],v[n]=!1})):S()}catch(e){console.error("Error loading existing data:",e),0===f.value.length&&S()}};o(async()=>{console.log("Component mounted, primaryKey:",n.primaryKey),await(async()=>{y.value=!0;try{const e=await u.get("/items/project_company_roles",{params:{fields:["id","name","slug"],limit:-1,sort:["name"]}});s.value=e.data.data.map(e=>({text:e.name,value:e.id}))}catch(e){console.error("Error loading roles:",e)}finally{y.value=!1}})(),await I(),console.log("After loadExistingData:",{internalValue:f.value,searchQueries:{...d}}),document.addEventListener("click",E)}),i(()=>{document.removeEventListener("click",E),Object.values(x).forEach(e=>clearTimeout(e))});const E=e=>{e.target.closest(".company-select-wrapper")||Object.keys(v).forEach(e=>{v[e]=!1})};l(()=>n.value,e=>{e&&Array.isArray(e)&&e.length>0&&(f.value=e.map(e=>({id:e.id||null,role_id:e.role_id||null,company_id:"object"==typeof e.company_id?e.company_id?.id:e.company_id})))},{deep:!0}),l(()=>n.primaryKey,(e,n)=>{console.log("PrimaryKey changed from",n,"to",e),e!==n&&e&&"+"!==e&&(f.value=[],Object.keys(d).forEach(e=>delete d[e]),Object.keys(p).forEach(e=>delete p[e]),Object.keys(v).forEach(e=>delete v[e]),Object.keys(h).forEach(e=>delete h[e]),I())});const S=()=>{const e=f.value.length;f.value.push({id:null,role_id:null,company_id:null}),d[e]="",p[e]=[],v[e]=!1,A()},A=()=>{const e=f.value.filter(e=>e.role_id&&e.company_id).map(e=>({id:e.id,role_id:e.role_id,company_id:e.company_id}));t("input",e.length>0?e:[])};return{t:c,internalValue:f,roleOptions:s,searchQueries:d,filteredCompanies:p,showDropdown:v,selectedCompanyNames:h,showCreateDialog:m,creating:g,loadingRoles:y,loadingCompanies:_,activeSearchIndex:b,newCompany:k,addItem:S,removeItem:e=>{f.value.splice(e,1),delete d[e],delete p[e],delete v[e],delete h[e],A()},handleSearchInput:(e,n)=>{d[e]=n,v[e]=!0,x[e]&&clearTimeout(x[e]),x[e]=setTimeout(()=>{C(e,n)},300)},handleSearchFocus:e=>{v[e]=!0,d[e]&&d[e].length>=2&&C(e,d[e])},selectCompany:(e,n)=>{f.value[e].company_id=n.value,d[e]=n.text,h[e]=n.text,v[e]=!1,A()},companyExistsInResults:e=>{const n=d[e]?.toLowerCase();return p[e]?.some(e=>e.text.toLowerCase()===n)},handleCreateNew:e=>{w.value=e,k.value.name=d[e],v[e]=!1,m.value=!0},createCompany:async()=>{if(k.value.name){g.value=!0;try{const e=(await u.post("/items/companies",k.value)).data.data;if(null!==w.value){const n=w.value;f.value[n].company_id=e.id,d[n]=e.name,h[n]=e.name,A()}m.value=!1,k.value={name:"",email:"",phone:""},w.value=null}catch(e){console.error("Error creating company:",e),alert("Failed to create company. Please try again.")}finally{g.value=!1}}},updateValue:A}}},F={class:"project-companies-selector"},R={class:"company-select-wrapper"},U={key:0,class:"company-dropdown"},V=["onClick"],z={class:"company-info"},N={class:"company-name"},B={key:0,class:"company-email"},T=["onClick"],L={class:"company-info"},$={class:"company-name"},P={key:1,class:"no-results"},K={class:"grid"},W={class:"field full"},M={class:"type-label"},q={class:"field half"},Q={class:"type-label"},G={class:"field half"},Z={class:"type-label"};var J,H,Y={id:"project-companies-selector",name:"Project Companies Selector",description:"Select companies with roles in a user-friendly interface",icon:"business",component:O(D,[["render",function(e,n,t,r,a,o){const i=u("v-select"),l=u("v-icon"),b=u("v-input"),w=u("v-button"),x=u("v-card-title"),k=u("v-card-text"),C=u("v-card-actions"),I=u("v-card"),j=u("v-dialog");return c(),f("div",F,[(c(!0),f(s,null,d(r.internalValue,(e,n)=>(c(),f("div",{key:e.id||`new-${n}`,class:"company-row"},[p(" Role Dropdown "),v(i,{modelValue:e.role_id,"onUpdate:modelValue":[n=>e.role_id=n,r.updateValue],items:r.roleOptions,"item-title":"text","item-value":"value",placeholder:r.t("select_role"),loading:r.loadingRoles,class:"role-select"},null,8,["modelValue","onUpdate:modelValue","items","placeholder","loading"]),p(" Company Search Input with Dropdown "),h("div",R,[v(b,{"model-value":r.searchQueries[n]||"",placeholder:r.t("search_or_create_company"),"onUpdate:modelValue":e=>r.handleSearchInput(n,e),onFocus:e=>r.handleSearchFocus(n)},{prepend:m(()=>[v(l,{name:"business",small:""})]),append:m(()=>[r.loadingCompanies&&r.activeSearchIndex===n?(c(),g(l,{key:0,name:"refresh",small:"",spin:""})):p("v-if",!0)]),_:2},1032,["model-value","placeholder","onUpdate:modelValue","onFocus"]),p(" Dropdown Results "),r.showDropdown[n]&&(r.filteredCompanies[n]?.length>0||r.searchQueries[n]?.length>0)?(c(),f("div",U,[(c(!0),f(s,null,d(r.filteredCompanies[n],e=>(c(),f("div",{key:e.value,class:"company-option",onClick:t=>r.selectCompany(n,e)},[v(l,{name:"business",small:""}),h("div",z,[h("div",N,y(e.text),1),e.company?.email?(c(),f("div",B,y(e.company.email),1)):p("v-if",!0)])],8,V))),128)),p(" Create New Option "),r.searchQueries[n]&&r.searchQueries[n].length>2&&!r.companyExistsInResults(n)?(c(),f("div",{key:0,class:"company-option create-new",onClick:e=>r.handleCreateNew(n)},[v(l,{name:"add_circle",small:""}),h("div",L,[h("div",$,'Create "'+y(r.searchQueries[n])+'"',1)])],8,T)):p("v-if",!0),!r.loadingCompanies&&0===r.filteredCompanies[n]?.length&&r.searchQueries[n]?.length>0?(c(),f("div",P," No companies found. Type to create new. ")):p("v-if",!0)])):p("v-if",!0)]),p(" Remove Button "),v(l,{name:"close",clickable:"",class:"remove-btn",onClick:e=>r.removeItem(n)},null,8,["onClick"])]))),128)),p(" Add New Button "),v(w,{secondary:"",small:"",onClick:r.addItem},{default:m(()=>[v(l,{name:"add",small:""}),_(" "+y(r.t("add_company")),1)]),_:1},8,["onClick"]),p(" Create Company Dialog "),v(j,{modelValue:r.showCreateDialog,"onUpdate:modelValue":n[4]||(n[4]=e=>r.showCreateDialog=e),onEsc:n[5]||(n[5]=e=>r.showCreateDialog=!1)},{default:m(()=>[v(I,null,{default:m(()=>[v(x,null,{default:m(()=>[_(y(r.t("create_new_company")),1)]),_:1}),v(k,null,{default:m(()=>[h("div",K,[h("div",W,[h("div",M,y(r.t("company_name")),1),v(b,{modelValue:r.newCompany.name,"onUpdate:modelValue":n[0]||(n[0]=e=>r.newCompany.name=e),placeholder:r.t("enter_company_name"),autofocus:""},null,8,["modelValue","placeholder"])]),h("div",q,[h("div",Q,y(r.t("email")),1),v(b,{modelValue:r.newCompany.email,"onUpdate:modelValue":n[1]||(n[1]=e=>r.newCompany.email=e),type:"email",placeholder:r.t("enter_email")},null,8,["modelValue","placeholder"])]),h("div",G,[h("div",Z,y(r.t("phone")),1),v(b,{modelValue:r.newCompany.phone,"onUpdate:modelValue":n[2]||(n[2]=e=>r.newCompany.phone=e),placeholder:r.t("enter_phone")},null,8,["modelValue","placeholder"])])])]),_:1}),v(C,null,{default:m(()=>[v(w,{secondary:"",onClick:n[3]||(n[3]=e=>r.showCreateDialog=!1)},{default:m(()=>[_(y(r.t("cancel")),1)]),_:1}),v(w,{loading:r.creating,disabled:!r.newCompany.name,onClick:r.createCompany},{default:m(()=>[_(y(r.t("create")),1)]),_:1},8,["loading","disabled","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}],["__scopeId","data-v-9354d9c3"],["__file","interface.vue"]]),options:null,types:["alias"],localTypes:["o2m"],group:"relational",relational:!0},X="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ee={exports:{}};J=ee,H=ee.exports,function(){var e,n="Expected a function",t="__lodash_hash_undefined__",r="__lodash_placeholder__",a=16,o=32,i=64,l=128,u=256,c=1/0,f=9007199254740991,s=NaN,d=4294967295,p=[["ary",l],["bind",1],["bindKey",2],["curry",8],["curryRight",a],["flip",512],["partial",o],["partialRight",i],["rearg",u]],v="[object Arguments]",h="[object Array]",m="[object Boolean]",g="[object Date]",y="[object Error]",_="[object Function]",b="[object GeneratorFunction]",w="[object Map]",x="[object Number]",k="[object Object]",C="[object Promise]",I="[object RegExp]",j="[object Set]",E="[object String]",S="[object Symbol]",A="[object WeakMap]",O="[object ArrayBuffer]",D="[object DataView]",F="[object Float32Array]",R="[object Float64Array]",U="[object Int8Array]",V="[object Int16Array]",z="[object Int32Array]",N="[object Uint8Array]",B="[object Uint8ClampedArray]",T="[object Uint16Array]",L="[object Uint32Array]",$=/\b__p \+= '';/g,P=/\b(__p \+=) '' \+/g,K=/(__e\(.*?\)|\b__t\)) \+\n'';/g,W=/&(?:amp|lt|gt|quot|#39);/g,M=/[&<>"']/g,q=RegExp(W.source),Q=RegExp(M.source),G=/<%-([\s\S]+?)%>/g,Z=/<%([\s\S]+?)%>/g,Y=/<%=([\s\S]+?)%>/g,ee=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ne=/^\w*$/,te=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,re=/[\\^$.*+?()[\]{}|]/g,ae=RegExp(re.source),oe=/^\s+/,ie=/\s/,le=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ue=/\{\n\/\* \[wrapped with (.+)\] \*/,ce=/,? & /,fe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,se=/[()=,{}\[\]\/\s]/,de=/\\(\\)?/g,pe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ve=/\w*$/,he=/^[-+]0x[0-9a-f]+$/i,me=/^0b[01]+$/i,ge=/^\[object .+?Constructor\]$/,ye=/^0o[0-7]+$/i,_e=/^(?:0|[1-9]\d*)$/,be=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,we=/($^)/,xe=/['\n\r\u2028\u2029\\]/g,ke="\\ud800-\\udfff",Ce="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ie="\\u2700-\\u27bf",je="a-z\\xdf-\\xf6\\xf8-\\xff",Ee="A-Z\\xc0-\\xd6\\xd8-\\xde",Se="\\ufe0e\\ufe0f",Ae="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Oe="['’]",De="["+ke+"]",Fe="["+Ae+"]",Re="["+Ce+"]",Ue="\\d+",Ve="["+Ie+"]",ze="["+je+"]",Ne="[^"+ke+Ae+Ue+Ie+je+Ee+"]",Be="\\ud83c[\\udffb-\\udfff]",Te="[^"+ke+"]",Le="(?:\\ud83c[\\udde6-\\uddff]){2}",$e="[\\ud800-\\udbff][\\udc00-\\udfff]",Pe="["+Ee+"]",Ke="\\u200d",We="(?:"+ze+"|"+Ne+")",Me="(?:"+Pe+"|"+Ne+")",qe="(?:['’](?:d|ll|m|re|s|t|ve))?",Qe="(?:['’](?:D|LL|M|RE|S|T|VE))?",Ge="(?:"+Re+"|"+Be+")?",Ze="["+Se+"]?",Je=Ze+Ge+"(?:"+Ke+"(?:"+[Te,Le,$e].join("|")+")"+Ze+Ge+")*",He="(?:"+[Ve,Le,$e].join("|")+")"+Je,Ye="(?:"+[Te+Re+"?",Re,Le,$e,De].join("|")+")",Xe=RegExp(Oe,"g"),en=RegExp(Re,"g"),nn=RegExp(Be+"(?="+Be+")|"+Ye+Je,"g"),tn=RegExp([Pe+"?"+ze+"+"+qe+"(?="+[Fe,Pe,"$"].join("|")+")",Me+"+"+Qe+"(?="+[Fe,Pe+We,"$"].join("|")+")",Pe+"?"+We+"+"+qe,Pe+"+"+Qe,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ue,He].join("|"),"g"),rn=RegExp("["+Ke+ke+Ce+Se+"]"),an=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,on=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ln=-1,un={};un[F]=un[R]=un[U]=un[V]=un[z]=un[N]=un[B]=un[T]=un[L]=!0,un[v]=un[h]=un[O]=un[m]=un[D]=un[g]=un[y]=un[_]=un[w]=un[x]=un[k]=un[I]=un[j]=un[E]=un[A]=!1;var cn={};cn[v]=cn[h]=cn[O]=cn[D]=cn[m]=cn[g]=cn[F]=cn[R]=cn[U]=cn[V]=cn[z]=cn[w]=cn[x]=cn[k]=cn[I]=cn[j]=cn[E]=cn[S]=cn[N]=cn[B]=cn[T]=cn[L]=!0,cn[y]=cn[_]=cn[A]=!1;var fn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},sn=parseFloat,dn=parseInt,pn="object"==typeof X&&X&&X.Object===Object&&X,vn="object"==typeof self&&self&&self.Object===Object&&self,hn=pn||vn||Function("return this")(),mn=H&&!H.nodeType&&H,gn=mn&&J&&!J.nodeType&&J,yn=gn&&gn.exports===mn,_n=yn&&pn.process,bn=function(){try{var e=gn&&gn.require&&gn.require("util").types;return e||_n&&_n.binding&&_n.binding("util")}catch(e){}}(),wn=bn&&bn.isArrayBuffer,xn=bn&&bn.isDate,kn=bn&&bn.isMap,Cn=bn&&bn.isRegExp,In=bn&&bn.isSet,jn=bn&&bn.isTypedArray;function En(e,n,t){switch(t.length){case 0:return e.call(n);case 1:return e.call(n,t[0]);case 2:return e.call(n,t[0],t[1]);case 3:return e.call(n,t[0],t[1],t[2])}return e.apply(n,t)}function Sn(e,n,t,r){for(var a=-1,o=null==e?0:e.length;++a<o;){var i=e[a];n(r,i,t(i),e)}return r}function An(e,n){for(var t=-1,r=null==e?0:e.length;++t<r&&!1!==n(e[t],t,e););return e}function On(e,n){for(var t=null==e?0:e.length;t--&&!1!==n(e[t],t,e););return e}function Dn(e,n){for(var t=-1,r=null==e?0:e.length;++t<r;)if(!n(e[t],t,e))return!1;return!0}function Fn(e,n){for(var t=-1,r=null==e?0:e.length,a=0,o=[];++t<r;){var i=e[t];n(i,t,e)&&(o[a++]=i)}return o}function Rn(e,n){return!(null==e||!e.length)&&Kn(e,n,0)>-1}function Un(e,n,t){for(var r=-1,a=null==e?0:e.length;++r<a;)if(t(n,e[r]))return!0;return!1}function Vn(e,n){for(var t=-1,r=null==e?0:e.length,a=Array(r);++t<r;)a[t]=n(e[t],t,e);return a}function zn(e,n){for(var t=-1,r=n.length,a=e.length;++t<r;)e[a+t]=n[t];return e}function Nn(e,n,t,r){var a=-1,o=null==e?0:e.length;for(r&&o&&(t=e[++a]);++a<o;)t=n(t,e[a],a,e);return t}function Bn(e,n,t,r){var a=null==e?0:e.length;for(r&&a&&(t=e[--a]);a--;)t=n(t,e[a],a,e);return t}function Tn(e,n){for(var t=-1,r=null==e?0:e.length;++t<r;)if(n(e[t],t,e))return!0;return!1}var Ln=Qn("length");function $n(e,n,t){var r;return t(e,function(e,t,a){if(n(e,t,a))return r=t,!1}),r}function Pn(e,n,t,r){for(var a=e.length,o=t+(r?1:-1);r?o--:++o<a;)if(n(e[o],o,e))return o;return-1}function Kn(e,n,t){return n==n?function(e,n,t){for(var r=t-1,a=e.length;++r<a;)if(e[r]===n)return r;return-1}(e,n,t):Pn(e,Mn,t)}function Wn(e,n,t,r){for(var a=t-1,o=e.length;++a<o;)if(r(e[a],n))return a;return-1}function Mn(e){return e!=e}function qn(e,n){var t=null==e?0:e.length;return t?Jn(e,n)/t:s}function Qn(n){return function(t){return null==t?e:t[n]}}function Gn(n){return function(t){return null==n?e:n[t]}}function Zn(e,n,t,r,a){return a(e,function(e,a,o){t=r?(r=!1,e):n(t,e,a,o)}),t}function Jn(n,t){for(var r,a=-1,o=n.length;++a<o;){var i=t(n[a]);i!==e&&(r=r===e?i:r+i)}return r}function Hn(e,n){for(var t=-1,r=Array(e);++t<e;)r[t]=n(t);return r}function Yn(e){return e?e.slice(0,ht(e)+1).replace(oe,""):e}function Xn(e){return function(n){return e(n)}}function et(e,n){return Vn(n,function(n){return e[n]})}function nt(e,n){return e.has(n)}function tt(e,n){for(var t=-1,r=e.length;++t<r&&Kn(n,e[t],0)>-1;);return t}function rt(e,n){for(var t=e.length;t--&&Kn(n,e[t],0)>-1;);return t}var at=Gn({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),ot=Gn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function it(e){return"\\"+fn[e]}function lt(e){return rn.test(e)}function ut(e){var n=-1,t=Array(e.size);return e.forEach(function(e,r){t[++n]=[r,e]}),t}function ct(e,n){return function(t){return e(n(t))}}function ft(e,n){for(var t=-1,a=e.length,o=0,i=[];++t<a;){var l=e[t];l!==n&&l!==r||(e[t]=r,i[o++]=t)}return i}function st(e){var n=-1,t=Array(e.size);return e.forEach(function(e){t[++n]=e}),t}function dt(e){var n=-1,t=Array(e.size);return e.forEach(function(e){t[++n]=[e,e]}),t}function pt(e){return lt(e)?function(e){for(var n=nn.lastIndex=0;nn.test(e);)++n;return n}(e):Ln(e)}function vt(e){return lt(e)?function(e){return e.match(nn)||[]}(e):function(e){return e.split("")}(e)}function ht(e){for(var n=e.length;n--&&ie.test(e.charAt(n)););return n}var mt=Gn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),gt=function J(H){var X,ie=(H=null==H?hn:gt.defaults(hn.Object(),H,gt.pick(hn,on))).Array,ke=H.Date,Ce=H.Error,Ie=H.Function,je=H.Math,Ee=H.Object,Se=H.RegExp,Ae=H.String,Oe=H.TypeError,De=ie.prototype,Fe=Ie.prototype,Re=Ee.prototype,Ue=H["__core-js_shared__"],Ve=Fe.toString,ze=Re.hasOwnProperty,Ne=0,Be=(X=/[^.]+$/.exec(Ue&&Ue.keys&&Ue.keys.IE_PROTO||""))?"Symbol(src)_1."+X:"",Te=Re.toString,Le=Ve.call(Ee),$e=hn._,Pe=Se("^"+Ve.call(ze).replace(re,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ke=yn?H.Buffer:e,We=H.Symbol,Me=H.Uint8Array,qe=Ke?Ke.allocUnsafe:e,Qe=ct(Ee.getPrototypeOf,Ee),Ge=Ee.create,Ze=Re.propertyIsEnumerable,Je=De.splice,He=We?We.isConcatSpreadable:e,Ye=We?We.iterator:e,nn=We?We.toStringTag:e,rn=function(){try{var e=po(Ee,"defineProperty");return e({},"",{}),e}catch(e){}}(),fn=H.clearTimeout!==hn.clearTimeout&&H.clearTimeout,pn=ke&&ke.now!==hn.Date.now&&ke.now,vn=H.setTimeout!==hn.setTimeout&&H.setTimeout,mn=je.ceil,gn=je.floor,_n=Ee.getOwnPropertySymbols,bn=Ke?Ke.isBuffer:e,Ln=H.isFinite,Gn=De.join,yt=ct(Ee.keys,Ee),_t=je.max,bt=je.min,wt=ke.now,xt=H.parseInt,kt=je.random,Ct=De.reverse,It=po(H,"DataView"),jt=po(H,"Map"),Et=po(H,"Promise"),St=po(H,"Set"),At=po(H,"WeakMap"),Ot=po(Ee,"create"),Dt=At&&new At,Ft={},Rt=To(It),Ut=To(jt),Vt=To(Et),zt=To(St),Nt=To(At),Bt=We?We.prototype:e,Tt=Bt?Bt.valueOf:e,Lt=Bt?Bt.toString:e;function $t(e){if(tl(e)&&!Mi(e)&&!(e instanceof Mt)){if(e instanceof Wt)return e;if(ze.call(e,"__wrapped__"))return Lo(e)}return new Wt(e)}var Pt=function(){function n(){}return function(t){if(!nl(t))return{};if(Ge)return Ge(t);n.prototype=t;var r=new n;return n.prototype=e,r}}();function Kt(){}function Wt(n,t){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=e}function Mt(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=d,this.__views__=[]}function qt(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function Qt(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function Gt(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function Zt(e){var n=-1,t=null==e?0:e.length;for(this.__data__=new Gt;++n<t;)this.add(e[n])}function Jt(e){var n=this.__data__=new Qt(e);this.size=n.size}function Ht(e,n){var t=Mi(e),r=!t&&Wi(e),a=!t&&!r&&Zi(e),o=!t&&!r&&!a&&fl(e),i=t||r||a||o,l=i?Hn(e.length,Ae):[],u=l.length;for(var c in e)!n&&!ze.call(e,c)||i&&("length"==c||a&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||bo(c,u))||l.push(c);return l}function Yt(n){var t=n.length;return t?n[Zr(0,t-1)]:e}function Xt(e,n){return zo(Oa(e),ur(n,0,e.length))}function er(e){return zo(Oa(e))}function nr(n,t,r){(r!==e&&!$i(n[t],r)||r===e&&!(t in n))&&ir(n,t,r)}function tr(n,t,r){var a=n[t];ze.call(n,t)&&$i(a,r)&&(r!==e||t in n)||ir(n,t,r)}function rr(e,n){for(var t=e.length;t--;)if($i(e[t][0],n))return t;return-1}function ar(e,n,t,r){return pr(e,function(e,a,o){n(r,e,t(e),o)}),r}function or(e,n){return e&&Da(n,Fl(n),e)}function ir(e,n,t){"__proto__"==n&&rn?rn(e,n,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[n]=t}function lr(n,t){for(var r=-1,a=t.length,o=ie(a),i=null==n;++r<a;)o[r]=i?e:El(n,t[r]);return o}function ur(n,t,r){return n==n&&(r!==e&&(n=n<=r?n:r),t!==e&&(n=n>=t?n:t)),n}function cr(n,t,r,a,o,i){var l,u=1&t,c=2&t,f=4&t;if(r&&(l=o?r(n,a,o,i):r(n)),l!==e)return l;if(!nl(n))return n;var s=Mi(n);if(s){if(l=function(e){var n=e.length,t=new e.constructor(n);return n&&"string"==typeof e[0]&&ze.call(e,"index")&&(t.index=e.index,t.input=e.input),t}(n),!u)return Oa(n,l)}else{var d=mo(n),p=d==_||d==b;if(Zi(n))return Ca(n,u);if(d==k||d==v||p&&!o){if(l=c||p?{}:yo(n),!u)return c?function(e,n){return Da(e,ho(e),n)}(n,function(e,n){return e&&Da(n,Rl(n),e)}(l,n)):function(e,n){return Da(e,vo(e),n)}(n,or(l,n))}else{if(!cn[d])return o?n:{};l=function(e,n,t){var r,a=e.constructor;switch(n){case O:return Ia(e);case m:case g:return new a(+e);case D:return function(e,n){var t=n?Ia(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.byteLength)}(e,t);case F:case R:case U:case V:case z:case N:case B:case T:case L:return ja(e,t);case w:return new a;case x:case E:return new a(e);case I:return function(e){var n=new e.constructor(e.source,ve.exec(e));return n.lastIndex=e.lastIndex,n}(e);case j:return new a;case S:return r=e,Tt?Ee(Tt.call(r)):{}}}(n,d,u)}}i||(i=new Jt);var h=i.get(n);if(h)return h;i.set(n,l),ll(n)?n.forEach(function(e){l.add(cr(e,t,r,e,n,i))}):rl(n)&&n.forEach(function(e,a){l.set(a,cr(e,t,r,a,n,i))});var y=s?e:(f?c?oo:ao:c?Rl:Fl)(n);return An(y||n,function(e,a){y&&(e=n[a=e]),tr(l,a,cr(e,t,r,a,n,i))}),l}function fr(n,t,r){var a=r.length;if(null==n)return!a;for(n=Ee(n);a--;){var o=r[a],i=t[o],l=n[o];if(l===e&&!(o in n)||!i(l))return!1}return!0}function sr(t,r,a){if("function"!=typeof t)throw new Oe(n);return Fo(function(){t.apply(e,a)},r)}function dr(e,n,t,r){var a=-1,o=Rn,i=!0,l=e.length,u=[],c=n.length;if(!l)return u;t&&(n=Vn(n,Xn(t))),r?(o=Un,i=!1):n.length>=200&&(o=nt,i=!1,n=new Zt(n));e:for(;++a<l;){var f=e[a],s=null==t?f:t(f);if(f=r||0!==f?f:0,i&&s==s){for(var d=c;d--;)if(n[d]===s)continue e;u.push(f)}else o(n,s,r)||u.push(f)}return u}$t.templateSettings={escape:G,evaluate:Z,interpolate:Y,variable:"",imports:{_:$t}},$t.prototype=Kt.prototype,$t.prototype.constructor=$t,Wt.prototype=Pt(Kt.prototype),Wt.prototype.constructor=Wt,Mt.prototype=Pt(Kt.prototype),Mt.prototype.constructor=Mt,qt.prototype.clear=function(){this.__data__=Ot?Ot(null):{},this.size=0},qt.prototype.delete=function(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n},qt.prototype.get=function(n){var r=this.__data__;if(Ot){var a=r[n];return a===t?e:a}return ze.call(r,n)?r[n]:e},qt.prototype.has=function(n){var t=this.__data__;return Ot?t[n]!==e:ze.call(t,n)},qt.prototype.set=function(n,r){var a=this.__data__;return this.size+=this.has(n)?0:1,a[n]=Ot&&r===e?t:r,this},Qt.prototype.clear=function(){this.__data__=[],this.size=0},Qt.prototype.delete=function(e){var n=this.__data__,t=rr(n,e);return!(t<0||(t==n.length-1?n.pop():Je.call(n,t,1),--this.size,0))},Qt.prototype.get=function(n){var t=this.__data__,r=rr(t,n);return r<0?e:t[r][1]},Qt.prototype.has=function(e){return rr(this.__data__,e)>-1},Qt.prototype.set=function(e,n){var t=this.__data__,r=rr(t,e);return r<0?(++this.size,t.push([e,n])):t[r][1]=n,this},Gt.prototype.clear=function(){this.size=0,this.__data__={hash:new qt,map:new(jt||Qt),string:new qt}},Gt.prototype.delete=function(e){var n=fo(this,e).delete(e);return this.size-=n?1:0,n},Gt.prototype.get=function(e){return fo(this,e).get(e)},Gt.prototype.has=function(e){return fo(this,e).has(e)},Gt.prototype.set=function(e,n){var t=fo(this,e),r=t.size;return t.set(e,n),this.size+=t.size==r?0:1,this},Zt.prototype.add=Zt.prototype.push=function(e){return this.__data__.set(e,t),this},Zt.prototype.has=function(e){return this.__data__.has(e)},Jt.prototype.clear=function(){this.__data__=new Qt,this.size=0},Jt.prototype.delete=function(e){var n=this.__data__,t=n.delete(e);return this.size=n.size,t},Jt.prototype.get=function(e){return this.__data__.get(e)},Jt.prototype.has=function(e){return this.__data__.has(e)},Jt.prototype.set=function(e,n){var t=this.__data__;if(t instanceof Qt){var r=t.__data__;if(!jt||r.length<199)return r.push([e,n]),this.size=++t.size,this;t=this.__data__=new Gt(r)}return t.set(e,n),this.size=t.size,this};var pr=Ua(wr),vr=Ua(xr,!0);function hr(e,n){var t=!0;return pr(e,function(e,r,a){return t=!!n(e,r,a)}),t}function mr(n,t,r){for(var a=-1,o=n.length;++a<o;){var i=n[a],l=t(i);if(null!=l&&(u===e?l==l&&!cl(l):r(l,u)))var u=l,c=i}return c}function gr(e,n){var t=[];return pr(e,function(e,r,a){n(e,r,a)&&t.push(e)}),t}function yr(e,n,t,r,a){var o=-1,i=e.length;for(t||(t=_o),a||(a=[]);++o<i;){var l=e[o];n>0&&t(l)?n>1?yr(l,n-1,t,r,a):zn(a,l):r||(a[a.length]=l)}return a}var _r=Va(),br=Va(!0);function wr(e,n){return e&&_r(e,n,Fl)}function xr(e,n){return e&&br(e,n,Fl)}function kr(e,n){return Fn(n,function(n){return Yi(e[n])})}function Cr(n,t){for(var r=0,a=(t=ba(t,n)).length;null!=n&&r<a;)n=n[Bo(t[r++])];return r&&r==a?n:e}function Ir(e,n,t){var r=n(e);return Mi(e)?r:zn(r,t(e))}function jr(n){return null==n?n===e?"[object Undefined]":"[object Null]":nn&&nn in Ee(n)?function(n){var t=ze.call(n,nn),r=n[nn];try{n[nn]=e;var a=!0}catch(e){}var o=Te.call(n);return a&&(t?n[nn]=r:delete n[nn]),o}(n):function(e){return Te.call(e)}(n)}function Er(e,n){return e>n}function Sr(e,n){return null!=e&&ze.call(e,n)}function Ar(e,n){return null!=e&&n in Ee(e)}function Or(n,t,r){for(var a=r?Un:Rn,o=n[0].length,i=n.length,l=i,u=ie(i),c=1/0,f=[];l--;){var s=n[l];l&&t&&(s=Vn(s,Xn(t))),c=bt(s.length,c),u[l]=!r&&(t||o>=120&&s.length>=120)?new Zt(l&&s):e}s=n[0];var d=-1,p=u[0];e:for(;++d<o&&f.length<c;){var v=s[d],h=t?t(v):v;if(v=r||0!==v?v:0,!(p?nt(p,h):a(f,h,r))){for(l=i;--l;){var m=u[l];if(!(m?nt(m,h):a(n[l],h,r)))continue e}p&&p.push(h),f.push(v)}}return f}function Dr(n,t,r){var a=null==(n=Ao(n,t=ba(t,n)))?n:n[Bo(Ho(t))];return null==a?e:En(a,n,r)}function Fr(e){return tl(e)&&jr(e)==v}function Rr(n,t,r,a,o){return n===t||(null==n||null==t||!tl(n)&&!tl(t)?n!=n&&t!=t:function(n,t,r,a,o,i){var l=Mi(n),u=Mi(t),c=l?h:mo(n),f=u?h:mo(t),s=(c=c==v?k:c)==k,d=(f=f==v?k:f)==k,p=c==f;if(p&&Zi(n)){if(!Zi(t))return!1;l=!0,s=!1}if(p&&!s)return i||(i=new Jt),l||fl(n)?to(n,t,r,a,o,i):function(e,n,t,r,a,o,i){switch(t){case D:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case O:return!(e.byteLength!=n.byteLength||!o(new Me(e),new Me(n)));case m:case g:case x:return $i(+e,+n);case y:return e.name==n.name&&e.message==n.message;case I:case E:return e==n+"";case w:var l=ut;case j:var u=1&r;if(l||(l=st),e.size!=n.size&&!u)return!1;var c=i.get(e);if(c)return c==n;r|=2,i.set(e,n);var f=to(l(e),l(n),r,a,o,i);return i.delete(e),f;case S:if(Tt)return Tt.call(e)==Tt.call(n)}return!1}(n,t,c,r,a,o,i);if(!(1&r)){var _=s&&ze.call(n,"__wrapped__"),b=d&&ze.call(t,"__wrapped__");if(_||b){var C=_?n.value():n,A=b?t.value():t;return i||(i=new Jt),o(C,A,r,a,i)}}return!!p&&(i||(i=new Jt),function(n,t,r,a,o,i){var l=1&r,u=ao(n),c=u.length,f=ao(t),s=f.length;if(c!=s&&!l)return!1;for(var d=c;d--;){var p=u[d];if(!(l?p in t:ze.call(t,p)))return!1}var v=i.get(n),h=i.get(t);if(v&&h)return v==t&&h==n;var m=!0;i.set(n,t),i.set(t,n);for(var g=l;++d<c;){var y=n[p=u[d]],_=t[p];if(a)var b=l?a(_,y,p,t,n,i):a(y,_,p,n,t,i);if(!(b===e?y===_||o(y,_,r,a,i):b)){m=!1;break}g||(g="constructor"==p)}if(m&&!g){var w=n.constructor,x=t.constructor;w==x||!("constructor"in n)||!("constructor"in t)||"function"==typeof w&&w instanceof w&&"function"==typeof x&&x instanceof x||(m=!1)}return i.delete(n),i.delete(t),m}(n,t,r,a,o,i))}(n,t,r,a,Rr,o))}function Ur(n,t,r,a){var o=r.length,i=o,l=!a;if(null==n)return!i;for(n=Ee(n);o--;){var u=r[o];if(l&&u[2]?u[1]!==n[u[0]]:!(u[0]in n))return!1}for(;++o<i;){var c=(u=r[o])[0],f=n[c],s=u[1];if(l&&u[2]){if(f===e&&!(c in n))return!1}else{var d=new Jt;if(a)var p=a(f,s,c,n,t,d);if(!(p===e?Rr(s,f,3,a,d):p))return!1}}return!0}function Vr(e){return!(!nl(e)||(n=e,Be&&Be in n))&&(Yi(e)?Pe:ge).test(To(e));var n}function zr(e){return"function"==typeof e?e:null==e?au:"object"==typeof e?Mi(e)?Pr(e[0],e[1]):$r(e):pu(e)}function Nr(e){if(!Io(e))return yt(e);var n=[];for(var t in Ee(e))ze.call(e,t)&&"constructor"!=t&&n.push(t);return n}function Br(e){if(!nl(e))return function(e){var n=[];if(null!=e)for(var t in Ee(e))n.push(t);return n}(e);var n=Io(e),t=[];for(var r in e)("constructor"!=r||!n&&ze.call(e,r))&&t.push(r);return t}function Tr(e,n){return e<n}function Lr(e,n){var t=-1,r=Qi(e)?ie(e.length):[];return pr(e,function(e,a,o){r[++t]=n(e,a,o)}),r}function $r(e){var n=so(e);return 1==n.length&&n[0][2]?Eo(n[0][0],n[0][1]):function(t){return t===e||Ur(t,e,n)}}function Pr(n,t){return xo(n)&&jo(t)?Eo(Bo(n),t):function(r){var a=El(r,n);return a===e&&a===t?Sl(r,n):Rr(t,a,3)}}function Kr(n,t,r,a,o){n!==t&&_r(t,function(i,l){if(o||(o=new Jt),nl(i))!function(n,t,r,a,o,i,l){var u=Oo(n,r),c=Oo(t,r),f=l.get(c);if(f)nr(n,r,f);else{var s=i?i(u,c,r+"",n,t,l):e,d=s===e;if(d){var p=Mi(c),v=!p&&Zi(c),h=!p&&!v&&fl(c);s=c,p||v||h?Mi(u)?s=u:Gi(u)?s=Oa(u):v?(d=!1,s=Ca(c,!0)):h?(d=!1,s=ja(c,!0)):s=[]:ol(c)||Wi(c)?(s=u,Wi(u)?s=yl(u):nl(u)&&!Yi(u)||(s=yo(c))):d=!1}d&&(l.set(c,s),o(s,c,a,i,l),l.delete(c)),nr(n,r,s)}}(n,t,l,r,Kr,a,o);else{var u=a?a(Oo(n,l),i,l+"",n,t,o):e;u===e&&(u=i),nr(n,l,u)}},Rl)}function Wr(n,t){var r=n.length;if(r)return bo(t+=t<0?r:0,r)?n[t]:e}function Mr(e,n,t){n=n.length?Vn(n,function(e){return Mi(e)?function(n){return Cr(n,1===e.length?e[0]:e)}:e}):[au];var r=-1;n=Vn(n,Xn(co()));var a=Lr(e,function(e,t,a){var o=Vn(n,function(n){return n(e)});return{criteria:o,index:++r,value:e}});return function(e,n){var t=e.length;for(e.sort(n);t--;)e[t]=e[t].value;return e}(a,function(e,n){return function(e,n,t){for(var r=-1,a=e.criteria,o=n.criteria,i=a.length,l=t.length;++r<i;){var u=Ea(a[r],o[r]);if(u)return r>=l?u:u*("desc"==t[r]?-1:1)}return e.index-n.index}(e,n,t)})}function qr(e,n,t){for(var r=-1,a=n.length,o={};++r<a;){var i=n[r],l=Cr(e,i);t(l,i)&&ea(o,ba(i,e),l)}return o}function Qr(e,n,t,r){var a=r?Wn:Kn,o=-1,i=n.length,l=e;for(e===n&&(n=Oa(n)),t&&(l=Vn(e,Xn(t)));++o<i;)for(var u=0,c=n[o],f=t?t(c):c;(u=a(l,f,u,r))>-1;)l!==e&&Je.call(l,u,1),Je.call(e,u,1);return e}function Gr(e,n){for(var t=e?n.length:0,r=t-1;t--;){var a=n[t];if(t==r||a!==o){var o=a;bo(a)?Je.call(e,a,1):da(e,a)}}return e}function Zr(e,n){return e+gn(kt()*(n-e+1))}function Jr(e,n){var t="";if(!e||n<1||n>f)return t;do{n%2&&(t+=e),(n=gn(n/2))&&(e+=e)}while(n);return t}function Hr(e,n){return Ro(So(e,n,au),e+"")}function Yr(e){return Yt($l(e))}function Xr(e,n){var t=$l(e);return zo(t,ur(n,0,t.length))}function ea(n,t,r,a){if(!nl(n))return n;for(var o=-1,i=(t=ba(t,n)).length,l=i-1,u=n;null!=u&&++o<i;){var c=Bo(t[o]),f=r;if("__proto__"===c||"constructor"===c||"prototype"===c)return n;if(o!=l){var s=u[c];(f=a?a(s,c,u):e)===e&&(f=nl(s)?s:bo(t[o+1])?[]:{})}tr(u,c,f),u=u[c]}return n}var na=Dt?function(e,n){return Dt.set(e,n),e}:au,ta=rn?function(e,n){return rn(e,"toString",{configurable:!0,enumerable:!1,value:nu(n),writable:!0})}:au;function ra(e){return zo($l(e))}function aa(e,n,t){var r=-1,a=e.length;n<0&&(n=-n>a?0:a+n),(t=t>a?a:t)<0&&(t+=a),a=n>t?0:t-n>>>0,n>>>=0;for(var o=ie(a);++r<a;)o[r]=e[r+n];return o}function oa(e,n){var t;return pr(e,function(e,r,a){return!(t=n(e,r,a))}),!!t}function ia(e,n,t){var r=0,a=null==e?r:e.length;if("number"==typeof n&&n==n&&a<=2147483647){for(;r<a;){var o=r+a>>>1,i=e[o];null!==i&&!cl(i)&&(t?i<=n:i<n)?r=o+1:a=o}return a}return la(e,n,au,t)}function la(n,t,r,a){var o=0,i=null==n?0:n.length;if(0===i)return 0;for(var l=(t=r(t))!=t,u=null===t,c=cl(t),f=t===e;o<i;){var s=gn((o+i)/2),d=r(n[s]),p=d!==e,v=null===d,h=d==d,m=cl(d);if(l)var g=a||h;else g=f?h&&(a||p):u?h&&p&&(a||!v):c?h&&p&&!v&&(a||!m):!v&&!m&&(a?d<=t:d<t);g?o=s+1:i=s}return bt(i,4294967294)}function ua(e,n){for(var t=-1,r=e.length,a=0,o=[];++t<r;){var i=e[t],l=n?n(i):i;if(!t||!$i(l,u)){var u=l;o[a++]=0===i?0:i}}return o}function ca(e){return"number"==typeof e?e:cl(e)?s:+e}function fa(e){if("string"==typeof e)return e;if(Mi(e))return Vn(e,fa)+"";if(cl(e))return Lt?Lt.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}function sa(e,n,t){var r=-1,a=Rn,o=e.length,i=!0,l=[],u=l;if(t)i=!1,a=Un;else if(o>=200){var c=n?null:Ja(e);if(c)return st(c);i=!1,a=nt,u=new Zt}else u=n?[]:l;e:for(;++r<o;){var f=e[r],s=n?n(f):f;if(f=t||0!==f?f:0,i&&s==s){for(var d=u.length;d--;)if(u[d]===s)continue e;n&&u.push(s),l.push(f)}else a(u,s,t)||(u!==l&&u.push(s),l.push(f))}return l}function da(e,n){return null==(e=Ao(e,n=ba(n,e)))||delete e[Bo(Ho(n))]}function pa(e,n,t,r){return ea(e,n,t(Cr(e,n)),r)}function va(e,n,t,r){for(var a=e.length,o=r?a:-1;(r?o--:++o<a)&&n(e[o],o,e););return t?aa(e,r?0:o,r?o+1:a):aa(e,r?o+1:0,r?a:o)}function ha(e,n){var t=e;return t instanceof Mt&&(t=t.value()),Nn(n,function(e,n){return n.func.apply(n.thisArg,zn([e],n.args))},t)}function ma(e,n,t){var r=e.length;if(r<2)return r?sa(e[0]):[];for(var a=-1,o=ie(r);++a<r;)for(var i=e[a],l=-1;++l<r;)l!=a&&(o[a]=dr(o[a]||i,e[l],n,t));return sa(yr(o,1),n,t)}function ga(n,t,r){for(var a=-1,o=n.length,i=t.length,l={};++a<o;){var u=a<i?t[a]:e;r(l,n[a],u)}return l}function ya(e){return Gi(e)?e:[]}function _a(e){return"function"==typeof e?e:au}function ba(e,n){return Mi(e)?e:xo(e,n)?[e]:No(_l(e))}var wa=Hr;function xa(n,t,r){var a=n.length;return r=r===e?a:r,!t&&r>=a?n:aa(n,t,r)}var ka=fn||function(e){return hn.clearTimeout(e)};function Ca(e,n){if(n)return e.slice();var t=e.length,r=qe?qe(t):new e.constructor(t);return e.copy(r),r}function Ia(e){var n=new e.constructor(e.byteLength);return new Me(n).set(new Me(e)),n}function ja(e,n){var t=n?Ia(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}function Ea(n,t){if(n!==t){var r=n!==e,a=null===n,o=n==n,i=cl(n),l=t!==e,u=null===t,c=t==t,f=cl(t);if(!u&&!f&&!i&&n>t||i&&l&&c&&!u&&!f||a&&l&&c||!r&&c||!o)return 1;if(!a&&!i&&!f&&n<t||f&&r&&o&&!a&&!i||u&&r&&o||!l&&o||!c)return-1}return 0}function Sa(e,n,t,r){for(var a=-1,o=e.length,i=t.length,l=-1,u=n.length,c=_t(o-i,0),f=ie(u+c),s=!r;++l<u;)f[l]=n[l];for(;++a<i;)(s||a<o)&&(f[t[a]]=e[a]);for(;c--;)f[l++]=e[a++];return f}function Aa(e,n,t,r){for(var a=-1,o=e.length,i=-1,l=t.length,u=-1,c=n.length,f=_t(o-l,0),s=ie(f+c),d=!r;++a<f;)s[a]=e[a];for(var p=a;++u<c;)s[p+u]=n[u];for(;++i<l;)(d||a<o)&&(s[p+t[i]]=e[a++]);return s}function Oa(e,n){var t=-1,r=e.length;for(n||(n=ie(r));++t<r;)n[t]=e[t];return n}function Da(n,t,r,a){var o=!r;r||(r={});for(var i=-1,l=t.length;++i<l;){var u=t[i],c=a?a(r[u],n[u],u,r,n):e;c===e&&(c=n[u]),o?ir(r,u,c):tr(r,u,c)}return r}function Fa(e,n){return function(t,r){var a=Mi(t)?Sn:ar,o=n?n():{};return a(t,e,co(r,2),o)}}function Ra(n){return Hr(function(t,r){var a=-1,o=r.length,i=o>1?r[o-1]:e,l=o>2?r[2]:e;for(i=n.length>3&&"function"==typeof i?(o--,i):e,l&&wo(r[0],r[1],l)&&(i=o<3?e:i,o=1),t=Ee(t);++a<o;){var u=r[a];u&&n(t,u,a,i)}return t})}function Ua(e,n){return function(t,r){if(null==t)return t;if(!Qi(t))return e(t,r);for(var a=t.length,o=n?a:-1,i=Ee(t);(n?o--:++o<a)&&!1!==r(i[o],o,i););return t}}function Va(e){return function(n,t,r){for(var a=-1,o=Ee(n),i=r(n),l=i.length;l--;){var u=i[e?l:++a];if(!1===t(o[u],u,o))break}return n}}function za(n){return function(t){var r=lt(t=_l(t))?vt(t):e,a=r?r[0]:t.charAt(0),o=r?xa(r,1).join(""):t.slice(1);return a[n]()+o}}function Na(e){return function(n){return Nn(Yl(Wl(n).replace(Xe,"")),e,"")}}function Ba(e){return function(){var n=arguments;switch(n.length){case 0:return new e;case 1:return new e(n[0]);case 2:return new e(n[0],n[1]);case 3:return new e(n[0],n[1],n[2]);case 4:return new e(n[0],n[1],n[2],n[3]);case 5:return new e(n[0],n[1],n[2],n[3],n[4]);case 6:return new e(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new e(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var t=Pt(e.prototype),r=e.apply(t,n);return nl(r)?r:t}}function Ta(n){return function(t,r,a){var o=Ee(t);if(!Qi(t)){var i=co(r,3);t=Fl(t),r=function(e){return i(o[e],e,o)}}var l=n(t,r,a);return l>-1?o[i?t[l]:l]:e}}function La(t){return ro(function(r){var a=r.length,o=a,i=Wt.prototype.thru;for(t&&r.reverse();o--;){var l=r[o];if("function"!=typeof l)throw new Oe(n);if(i&&!u&&"wrapper"==lo(l))var u=new Wt([],!0)}for(o=u?o:a;++o<a;){var c=lo(l=r[o]),f="wrapper"==c?io(l):e;u=f&&ko(f[0])&&424==f[1]&&!f[4].length&&1==f[9]?u[lo(f[0])].apply(u,f[3]):1==l.length&&ko(l)?u[c]():u.thru(l)}return function(){var e=arguments,n=e[0];if(u&&1==e.length&&Mi(n))return u.plant(n).value();for(var t=0,o=a?r[t].apply(this,e):n;++t<a;)o=r[t].call(this,o);return o}})}function $a(n,t,r,a,o,i,u,c,f,s){var d=t&l,p=1&t,v=2&t,h=24&t,m=512&t,g=v?e:Ba(n);return function l(){for(var y=arguments.length,_=ie(y),b=y;b--;)_[b]=arguments[b];if(h)var w=uo(l),x=function(e,n){for(var t=e.length,r=0;t--;)e[t]===n&&++r;return r}(_,w);if(a&&(_=Sa(_,a,o,h)),i&&(_=Aa(_,i,u,h)),y-=x,h&&y<s){var k=ft(_,w);return Ga(n,t,$a,l.placeholder,r,_,k,c,f,s-y)}var C=p?r:this,I=v?C[n]:n;return y=_.length,c?_=function(n,t){for(var r=n.length,a=bt(t.length,r),o=Oa(n);a--;){var i=t[a];n[a]=bo(i,r)?o[i]:e}return n}(_,c):m&&y>1&&_.reverse(),d&&f<y&&(_.length=f),this&&this!==hn&&this instanceof l&&(I=g||Ba(I)),I.apply(C,_)}}function Pa(e,n){return function(t,r){return function(e,n,t,r){return wr(e,function(e,a,o){n(r,t(e),a,o)}),r}(t,e,n(r),{})}}function Ka(n,t){return function(r,a){var o;if(r===e&&a===e)return t;if(r!==e&&(o=r),a!==e){if(o===e)return a;"string"==typeof r||"string"==typeof a?(r=fa(r),a=fa(a)):(r=ca(r),a=ca(a)),o=n(r,a)}return o}}function Wa(e){return ro(function(n){return n=Vn(n,Xn(co())),Hr(function(t){var r=this;return e(n,function(e){return En(e,r,t)})})})}function Ma(n,t){var r=(t=t===e?" ":fa(t)).length;if(r<2)return r?Jr(t,n):t;var a=Jr(t,mn(n/pt(t)));return lt(t)?xa(vt(a),0,n).join(""):a.slice(0,n)}function qa(n){return function(t,r,a){return a&&"number"!=typeof a&&wo(t,r,a)&&(r=a=e),t=vl(t),r===e?(r=t,t=0):r=vl(r),function(e,n,t,r){for(var a=-1,o=_t(mn((n-e)/(t||1)),0),i=ie(o);o--;)i[r?o:++a]=e,e+=t;return i}(t,r,a=a===e?t<r?1:-1:vl(a),n)}}function Qa(e){return function(n,t){return"string"==typeof n&&"string"==typeof t||(n=gl(n),t=gl(t)),e(n,t)}}function Ga(n,t,r,a,l,u,c,f,s,d){var p=8&t;t|=p?o:i,4&(t&=~(p?i:o))||(t&=-4);var v=[n,t,l,p?u:e,p?c:e,p?e:u,p?e:c,f,s,d],h=r.apply(e,v);return ko(n)&&Do(h,v),h.placeholder=a,Uo(h,n,t)}function Za(e){var n=je[e];return function(e,t){if(e=gl(e),(t=null==t?0:bt(hl(t),292))&&Ln(e)){var r=(_l(e)+"e").split("e");return+((r=(_l(n(r[0]+"e"+(+r[1]+t)))+"e").split("e"))[0]+"e"+(+r[1]-t))}return n(e)}}var Ja=St&&1/st(new St([,-0]))[1]==c?function(e){return new St(e)}:cu;function Ha(e){return function(n){var t=mo(n);return t==w?ut(n):t==j?dt(n):function(e,n){return Vn(n,function(n){return[n,e[n]]})}(n,e(n))}}function Ya(t,c,f,s,d,p,v,h){var m=2&c;if(!m&&"function"!=typeof t)throw new Oe(n);var g=s?s.length:0;if(g||(c&=-97,s=d=e),v=v===e?v:_t(hl(v),0),h=h===e?h:hl(h),g-=d?d.length:0,c&i){var y=s,_=d;s=d=e}var b=m?e:io(t),w=[t,c,f,s,d,y,_,p,v,h];if(b&&function(e,n){var t=e[1],a=n[1],o=t|a,i=o<131,c=a==l&&8==t||a==l&&t==u&&e[7].length<=n[8]||384==a&&n[7].length<=n[8]&&8==t;if(!i&&!c)return e;1&a&&(e[2]=n[2],o|=1&t?0:4);var f=n[3];if(f){var s=e[3];e[3]=s?Sa(s,f,n[4]):f,e[4]=s?ft(e[3],r):n[4]}(f=n[5])&&(s=e[5],e[5]=s?Aa(s,f,n[6]):f,e[6]=s?ft(e[5],r):n[6]),(f=n[7])&&(e[7]=f),a&l&&(e[8]=null==e[8]?n[8]:bt(e[8],n[8])),null==e[9]&&(e[9]=n[9]),e[0]=n[0],e[1]=o}(w,b),t=w[0],c=w[1],f=w[2],s=w[3],d=w[4],!(h=w[9]=w[9]===e?m?0:t.length:_t(w[9]-g,0))&&24&c&&(c&=-25),c&&1!=c)x=8==c||c==a?function(n,t,r){var a=Ba(n);return function o(){for(var i=arguments.length,l=ie(i),u=i,c=uo(o);u--;)l[u]=arguments[u];var f=i<3&&l[0]!==c&&l[i-1]!==c?[]:ft(l,c);return(i-=f.length)<r?Ga(n,t,$a,o.placeholder,e,l,f,e,e,r-i):En(this&&this!==hn&&this instanceof o?a:n,this,l)}}(t,c,h):c!=o&&33!=c||d.length?$a.apply(e,w):function(e,n,t,r){var a=1&n,o=Ba(e);return function n(){for(var i=-1,l=arguments.length,u=-1,c=r.length,f=ie(c+l),s=this&&this!==hn&&this instanceof n?o:e;++u<c;)f[u]=r[u];for(;l--;)f[u++]=arguments[++i];return En(s,a?t:this,f)}}(t,c,f,s);else var x=function(e,n,t){var r=1&n,a=Ba(e);return function n(){return(this&&this!==hn&&this instanceof n?a:e).apply(r?t:this,arguments)}}(t,c,f);return Uo((b?na:Do)(x,w),t,c)}function Xa(n,t,r,a){return n===e||$i(n,Re[r])&&!ze.call(a,r)?t:n}function eo(n,t,r,a,o,i){return nl(n)&&nl(t)&&(i.set(t,n),Kr(n,t,e,eo,i),i.delete(t)),n}function no(n){return ol(n)?e:n}function to(n,t,r,a,o,i){var l=1&r,u=n.length,c=t.length;if(u!=c&&!(l&&c>u))return!1;var f=i.get(n),s=i.get(t);if(f&&s)return f==t&&s==n;var d=-1,p=!0,v=2&r?new Zt:e;for(i.set(n,t),i.set(t,n);++d<u;){var h=n[d],m=t[d];if(a)var g=l?a(m,h,d,t,n,i):a(h,m,d,n,t,i);if(g!==e){if(g)continue;p=!1;break}if(v){if(!Tn(t,function(e,n){if(!nt(v,n)&&(h===e||o(h,e,r,a,i)))return v.push(n)})){p=!1;break}}else if(h!==m&&!o(h,m,r,a,i)){p=!1;break}}return i.delete(n),i.delete(t),p}function ro(n){return Ro(So(n,e,qo),n+"")}function ao(e){return Ir(e,Fl,vo)}function oo(e){return Ir(e,Rl,ho)}var io=Dt?function(e){return Dt.get(e)}:cu;function lo(e){for(var n=e.name+"",t=Ft[n],r=ze.call(Ft,n)?t.length:0;r--;){var a=t[r],o=a.func;if(null==o||o==e)return a.name}return n}function uo(e){return(ze.call($t,"placeholder")?$t:e).placeholder}function co(){var e=$t.iteratee||ou;return e=e===ou?zr:e,arguments.length?e(arguments[0],arguments[1]):e}function fo(e,n){var t,r,a=e.__data__;return("string"==(r=typeof(t=n))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t)?a["string"==typeof n?"string":"hash"]:a.map}function so(e){for(var n=Fl(e),t=n.length;t--;){var r=n[t],a=e[r];n[t]=[r,a,jo(a)]}return n}function po(n,t){var r=function(n,t){return null==n?e:n[t]}(n,t);return Vr(r)?r:e}var vo=_n?function(e){return null==e?[]:(e=Ee(e),Fn(_n(e),function(n){return Ze.call(e,n)}))}:mu,ho=_n?function(e){for(var n=[];e;)zn(n,vo(e)),e=Qe(e);return n}:mu,mo=jr;function go(e,n,t){for(var r=-1,a=(n=ba(n,e)).length,o=!1;++r<a;){var i=Bo(n[r]);if(!(o=null!=e&&t(e,i)))break;e=e[i]}return o||++r!=a?o:!!(a=null==e?0:e.length)&&el(a)&&bo(i,a)&&(Mi(e)||Wi(e))}function yo(e){return"function"!=typeof e.constructor||Io(e)?{}:Pt(Qe(e))}function _o(e){return Mi(e)||Wi(e)||!!(He&&e&&e[He])}function bo(e,n){var t=typeof e;return!!(n=null==n?f:n)&&("number"==t||"symbol"!=t&&_e.test(e))&&e>-1&&e%1==0&&e<n}function wo(e,n,t){if(!nl(t))return!1;var r=typeof n;return!!("number"==r?Qi(t)&&bo(n,t.length):"string"==r&&n in t)&&$i(t[n],e)}function xo(e,n){if(Mi(e))return!1;var t=typeof e;return!("number"!=t&&"symbol"!=t&&"boolean"!=t&&null!=e&&!cl(e))||ne.test(e)||!ee.test(e)||null!=n&&e in Ee(n)}function ko(e){var n=lo(e),t=$t[n];if("function"!=typeof t||!(n in Mt.prototype))return!1;if(e===t)return!0;var r=io(t);return!!r&&e===r[0]}(It&&mo(new It(new ArrayBuffer(1)))!=D||jt&&mo(new jt)!=w||Et&&mo(Et.resolve())!=C||St&&mo(new St)!=j||At&&mo(new At)!=A)&&(mo=function(n){var t=jr(n),r=t==k?n.constructor:e,a=r?To(r):"";if(a)switch(a){case Rt:return D;case Ut:return w;case Vt:return C;case zt:return j;case Nt:return A}return t});var Co=Ue?Yi:gu;function Io(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||Re)}function jo(e){return e==e&&!nl(e)}function Eo(n,t){return function(r){return null!=r&&r[n]===t&&(t!==e||n in Ee(r))}}function So(n,t,r){return t=_t(t===e?n.length-1:t,0),function(){for(var e=arguments,a=-1,o=_t(e.length-t,0),i=ie(o);++a<o;)i[a]=e[t+a];a=-1;for(var l=ie(t+1);++a<t;)l[a]=e[a];return l[t]=r(i),En(n,this,l)}}function Ao(e,n){return n.length<2?e:Cr(e,aa(n,0,-1))}function Oo(e,n){if(("constructor"!==n||"function"!=typeof e[n])&&"__proto__"!=n)return e[n]}var Do=Vo(na),Fo=vn||function(e,n){return hn.setTimeout(e,n)},Ro=Vo(ta);function Uo(e,n,t){var r=n+"";return Ro(e,function(e,n){var t=n.length;if(!t)return e;var r=t-1;return n[r]=(t>1?"& ":"")+n[r],n=n.join(t>2?", ":" "),e.replace(le,"{\n/* [wrapped with "+n+"] */\n")}(r,function(e,n){return An(p,function(t){var r="_."+t[0];n&t[1]&&!Rn(e,r)&&e.push(r)}),e.sort()}(function(e){var n=e.match(ue);return n?n[1].split(ce):[]}(r),t)))}function Vo(n){var t=0,r=0;return function(){var a=wt(),o=16-(a-r);if(r=a,o>0){if(++t>=800)return arguments[0]}else t=0;return n.apply(e,arguments)}}function zo(n,t){var r=-1,a=n.length,o=a-1;for(t=t===e?a:t;++r<t;){var i=Zr(r,o),l=n[i];n[i]=n[r],n[r]=l}return n.length=t,n}var No=function(e){var n=Vi(e,function(e){return 500===t.size&&t.clear(),e}),t=n.cache;return n}(function(e){var n=[];return 46===e.charCodeAt(0)&&n.push(""),e.replace(te,function(e,t,r,a){n.push(r?a.replace(de,"$1"):t||e)}),n});function Bo(e){if("string"==typeof e||cl(e))return e;var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}function To(e){if(null!=e){try{return Ve.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Lo(e){if(e instanceof Mt)return e.clone();var n=new Wt(e.__wrapped__,e.__chain__);return n.__actions__=Oa(e.__actions__),n.__index__=e.__index__,n.__values__=e.__values__,n}var $o=Hr(function(e,n){return Gi(e)?dr(e,yr(n,1,Gi,!0)):[]}),Po=Hr(function(n,t){var r=Ho(t);return Gi(r)&&(r=e),Gi(n)?dr(n,yr(t,1,Gi,!0),co(r,2)):[]}),Ko=Hr(function(n,t){var r=Ho(t);return Gi(r)&&(r=e),Gi(n)?dr(n,yr(t,1,Gi,!0),e,r):[]});function Wo(e,n,t){var r=null==e?0:e.length;if(!r)return-1;var a=null==t?0:hl(t);return a<0&&(a=_t(r+a,0)),Pn(e,co(n,3),a)}function Mo(n,t,r){var a=null==n?0:n.length;if(!a)return-1;var o=a-1;return r!==e&&(o=hl(r),o=r<0?_t(a+o,0):bt(o,a-1)),Pn(n,co(t,3),o,!0)}function qo(e){return null!=e&&e.length?yr(e,1):[]}function Qo(n){return n&&n.length?n[0]:e}var Go=Hr(function(e){var n=Vn(e,ya);return n.length&&n[0]===e[0]?Or(n):[]}),Zo=Hr(function(n){var t=Ho(n),r=Vn(n,ya);return t===Ho(r)?t=e:r.pop(),r.length&&r[0]===n[0]?Or(r,co(t,2)):[]}),Jo=Hr(function(n){var t=Ho(n),r=Vn(n,ya);return(t="function"==typeof t?t:e)&&r.pop(),r.length&&r[0]===n[0]?Or(r,e,t):[]});function Ho(n){var t=null==n?0:n.length;return t?n[t-1]:e}var Yo=Hr(Xo);function Xo(e,n){return e&&e.length&&n&&n.length?Qr(e,n):e}var ei=ro(function(e,n){var t=null==e?0:e.length,r=lr(e,n);return Gr(e,Vn(n,function(e){return bo(e,t)?+e:e}).sort(Ea)),r});function ni(e){return null==e?e:Ct.call(e)}var ti=Hr(function(e){return sa(yr(e,1,Gi,!0))}),ri=Hr(function(n){var t=Ho(n);return Gi(t)&&(t=e),sa(yr(n,1,Gi,!0),co(t,2))}),ai=Hr(function(n){var t=Ho(n);return t="function"==typeof t?t:e,sa(yr(n,1,Gi,!0),e,t)});function oi(e){if(!e||!e.length)return[];var n=0;return e=Fn(e,function(e){if(Gi(e))return n=_t(e.length,n),!0}),Hn(n,function(n){return Vn(e,Qn(n))})}function ii(n,t){if(!n||!n.length)return[];var r=oi(n);return null==t?r:Vn(r,function(n){return En(t,e,n)})}var li=Hr(function(e,n){return Gi(e)?dr(e,n):[]}),ui=Hr(function(e){return ma(Fn(e,Gi))}),ci=Hr(function(n){var t=Ho(n);return Gi(t)&&(t=e),ma(Fn(n,Gi),co(t,2))}),fi=Hr(function(n){var t=Ho(n);return t="function"==typeof t?t:e,ma(Fn(n,Gi),e,t)}),si=Hr(oi),di=Hr(function(n){var t=n.length,r=t>1?n[t-1]:e;return r="function"==typeof r?(n.pop(),r):e,ii(n,r)});function pi(e){var n=$t(e);return n.__chain__=!0,n}function vi(e,n){return n(e)}var hi=ro(function(n){var t=n.length,r=t?n[0]:0,a=this.__wrapped__,o=function(e){return lr(e,n)};return!(t>1||this.__actions__.length)&&a instanceof Mt&&bo(r)?((a=a.slice(r,+r+(t?1:0))).__actions__.push({func:vi,args:[o],thisArg:e}),new Wt(a,this.__chain__).thru(function(n){return t&&!n.length&&n.push(e),n})):this.thru(o)}),mi=Fa(function(e,n,t){ze.call(e,t)?++e[t]:ir(e,t,1)}),gi=Ta(Wo),yi=Ta(Mo);function _i(e,n){return(Mi(e)?An:pr)(e,co(n,3))}function bi(e,n){return(Mi(e)?On:vr)(e,co(n,3))}var wi=Fa(function(e,n,t){ze.call(e,t)?e[t].push(n):ir(e,t,[n])}),xi=Hr(function(e,n,t){var r=-1,a="function"==typeof n,o=Qi(e)?ie(e.length):[];return pr(e,function(e){o[++r]=a?En(n,e,t):Dr(e,n,t)}),o}),ki=Fa(function(e,n,t){ir(e,t,n)});function Ci(e,n){return(Mi(e)?Vn:Lr)(e,co(n,3))}var Ii=Fa(function(e,n,t){e[t?0:1].push(n)},function(){return[[],[]]}),ji=Hr(function(e,n){if(null==e)return[];var t=n.length;return t>1&&wo(e,n[0],n[1])?n=[]:t>2&&wo(n[0],n[1],n[2])&&(n=[n[0]]),Mr(e,yr(n,1),[])}),Ei=pn||function(){return hn.Date.now()};function Si(n,t,r){return t=r?e:t,t=n&&null==t?n.length:t,Ya(n,l,e,e,e,e,t)}function Ai(t,r){var a;if("function"!=typeof r)throw new Oe(n);return t=hl(t),function(){return--t>0&&(a=r.apply(this,arguments)),t<=1&&(r=e),a}}var Oi=Hr(function(e,n,t){var r=1;if(t.length){var a=ft(t,uo(Oi));r|=o}return Ya(e,r,n,t,a)}),Di=Hr(function(e,n,t){var r=3;if(t.length){var a=ft(t,uo(Di));r|=o}return Ya(n,r,e,t,a)});function Fi(t,r,a){var o,i,l,u,c,f,s=0,d=!1,p=!1,v=!0;if("function"!=typeof t)throw new Oe(n);function h(n){var r=o,a=i;return o=i=e,s=n,u=t.apply(a,r)}function m(n){var t=n-f;return f===e||t>=r||t<0||p&&n-s>=l}function g(){var e=Ei();if(m(e))return y(e);c=Fo(g,function(e){var n=r-(e-f);return p?bt(n,l-(e-s)):n}(e))}function y(n){return c=e,v&&o?h(n):(o=i=e,u)}function _(){var n=Ei(),t=m(n);if(o=arguments,i=this,f=n,t){if(c===e)return function(e){return s=e,c=Fo(g,r),d?h(e):u}(f);if(p)return ka(c),c=Fo(g,r),h(f)}return c===e&&(c=Fo(g,r)),u}return r=gl(r)||0,nl(a)&&(d=!!a.leading,l=(p="maxWait"in a)?_t(gl(a.maxWait)||0,r):l,v="trailing"in a?!!a.trailing:v),_.cancel=function(){c!==e&&ka(c),s=0,o=f=i=c=e},_.flush=function(){return c===e?u:y(Ei())},_}var Ri=Hr(function(e,n){return sr(e,1,n)}),Ui=Hr(function(e,n,t){return sr(e,gl(n)||0,t)});function Vi(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Oe(n);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],o=r.cache;if(o.has(a))return o.get(a);var i=e.apply(this,n);return r.cache=o.set(a,i)||o,i};return r.cache=new(Vi.Cache||Gt),r}function zi(e){if("function"!=typeof e)throw new Oe(n);return function(){var n=arguments;switch(n.length){case 0:return!e.call(this);case 1:return!e.call(this,n[0]);case 2:return!e.call(this,n[0],n[1]);case 3:return!e.call(this,n[0],n[1],n[2])}return!e.apply(this,n)}}Vi.Cache=Gt;var Ni=wa(function(e,n){var t=(n=1==n.length&&Mi(n[0])?Vn(n[0],Xn(co())):Vn(yr(n,1),Xn(co()))).length;return Hr(function(r){for(var a=-1,o=bt(r.length,t);++a<o;)r[a]=n[a].call(this,r[a]);return En(e,this,r)})}),Bi=Hr(function(n,t){var r=ft(t,uo(Bi));return Ya(n,o,e,t,r)}),Ti=Hr(function(n,t){var r=ft(t,uo(Ti));return Ya(n,i,e,t,r)}),Li=ro(function(n,t){return Ya(n,u,e,e,e,t)});function $i(e,n){return e===n||e!=e&&n!=n}var Pi=Qa(Er),Ki=Qa(function(e,n){return e>=n}),Wi=Fr(function(){return arguments}())?Fr:function(e){return tl(e)&&ze.call(e,"callee")&&!Ze.call(e,"callee")},Mi=ie.isArray,qi=wn?Xn(wn):function(e){return tl(e)&&jr(e)==O};function Qi(e){return null!=e&&el(e.length)&&!Yi(e)}function Gi(e){return tl(e)&&Qi(e)}var Zi=bn||gu,Ji=xn?Xn(xn):function(e){return tl(e)&&jr(e)==g};function Hi(e){if(!tl(e))return!1;var n=jr(e);return n==y||"[object DOMException]"==n||"string"==typeof e.message&&"string"==typeof e.name&&!ol(e)}function Yi(e){if(!nl(e))return!1;var n=jr(e);return n==_||n==b||"[object AsyncFunction]"==n||"[object Proxy]"==n}function Xi(e){return"number"==typeof e&&e==hl(e)}function el(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=f}function nl(e){var n=typeof e;return null!=e&&("object"==n||"function"==n)}function tl(e){return null!=e&&"object"==typeof e}var rl=kn?Xn(kn):function(e){return tl(e)&&mo(e)==w};function al(e){return"number"==typeof e||tl(e)&&jr(e)==x}function ol(e){if(!tl(e)||jr(e)!=k)return!1;var n=Qe(e);if(null===n)return!0;var t=ze.call(n,"constructor")&&n.constructor;return"function"==typeof t&&t instanceof t&&Ve.call(t)==Le}var il=Cn?Xn(Cn):function(e){return tl(e)&&jr(e)==I},ll=In?Xn(In):function(e){return tl(e)&&mo(e)==j};function ul(e){return"string"==typeof e||!Mi(e)&&tl(e)&&jr(e)==E}function cl(e){return"symbol"==typeof e||tl(e)&&jr(e)==S}var fl=jn?Xn(jn):function(e){return tl(e)&&el(e.length)&&!!un[jr(e)]},sl=Qa(Tr),dl=Qa(function(e,n){return e<=n});function pl(e){if(!e)return[];if(Qi(e))return ul(e)?vt(e):Oa(e);if(Ye&&e[Ye])return function(e){for(var n,t=[];!(n=e.next()).done;)t.push(n.value);return t}(e[Ye]());var n=mo(e);return(n==w?ut:n==j?st:$l)(e)}function vl(e){return e?(e=gl(e))===c||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function hl(e){var n=vl(e),t=n%1;return n==n?t?n-t:n:0}function ml(e){return e?ur(hl(e),0,d):0}function gl(e){if("number"==typeof e)return e;if(cl(e))return s;if(nl(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=nl(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=Yn(e);var t=me.test(e);return t||ye.test(e)?dn(e.slice(2),t?2:8):he.test(e)?s:+e}function yl(e){return Da(e,Rl(e))}function _l(e){return null==e?"":fa(e)}var bl=Ra(function(e,n){if(Io(n)||Qi(n))Da(n,Fl(n),e);else for(var t in n)ze.call(n,t)&&tr(e,t,n[t])}),wl=Ra(function(e,n){Da(n,Rl(n),e)}),xl=Ra(function(e,n,t,r){Da(n,Rl(n),e,r)}),kl=Ra(function(e,n,t,r){Da(n,Fl(n),e,r)}),Cl=ro(lr),Il=Hr(function(n,t){n=Ee(n);var r=-1,a=t.length,o=a>2?t[2]:e;for(o&&wo(t[0],t[1],o)&&(a=1);++r<a;)for(var i=t[r],l=Rl(i),u=-1,c=l.length;++u<c;){var f=l[u],s=n[f];(s===e||$i(s,Re[f])&&!ze.call(n,f))&&(n[f]=i[f])}return n}),jl=Hr(function(n){return n.push(e,eo),En(Vl,e,n)});function El(n,t,r){var a=null==n?e:Cr(n,t);return a===e?r:a}function Sl(e,n){return null!=e&&go(e,n,Ar)}var Al=Pa(function(e,n,t){null!=n&&"function"!=typeof n.toString&&(n=Te.call(n)),e[n]=t},nu(au)),Ol=Pa(function(e,n,t){null!=n&&"function"!=typeof n.toString&&(n=Te.call(n)),ze.call(e,n)?e[n].push(t):e[n]=[t]},co),Dl=Hr(Dr);function Fl(e){return Qi(e)?Ht(e):Nr(e)}function Rl(e){return Qi(e)?Ht(e,!0):Br(e)}var Ul=Ra(function(e,n,t){Kr(e,n,t)}),Vl=Ra(function(e,n,t,r){Kr(e,n,t,r)}),zl=ro(function(e,n){var t={};if(null==e)return t;var r=!1;n=Vn(n,function(n){return n=ba(n,e),r||(r=n.length>1),n}),Da(e,oo(e),t),r&&(t=cr(t,7,no));for(var a=n.length;a--;)da(t,n[a]);return t}),Nl=ro(function(e,n){return null==e?{}:function(e,n){return qr(e,n,function(n,t){return Sl(e,t)})}(e,n)});function Bl(e,n){if(null==e)return{};var t=Vn(oo(e),function(e){return[e]});return n=co(n),qr(e,t,function(e,t){return n(e,t[0])})}var Tl=Ha(Fl),Ll=Ha(Rl);function $l(e){return null==e?[]:et(e,Fl(e))}var Pl=Na(function(e,n,t){return n=n.toLowerCase(),e+(t?Kl(n):n)});function Kl(e){return Hl(_l(e).toLowerCase())}function Wl(e){return(e=_l(e))&&e.replace(be,at).replace(en,"")}var Ml=Na(function(e,n,t){return e+(t?"-":"")+n.toLowerCase()}),ql=Na(function(e,n,t){return e+(t?" ":"")+n.toLowerCase()}),Ql=za("toLowerCase"),Gl=Na(function(e,n,t){return e+(t?"_":"")+n.toLowerCase()}),Zl=Na(function(e,n,t){return e+(t?" ":"")+Hl(n)}),Jl=Na(function(e,n,t){return e+(t?" ":"")+n.toUpperCase()}),Hl=za("toUpperCase");function Yl(n,t,r){return n=_l(n),(t=r?e:t)===e?function(e){return an.test(e)}(n)?function(e){return e.match(tn)||[]}(n):function(e){return e.match(fe)||[]}(n):n.match(t)||[]}var Xl=Hr(function(n,t){try{return En(n,e,t)}catch(e){return Hi(e)?e:new Ce(e)}}),eu=ro(function(e,n){return An(n,function(n){n=Bo(n),ir(e,n,Oi(e[n],e))}),e});function nu(e){return function(){return e}}var tu=La(),ru=La(!0);function au(e){return e}function ou(e){return zr("function"==typeof e?e:cr(e,1))}var iu=Hr(function(e,n){return function(t){return Dr(t,e,n)}}),lu=Hr(function(e,n){return function(t){return Dr(e,t,n)}});function uu(e,n,t){var r=Fl(n),a=kr(n,r);null!=t||nl(n)&&(a.length||!r.length)||(t=n,n=e,e=this,a=kr(n,Fl(n)));var o=!(nl(t)&&"chain"in t&&!t.chain),i=Yi(e);return An(a,function(t){var r=n[t];e[t]=r,i&&(e.prototype[t]=function(){var n=this.__chain__;if(o||n){var t=e(this.__wrapped__);return(t.__actions__=Oa(this.__actions__)).push({func:r,args:arguments,thisArg:e}),t.__chain__=n,t}return r.apply(e,zn([this.value()],arguments))})}),e}function cu(){}var fu=Wa(Vn),su=Wa(Dn),du=Wa(Tn);function pu(e){return xo(e)?Qn(Bo(e)):function(e){return function(n){return Cr(n,e)}}(e)}var vu=qa(),hu=qa(!0);function mu(){return[]}function gu(){return!1}var yu,_u=Ka(function(e,n){return e+n},0),bu=Za("ceil"),wu=Ka(function(e,n){return e/n},1),xu=Za("floor"),ku=Ka(function(e,n){return e*n},1),Cu=Za("round"),Iu=Ka(function(e,n){return e-n},0);return $t.after=function(e,t){if("function"!=typeof t)throw new Oe(n);return e=hl(e),function(){if(--e<1)return t.apply(this,arguments)}},$t.ary=Si,$t.assign=bl,$t.assignIn=wl,$t.assignInWith=xl,$t.assignWith=kl,$t.at=Cl,$t.before=Ai,$t.bind=Oi,$t.bindAll=eu,$t.bindKey=Di,$t.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Mi(e)?e:[e]},$t.chain=pi,$t.chunk=function(n,t,r){t=(r?wo(n,t,r):t===e)?1:_t(hl(t),0);var a=null==n?0:n.length;if(!a||t<1)return[];for(var o=0,i=0,l=ie(mn(a/t));o<a;)l[i++]=aa(n,o,o+=t);return l},$t.compact=function(e){for(var n=-1,t=null==e?0:e.length,r=0,a=[];++n<t;){var o=e[n];o&&(a[r++]=o)}return a},$t.concat=function(){var e=arguments.length;if(!e)return[];for(var n=ie(e-1),t=arguments[0],r=e;r--;)n[r-1]=arguments[r];return zn(Mi(t)?Oa(t):[t],yr(n,1))},$t.cond=function(e){var t=null==e?0:e.length,r=co();return e=t?Vn(e,function(e){if("function"!=typeof e[1])throw new Oe(n);return[r(e[0]),e[1]]}):[],Hr(function(n){for(var r=-1;++r<t;){var a=e[r];if(En(a[0],this,n))return En(a[1],this,n)}})},$t.conforms=function(e){return function(e){var n=Fl(e);return function(t){return fr(t,e,n)}}(cr(e,1))},$t.constant=nu,$t.countBy=mi,$t.create=function(e,n){var t=Pt(e);return null==n?t:or(t,n)},$t.curry=function n(t,r,a){var o=Ya(t,8,e,e,e,e,e,r=a?e:r);return o.placeholder=n.placeholder,o},$t.curryRight=function n(t,r,o){var i=Ya(t,a,e,e,e,e,e,r=o?e:r);return i.placeholder=n.placeholder,i},$t.debounce=Fi,$t.defaults=Il,$t.defaultsDeep=jl,$t.defer=Ri,$t.delay=Ui,$t.difference=$o,$t.differenceBy=Po,$t.differenceWith=Ko,$t.drop=function(n,t,r){var a=null==n?0:n.length;return a?aa(n,(t=r||t===e?1:hl(t))<0?0:t,a):[]},$t.dropRight=function(n,t,r){var a=null==n?0:n.length;return a?aa(n,0,(t=a-(t=r||t===e?1:hl(t)))<0?0:t):[]},$t.dropRightWhile=function(e,n){return e&&e.length?va(e,co(n,3),!0,!0):[]},$t.dropWhile=function(e,n){return e&&e.length?va(e,co(n,3),!0):[]},$t.fill=function(n,t,r,a){var o=null==n?0:n.length;return o?(r&&"number"!=typeof r&&wo(n,t,r)&&(r=0,a=o),function(n,t,r,a){var o=n.length;for((r=hl(r))<0&&(r=-r>o?0:o+r),(a=a===e||a>o?o:hl(a))<0&&(a+=o),a=r>a?0:ml(a);r<a;)n[r++]=t;return n}(n,t,r,a)):[]},$t.filter=function(e,n){return(Mi(e)?Fn:gr)(e,co(n,3))},$t.flatMap=function(e,n){return yr(Ci(e,n),1)},$t.flatMapDeep=function(e,n){return yr(Ci(e,n),c)},$t.flatMapDepth=function(n,t,r){return r=r===e?1:hl(r),yr(Ci(n,t),r)},$t.flatten=qo,$t.flattenDeep=function(e){return null!=e&&e.length?yr(e,c):[]},$t.flattenDepth=function(n,t){return null!=n&&n.length?yr(n,t=t===e?1:hl(t)):[]},$t.flip=function(e){return Ya(e,512)},$t.flow=tu,$t.flowRight=ru,$t.fromPairs=function(e){for(var n=-1,t=null==e?0:e.length,r={};++n<t;){var a=e[n];r[a[0]]=a[1]}return r},$t.functions=function(e){return null==e?[]:kr(e,Fl(e))},$t.functionsIn=function(e){return null==e?[]:kr(e,Rl(e))},$t.groupBy=wi,$t.initial=function(e){return null!=e&&e.length?aa(e,0,-1):[]},$t.intersection=Go,$t.intersectionBy=Zo,$t.intersectionWith=Jo,$t.invert=Al,$t.invertBy=Ol,$t.invokeMap=xi,$t.iteratee=ou,$t.keyBy=ki,$t.keys=Fl,$t.keysIn=Rl,$t.map=Ci,$t.mapKeys=function(e,n){var t={};return n=co(n,3),wr(e,function(e,r,a){ir(t,n(e,r,a),e)}),t},$t.mapValues=function(e,n){var t={};return n=co(n,3),wr(e,function(e,r,a){ir(t,r,n(e,r,a))}),t},$t.matches=function(e){return $r(cr(e,1))},$t.matchesProperty=function(e,n){return Pr(e,cr(n,1))},$t.memoize=Vi,$t.merge=Ul,$t.mergeWith=Vl,$t.method=iu,$t.methodOf=lu,$t.mixin=uu,$t.negate=zi,$t.nthArg=function(e){return e=hl(e),Hr(function(n){return Wr(n,e)})},$t.omit=zl,$t.omitBy=function(e,n){return Bl(e,zi(co(n)))},$t.once=function(e){return Ai(2,e)},$t.orderBy=function(n,t,r,a){return null==n?[]:(Mi(t)||(t=null==t?[]:[t]),Mi(r=a?e:r)||(r=null==r?[]:[r]),Mr(n,t,r))},$t.over=fu,$t.overArgs=Ni,$t.overEvery=su,$t.overSome=du,$t.partial=Bi,$t.partialRight=Ti,$t.partition=Ii,$t.pick=Nl,$t.pickBy=Bl,$t.property=pu,$t.propertyOf=function(n){return function(t){return null==n?e:Cr(n,t)}},$t.pull=Yo,$t.pullAll=Xo,$t.pullAllBy=function(e,n,t){return e&&e.length&&n&&n.length?Qr(e,n,co(t,2)):e},$t.pullAllWith=function(n,t,r){return n&&n.length&&t&&t.length?Qr(n,t,e,r):n},$t.pullAt=ei,$t.range=vu,$t.rangeRight=hu,$t.rearg=Li,$t.reject=function(e,n){return(Mi(e)?Fn:gr)(e,zi(co(n,3)))},$t.remove=function(e,n){var t=[];if(!e||!e.length)return t;var r=-1,a=[],o=e.length;for(n=co(n,3);++r<o;){var i=e[r];n(i,r,e)&&(t.push(i),a.push(r))}return Gr(e,a),t},$t.rest=function(t,r){if("function"!=typeof t)throw new Oe(n);return Hr(t,r=r===e?r:hl(r))},$t.reverse=ni,$t.sampleSize=function(n,t,r){return t=(r?wo(n,t,r):t===e)?1:hl(t),(Mi(n)?Xt:Xr)(n,t)},$t.set=function(e,n,t){return null==e?e:ea(e,n,t)},$t.setWith=function(n,t,r,a){return a="function"==typeof a?a:e,null==n?n:ea(n,t,r,a)},$t.shuffle=function(e){return(Mi(e)?er:ra)(e)},$t.slice=function(n,t,r){var a=null==n?0:n.length;return a?(r&&"number"!=typeof r&&wo(n,t,r)?(t=0,r=a):(t=null==t?0:hl(t),r=r===e?a:hl(r)),aa(n,t,r)):[]},$t.sortBy=ji,$t.sortedUniq=function(e){return e&&e.length?ua(e):[]},$t.sortedUniqBy=function(e,n){return e&&e.length?ua(e,co(n,2)):[]},$t.split=function(n,t,r){return r&&"number"!=typeof r&&wo(n,t,r)&&(t=r=e),(r=r===e?d:r>>>0)?(n=_l(n))&&("string"==typeof t||null!=t&&!il(t))&&!(t=fa(t))&&lt(n)?xa(vt(n),0,r):n.split(t,r):[]},$t.spread=function(e,t){if("function"!=typeof e)throw new Oe(n);return t=null==t?0:_t(hl(t),0),Hr(function(n){var r=n[t],a=xa(n,0,t);return r&&zn(a,r),En(e,this,a)})},$t.tail=function(e){var n=null==e?0:e.length;return n?aa(e,1,n):[]},$t.take=function(n,t,r){return n&&n.length?aa(n,0,(t=r||t===e?1:hl(t))<0?0:t):[]},$t.takeRight=function(n,t,r){var a=null==n?0:n.length;return a?aa(n,(t=a-(t=r||t===e?1:hl(t)))<0?0:t,a):[]},$t.takeRightWhile=function(e,n){return e&&e.length?va(e,co(n,3),!1,!0):[]},$t.takeWhile=function(e,n){return e&&e.length?va(e,co(n,3)):[]},$t.tap=function(e,n){return n(e),e},$t.throttle=function(e,t,r){var a=!0,o=!0;if("function"!=typeof e)throw new Oe(n);return nl(r)&&(a="leading"in r?!!r.leading:a,o="trailing"in r?!!r.trailing:o),Fi(e,t,{leading:a,maxWait:t,trailing:o})},$t.thru=vi,$t.toArray=pl,$t.toPairs=Tl,$t.toPairsIn=Ll,$t.toPath=function(e){return Mi(e)?Vn(e,Bo):cl(e)?[e]:Oa(No(_l(e)))},$t.toPlainObject=yl,$t.transform=function(e,n,t){var r=Mi(e),a=r||Zi(e)||fl(e);if(n=co(n,4),null==t){var o=e&&e.constructor;t=a?r?new o:[]:nl(e)&&Yi(o)?Pt(Qe(e)):{}}return(a?An:wr)(e,function(e,r,a){return n(t,e,r,a)}),t},$t.unary=function(e){return Si(e,1)},$t.union=ti,$t.unionBy=ri,$t.unionWith=ai,$t.uniq=function(e){return e&&e.length?sa(e):[]},$t.uniqBy=function(e,n){return e&&e.length?sa(e,co(n,2)):[]},$t.uniqWith=function(n,t){return t="function"==typeof t?t:e,n&&n.length?sa(n,e,t):[]},$t.unset=function(e,n){return null==e||da(e,n)},$t.unzip=oi,$t.unzipWith=ii,$t.update=function(e,n,t){return null==e?e:pa(e,n,_a(t))},$t.updateWith=function(n,t,r,a){return a="function"==typeof a?a:e,null==n?n:pa(n,t,_a(r),a)},$t.values=$l,$t.valuesIn=function(e){return null==e?[]:et(e,Rl(e))},$t.without=li,$t.words=Yl,$t.wrap=function(e,n){return Bi(_a(n),e)},$t.xor=ui,$t.xorBy=ci,$t.xorWith=fi,$t.zip=si,$t.zipObject=function(e,n){return ga(e||[],n||[],tr)},$t.zipObjectDeep=function(e,n){return ga(e||[],n||[],ea)},$t.zipWith=di,$t.entries=Tl,$t.entriesIn=Ll,$t.extend=wl,$t.extendWith=xl,uu($t,$t),$t.add=_u,$t.attempt=Xl,$t.camelCase=Pl,$t.capitalize=Kl,$t.ceil=bu,$t.clamp=function(n,t,r){return r===e&&(r=t,t=e),r!==e&&(r=(r=gl(r))==r?r:0),t!==e&&(t=(t=gl(t))==t?t:0),ur(gl(n),t,r)},$t.clone=function(e){return cr(e,4)},$t.cloneDeep=function(e){return cr(e,5)},$t.cloneDeepWith=function(n,t){return cr(n,5,t="function"==typeof t?t:e)},$t.cloneWith=function(n,t){return cr(n,4,t="function"==typeof t?t:e)},$t.conformsTo=function(e,n){return null==n||fr(e,n,Fl(n))},$t.deburr=Wl,$t.defaultTo=function(e,n){return null==e||e!=e?n:e},$t.divide=wu,$t.endsWith=function(n,t,r){n=_l(n),t=fa(t);var a=n.length,o=r=r===e?a:ur(hl(r),0,a);return(r-=t.length)>=0&&n.slice(r,o)==t},$t.eq=$i,$t.escape=function(e){return(e=_l(e))&&Q.test(e)?e.replace(M,ot):e},$t.escapeRegExp=function(e){return(e=_l(e))&&ae.test(e)?e.replace(re,"\\$&"):e},$t.every=function(n,t,r){var a=Mi(n)?Dn:hr;return r&&wo(n,t,r)&&(t=e),a(n,co(t,3))},$t.find=gi,$t.findIndex=Wo,$t.findKey=function(e,n){return $n(e,co(n,3),wr)},$t.findLast=yi,$t.findLastIndex=Mo,$t.findLastKey=function(e,n){return $n(e,co(n,3),xr)},$t.floor=xu,$t.forEach=_i,$t.forEachRight=bi,$t.forIn=function(e,n){return null==e?e:_r(e,co(n,3),Rl)},$t.forInRight=function(e,n){return null==e?e:br(e,co(n,3),Rl)},$t.forOwn=function(e,n){return e&&wr(e,co(n,3))},$t.forOwnRight=function(e,n){return e&&xr(e,co(n,3))},$t.get=El,$t.gt=Pi,$t.gte=Ki,$t.has=function(e,n){return null!=e&&go(e,n,Sr)},$t.hasIn=Sl,$t.head=Qo,$t.identity=au,$t.includes=function(e,n,t,r){e=Qi(e)?e:$l(e),t=t&&!r?hl(t):0;var a=e.length;return t<0&&(t=_t(a+t,0)),ul(e)?t<=a&&e.indexOf(n,t)>-1:!!a&&Kn(e,n,t)>-1},$t.indexOf=function(e,n,t){var r=null==e?0:e.length;if(!r)return-1;var a=null==t?0:hl(t);return a<0&&(a=_t(r+a,0)),Kn(e,n,a)},$t.inRange=function(n,t,r){return t=vl(t),r===e?(r=t,t=0):r=vl(r),function(e,n,t){return e>=bt(n,t)&&e<_t(n,t)}(n=gl(n),t,r)},$t.invoke=Dl,$t.isArguments=Wi,$t.isArray=Mi,$t.isArrayBuffer=qi,$t.isArrayLike=Qi,$t.isArrayLikeObject=Gi,$t.isBoolean=function(e){return!0===e||!1===e||tl(e)&&jr(e)==m},$t.isBuffer=Zi,$t.isDate=Ji,$t.isElement=function(e){return tl(e)&&1===e.nodeType&&!ol(e)},$t.isEmpty=function(e){if(null==e)return!0;if(Qi(e)&&(Mi(e)||"string"==typeof e||"function"==typeof e.splice||Zi(e)||fl(e)||Wi(e)))return!e.length;var n=mo(e);if(n==w||n==j)return!e.size;if(Io(e))return!Nr(e).length;for(var t in e)if(ze.call(e,t))return!1;return!0},$t.isEqual=function(e,n){return Rr(e,n)},$t.isEqualWith=function(n,t,r){var a=(r="function"==typeof r?r:e)?r(n,t):e;return a===e?Rr(n,t,e,r):!!a},$t.isError=Hi,$t.isFinite=function(e){return"number"==typeof e&&Ln(e)},$t.isFunction=Yi,$t.isInteger=Xi,$t.isLength=el,$t.isMap=rl,$t.isMatch=function(e,n){return e===n||Ur(e,n,so(n))},$t.isMatchWith=function(n,t,r){return r="function"==typeof r?r:e,Ur(n,t,so(t),r)},$t.isNaN=function(e){return al(e)&&e!=+e},$t.isNative=function(e){if(Co(e))throw new Ce("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Vr(e)},$t.isNil=function(e){return null==e},$t.isNull=function(e){return null===e},$t.isNumber=al,$t.isObject=nl,$t.isObjectLike=tl,$t.isPlainObject=ol,$t.isRegExp=il,$t.isSafeInteger=function(e){return Xi(e)&&e>=-9007199254740991&&e<=f},$t.isSet=ll,$t.isString=ul,$t.isSymbol=cl,$t.isTypedArray=fl,$t.isUndefined=function(n){return n===e},$t.isWeakMap=function(e){return tl(e)&&mo(e)==A},$t.isWeakSet=function(e){return tl(e)&&"[object WeakSet]"==jr(e)},$t.join=function(e,n){return null==e?"":Gn.call(e,n)},$t.kebabCase=Ml,$t.last=Ho,$t.lastIndexOf=function(n,t,r){var a=null==n?0:n.length;if(!a)return-1;var o=a;return r!==e&&(o=(o=hl(r))<0?_t(a+o,0):bt(o,a-1)),t==t?function(e,n,t){for(var r=t+1;r--;)if(e[r]===n)return r;return r}(n,t,o):Pn(n,Mn,o,!0)},$t.lowerCase=ql,$t.lowerFirst=Ql,$t.lt=sl,$t.lte=dl,$t.max=function(n){return n&&n.length?mr(n,au,Er):e},$t.maxBy=function(n,t){return n&&n.length?mr(n,co(t,2),Er):e},$t.mean=function(e){return qn(e,au)},$t.meanBy=function(e,n){return qn(e,co(n,2))},$t.min=function(n){return n&&n.length?mr(n,au,Tr):e},$t.minBy=function(n,t){return n&&n.length?mr(n,co(t,2),Tr):e},$t.stubArray=mu,$t.stubFalse=gu,$t.stubObject=function(){return{}},$t.stubString=function(){return""},$t.stubTrue=function(){return!0},$t.multiply=ku,$t.nth=function(n,t){return n&&n.length?Wr(n,hl(t)):e},$t.noConflict=function(){return hn._===this&&(hn._=$e),this},$t.noop=cu,$t.now=Ei,$t.pad=function(e,n,t){e=_l(e);var r=(n=hl(n))?pt(e):0;if(!n||r>=n)return e;var a=(n-r)/2;return Ma(gn(a),t)+e+Ma(mn(a),t)},$t.padEnd=function(e,n,t){e=_l(e);var r=(n=hl(n))?pt(e):0;return n&&r<n?e+Ma(n-r,t):e},$t.padStart=function(e,n,t){e=_l(e);var r=(n=hl(n))?pt(e):0;return n&&r<n?Ma(n-r,t)+e:e},$t.parseInt=function(e,n,t){return t||null==n?n=0:n&&(n=+n),xt(_l(e).replace(oe,""),n||0)},$t.random=function(n,t,r){if(r&&"boolean"!=typeof r&&wo(n,t,r)&&(t=r=e),r===e&&("boolean"==typeof t?(r=t,t=e):"boolean"==typeof n&&(r=n,n=e)),n===e&&t===e?(n=0,t=1):(n=vl(n),t===e?(t=n,n=0):t=vl(t)),n>t){var a=n;n=t,t=a}if(r||n%1||t%1){var o=kt();return bt(n+o*(t-n+sn("1e-"+((o+"").length-1))),t)}return Zr(n,t)},$t.reduce=function(e,n,t){var r=Mi(e)?Nn:Zn,a=arguments.length<3;return r(e,co(n,4),t,a,pr)},$t.reduceRight=function(e,n,t){var r=Mi(e)?Bn:Zn,a=arguments.length<3;return r(e,co(n,4),t,a,vr)},$t.repeat=function(n,t,r){return t=(r?wo(n,t,r):t===e)?1:hl(t),Jr(_l(n),t)},$t.replace=function(){var e=arguments,n=_l(e[0]);return e.length<3?n:n.replace(e[1],e[2])},$t.result=function(n,t,r){var a=-1,o=(t=ba(t,n)).length;for(o||(o=1,n=e);++a<o;){var i=null==n?e:n[Bo(t[a])];i===e&&(a=o,i=r),n=Yi(i)?i.call(n):i}return n},$t.round=Cu,$t.runInContext=J,$t.sample=function(e){return(Mi(e)?Yt:Yr)(e)},$t.size=function(e){if(null==e)return 0;if(Qi(e))return ul(e)?pt(e):e.length;var n=mo(e);return n==w||n==j?e.size:Nr(e).length},$t.snakeCase=Gl,$t.some=function(n,t,r){var a=Mi(n)?Tn:oa;return r&&wo(n,t,r)&&(t=e),a(n,co(t,3))},$t.sortedIndex=function(e,n){return ia(e,n)},$t.sortedIndexBy=function(e,n,t){return la(e,n,co(t,2))},$t.sortedIndexOf=function(e,n){var t=null==e?0:e.length;if(t){var r=ia(e,n);if(r<t&&$i(e[r],n))return r}return-1},$t.sortedLastIndex=function(e,n){return ia(e,n,!0)},$t.sortedLastIndexBy=function(e,n,t){return la(e,n,co(t,2),!0)},$t.sortedLastIndexOf=function(e,n){if(null!=e&&e.length){var t=ia(e,n,!0)-1;if($i(e[t],n))return t}return-1},$t.startCase=Zl,$t.startsWith=function(e,n,t){return e=_l(e),t=null==t?0:ur(hl(t),0,e.length),n=fa(n),e.slice(t,t+n.length)==n},$t.subtract=Iu,$t.sum=function(e){return e&&e.length?Jn(e,au):0},$t.sumBy=function(e,n){return e&&e.length?Jn(e,co(n,2)):0},$t.template=function(n,t,r){var a=$t.templateSettings;r&&wo(n,t,r)&&(t=e),n=_l(n),t=xl({},t,a,Xa);var o,i,l=xl({},t.imports,a.imports,Xa),u=Fl(l),c=et(l,u),f=0,s=t.interpolate||we,d="__p += '",p=Se((t.escape||we).source+"|"+s.source+"|"+(s===Y?pe:we).source+"|"+(t.evaluate||we).source+"|$","g"),v="//# sourceURL="+(ze.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ln+"]")+"\n";n.replace(p,function(e,t,r,a,l,u){return r||(r=a),d+=n.slice(f,u).replace(xe,it),t&&(o=!0,d+="' +\n__e("+t+") +\n'"),l&&(i=!0,d+="';\n"+l+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),f=u+e.length,e}),d+="';\n";var h=ze.call(t,"variable")&&t.variable;if(h){if(se.test(h))throw new Ce("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(i?d.replace($,""):d).replace(P,"$1").replace(K,"$1;"),d="function("+(h||"obj")+") {\n"+(h?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=Xl(function(){return Ie(u,v+"return "+d).apply(e,c)});if(m.source=d,Hi(m))throw m;return m},$t.times=function(e,n){if((e=hl(e))<1||e>f)return[];var t=d,r=bt(e,d);n=co(n),e-=d;for(var a=Hn(r,n);++t<e;)n(t);return a},$t.toFinite=vl,$t.toInteger=hl,$t.toLength=ml,$t.toLower=function(e){return _l(e).toLowerCase()},$t.toNumber=gl,$t.toSafeInteger=function(e){return e?ur(hl(e),-9007199254740991,f):0===e?e:0},$t.toString=_l,$t.toUpper=function(e){return _l(e).toUpperCase()},$t.trim=function(n,t,r){if((n=_l(n))&&(r||t===e))return Yn(n);if(!n||!(t=fa(t)))return n;var a=vt(n),o=vt(t);return xa(a,tt(a,o),rt(a,o)+1).join("")},$t.trimEnd=function(n,t,r){if((n=_l(n))&&(r||t===e))return n.slice(0,ht(n)+1);if(!n||!(t=fa(t)))return n;var a=vt(n);return xa(a,0,rt(a,vt(t))+1).join("")},$t.trimStart=function(n,t,r){if((n=_l(n))&&(r||t===e))return n.replace(oe,"");if(!n||!(t=fa(t)))return n;var a=vt(n);return xa(a,tt(a,vt(t))).join("")},$t.truncate=function(n,t){var r=30,a="...";if(nl(t)){var o="separator"in t?t.separator:o;r="length"in t?hl(t.length):r,a="omission"in t?fa(t.omission):a}var i=(n=_l(n)).length;if(lt(n)){var l=vt(n);i=l.length}if(r>=i)return n;var u=r-pt(a);if(u<1)return a;var c=l?xa(l,0,u).join(""):n.slice(0,u);if(o===e)return c+a;if(l&&(u+=c.length-u),il(o)){if(n.slice(u).search(o)){var f,s=c;for(o.global||(o=Se(o.source,_l(ve.exec(o))+"g")),o.lastIndex=0;f=o.exec(s);)var d=f.index;c=c.slice(0,d===e?u:d)}}else if(n.indexOf(fa(o),u)!=u){var p=c.lastIndexOf(o);p>-1&&(c=c.slice(0,p))}return c+a},$t.unescape=function(e){return(e=_l(e))&&q.test(e)?e.replace(W,mt):e},$t.uniqueId=function(e){var n=++Ne;return _l(e)+n},$t.upperCase=Jl,$t.upperFirst=Hl,$t.each=_i,$t.eachRight=bi,$t.first=Qo,uu($t,(yu={},wr($t,function(e,n){ze.call($t.prototype,n)||(yu[n]=e)}),yu),{chain:!1}),$t.VERSION="4.17.21",An(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){$t[e].placeholder=$t}),An(["drop","take"],function(n,t){Mt.prototype[n]=function(r){r=r===e?1:_t(hl(r),0);var a=this.__filtered__&&!t?new Mt(this):this.clone();return a.__filtered__?a.__takeCount__=bt(r,a.__takeCount__):a.__views__.push({size:bt(r,d),type:n+(a.__dir__<0?"Right":"")}),a},Mt.prototype[n+"Right"]=function(e){return this.reverse()[n](e).reverse()}}),An(["filter","map","takeWhile"],function(e,n){var t=n+1,r=1==t||3==t;Mt.prototype[e]=function(e){var n=this.clone();return n.__iteratees__.push({iteratee:co(e,3),type:t}),n.__filtered__=n.__filtered__||r,n}}),An(["head","last"],function(e,n){var t="take"+(n?"Right":"");Mt.prototype[e]=function(){return this[t](1).value()[0]}}),An(["initial","tail"],function(e,n){var t="drop"+(n?"":"Right");Mt.prototype[e]=function(){return this.__filtered__?new Mt(this):this[t](1)}}),Mt.prototype.compact=function(){return this.filter(au)},Mt.prototype.find=function(e){return this.filter(e).head()},Mt.prototype.findLast=function(e){return this.reverse().find(e)},Mt.prototype.invokeMap=Hr(function(e,n){return"function"==typeof e?new Mt(this):this.map(function(t){return Dr(t,e,n)})}),Mt.prototype.reject=function(e){return this.filter(zi(co(e)))},Mt.prototype.slice=function(n,t){n=hl(n);var r=this;return r.__filtered__&&(n>0||t<0)?new Mt(r):(n<0?r=r.takeRight(-n):n&&(r=r.drop(n)),t!==e&&(r=(t=hl(t))<0?r.dropRight(-t):r.take(t-n)),r)},Mt.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Mt.prototype.toArray=function(){return this.take(d)},wr(Mt.prototype,function(n,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),a=/^(?:head|last)$/.test(t),o=$t[a?"take"+("last"==t?"Right":""):t],i=a||/^find/.test(t);o&&($t.prototype[t]=function(){var t=this.__wrapped__,l=a?[1]:arguments,u=t instanceof Mt,c=l[0],f=u||Mi(t),s=function(e){var n=o.apply($t,zn([e],l));return a&&d?n[0]:n};f&&r&&"function"==typeof c&&1!=c.length&&(u=f=!1);var d=this.__chain__,p=!!this.__actions__.length,v=i&&!d,h=u&&!p;if(!i&&f){t=h?t:new Mt(this);var m=n.apply(t,l);return m.__actions__.push({func:vi,args:[s],thisArg:e}),new Wt(m,d)}return v&&h?n.apply(this,l):(m=this.thru(s),v?a?m.value()[0]:m.value():m)})}),An(["pop","push","shift","sort","splice","unshift"],function(e){var n=De[e],t=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);$t.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var a=this.value();return n.apply(Mi(a)?a:[],e)}return this[t](function(t){return n.apply(Mi(t)?t:[],e)})}}),wr(Mt.prototype,function(e,n){var t=$t[n];if(t){var r=t.name+"";ze.call(Ft,r)||(Ft[r]=[]),Ft[r].push({name:n,func:t})}}),Ft[$a(e,2).name]=[{name:"wrapper",func:e}],Mt.prototype.clone=function(){var e=new Mt(this.__wrapped__);return e.__actions__=Oa(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Oa(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Oa(this.__views__),e},Mt.prototype.reverse=function(){if(this.__filtered__){var e=new Mt(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Mt.prototype.value=function(){var e=this.__wrapped__.value(),n=this.__dir__,t=Mi(e),r=n<0,a=t?e.length:0,o=function(e,n,t){for(var r=-1,a=t.length;++r<a;){var o=t[r],i=o.size;switch(o.type){case"drop":e+=i;break;case"dropRight":n-=i;break;case"take":n=bt(n,e+i);break;case"takeRight":e=_t(e,n-i)}}return{start:e,end:n}}(0,a,this.__views__),i=o.start,l=o.end,u=l-i,c=r?l:i-1,f=this.__iteratees__,s=f.length,d=0,p=bt(u,this.__takeCount__);if(!t||!r&&a==u&&p==u)return ha(e,this.__actions__);var v=[];e:for(;u--&&d<p;){for(var h=-1,m=e[c+=n];++h<s;){var g=f[h],y=g.iteratee,_=g.type,b=y(m);if(2==_)m=b;else if(!b){if(1==_)continue e;break e}}v[d++]=m}return v},$t.prototype.at=hi,$t.prototype.chain=function(){return pi(this)},$t.prototype.commit=function(){return new Wt(this.value(),this.__chain__)},$t.prototype.next=function(){this.__values__===e&&(this.__values__=pl(this.value()));var n=this.__index__>=this.__values__.length;return{done:n,value:n?e:this.__values__[this.__index__++]}},$t.prototype.plant=function(n){for(var t,r=this;r instanceof Kt;){var a=Lo(r);a.__index__=0,a.__values__=e,t?o.__wrapped__=a:t=a;var o=a;r=r.__wrapped__}return o.__wrapped__=n,t},$t.prototype.reverse=function(){var n=this.__wrapped__;if(n instanceof Mt){var t=n;return this.__actions__.length&&(t=new Mt(this)),(t=t.reverse()).__actions__.push({func:vi,args:[ni],thisArg:e}),new Wt(t,this.__chain__)}return this.thru(ni)},$t.prototype.toJSON=$t.prototype.valueOf=$t.prototype.value=function(){return ha(this.__wrapped__,this.__actions__)},$t.prototype.first=$t.prototype.head,Ye&&($t.prototype[Ye]=function(){return this}),$t}();gn?((gn.exports=gt)._=gt,mn._=gt):hn._=gt}.call(X);var ne=ee.exports;A("\n.m2o-dropdown[data-v-c534bf5f] {\n  position: relative;\n  width: 100%;\n}\n.dropdown-toggle[data-v-c534bf5f] {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 10px 12px;\n  background-color: var(--theme--background);\n  border: var(--theme--border-width) solid\n  var(--theme--form--field--input--border-color);\n  border-radius: var(--theme--border-radius);\n  cursor: pointer;\n  transition: all var(--fast) var(--transition);\n  min-height: 44px;\n}\n.dropdown-toggle[data-v-c534bf5f]:hover:not(.disabled) {\n  border-color: var(--theme--form--field--input--border-color-hover);\n}\n.dropdown-toggle.open[data-v-c534bf5f] {\n  border-color: var(--theme--primary);\n}\n.dropdown-toggle.disabled[data-v-c534bf5f] {\n  cursor: not-allowed;\n  opacity: 0.5;\n}\n.selected-value[data-v-c534bf5f] {\n  flex: 1;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.toggle-icons[data-v-c534bf5f] {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  flex-shrink: 0;\n}\n.placeholder[data-v-c534bf5f] {\n  color: var(--theme--foreground-subdued);\n}\n.dropdown-content[data-v-c534bf5f] {\n  position: absolute;\n  top: calc(100% + 4px);\n  left: 0;\n  right: 0;\n  background-color: var(--theme--background);\n  border: var(--theme--border-width) solid\n  var(--theme--form--field--input--border-color);\n  border-radius: var(--theme--border-radius);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n  z-index: 100;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  padding: 8px;\n  max-height: 400px;\n}\n.loading-container[data-v-c534bf5f] {\n  display: flex;\n  justify-content: center;\n  padding: 20px;\n}\n.items-list[data-v-c534bf5f] {\n  max-height: 300px;\n  overflow-y: auto;\n  border: var(--theme--border-width) solid\n  var(--theme--form--field--input--border-color);\n  border-radius: var(--theme--border-radius);\n}\n.item[data-v-c534bf5f] {\n  padding: 10px 12px;\n  cursor: pointer;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  transition: background-color var(--fast) var(--transition);\n  border-bottom: var(--theme--border-width) solid\n  var(--theme--form--field--input--border-color);\n}\n.item[data-v-c534bf5f]:last-child {\n  border-bottom: none;\n}\n.item[data-v-c534bf5f]:hover {\n  background-color: var(--theme--background-subdued);\n}\n.item.selected[data-v-c534bf5f] {\n  background-color: var(--theme--primary-background);\n  color: var(--theme--primary);\n}\n.check-icon[data-v-c534bf5f] {\n  color: var(--theme--primary);\n}\n.no-results[data-v-c534bf5f] {\n  padding: 20px;\n  text-align: center;\n  color: var(--theme--foreground-subdued);\n}\n.add-new[data-v-c534bf5f] {\n  width: 100%;\n}\n.drawer-content[data-v-c534bf5f] {\n  padding: var(--content-padding);\n  padding-top: 0;\n  padding-bottom: var(--content-padding-bottom);\n}\n",{});const te=b({props:{value:{type:[String,Number],default:null},collection:{type:String,required:!0},field:{type:String,required:!0},primaryKey:{type:[String,Number],required:!0},disabled:{type:Boolean,default:!1},template:{type:String,default:null},enableCreate:{type:Boolean,default:!1},filter:{type:Object,default:null}},emits:["input"],setup(t,{emit:a}){const{t:o}=j(),i=e(),{useRelationsStore:u,useFieldsStore:c}=n(),f=u(),s=c(),d=r([]),p=r(!1),v=r(""),h=r(!1),m=r({}),g=r(!1),y=r(!1),_=r(null),b=w(()=>f.getRelationsForField(t.collection,t.field).find(e=>e.collection===t.collection&&e.field===t.field)),x=w(()=>b.value?.related_collection),k=w(()=>x.value?s.getPrimaryKeyFieldForCollection(x.value):null),C=w(()=>{if(!x.value)return null;const e=s.getPrimaryKeyFieldForCollection(x.value);return e?.field||"id"}),I=w(()=>t.template?t.template:C.value?`{{ ${C.value} }}`:"{{ id }}"),E=w(()=>t.value),S=()=>{y.value=!1,v.value=""},A=async(e="")=>{if(x.value){p.value=!0;try{const n={limit:100,fields:["*"]};if(e){const t=s.getFieldsForCollection(x.value).filter(e=>["string","text"].includes(e.type)&&!e.meta?.hidden).map(e=>e.field);t.length>0&&(n.filter={_or:t.map(n=>({[n]:{_contains:e}}))})}t.filter&&(n.filter=n.filter?{_and:[n.filter,t.filter]}:t.filter);const r=await i.get(`/items/${x.value}`,{params:n});d.value=r.data.data||[]}catch(e){console.error("Error fetching items:",e),d.value=[]}finally{p.value=!1}}},O=ne.debounce(e=>{A(e)},300);return l(()=>t.value,async e=>{if(!e)return void(_.value=null);if(!x.value||!C.value)return;const n=d.value.find(n=>n[C.value]===e);n?_.value=n:await(async()=>{if(t.value&&x.value&&C.value)try{const e=await i.get(`/items/${x.value}/${t.value}`,{params:{fields:["*"]}});e.data.data&&(_.value=e.data.data)}catch(e){console.error("Error fetching selected item:",e)}})()},{immediate:!0}),{t:o,relationInfo:b,items:d,loading:p,selectedItem:E,selectedItemData:_,searchQuery:v,onSearchInput:O,clearSearch:()=>{v.value="",A()},selectItem:e=>{if(t.disabled)return;const n=e[C.value];_.value=e,console.log("SELL",_.value,n);let r=n;if(null!=n){const e=s.getField(t.collection,t.field);["integer","bigInteger"].includes(e?.type)&&"string"==typeof n?r=parseInt(n,10):"uuid"===e?.type&&"number"==typeof n&&(r=n.toString())}S(),console.log("Emitting value:",r,"type:",typeof r),console.log("Field schema type:",s.getField(t.collection,t.field)?.type),console.log("Related PK field name:",C.value),a("input",r)},displayTemplate:I,relatedCollection:x,relatedPrimaryKey:k,createNew:()=>{m.value={},h.value=!0},drawerOpen:h,newItem:m,saving:g,saveNewItem:async()=>{g.value=!0;try{const e=(await i.post(`/items/${x.value}`,m.value)).data.data;if(d.value.unshift(e),C.value){let n=e[C.value];const r=s.getField(t.collection,t.field);["integer","bigInteger"].includes(r?.type)&&"string"==typeof n?n=parseInt(n,10):"uuid"===r?.type&&"number"==typeof n&&(n=n.toString()),_.value=e,a("input",n)}h.value=!1,m.value={},S()}catch(e){console.error("Error saving new item:",e)}finally{g.value=!1}},dropdownOpen:y,toggleDropdown:()=>{t.disabled||(y.value=!y.value,y.value&&A())},closeDropdown:S,clearSelection:()=>{_.value=null,console.log("Emitting value:",valueToEmit,"type:",typeof valueToEmit),console.log("Field schema type:",s.getField(t.collection,t.field)?.type),console.log("Related PK field name:",C.value),a("input",null)}}}}),re={key:1,class:"m2o-dropdown"},ae={class:"selected-value"},oe={key:1,class:"placeholder"},ie={class:"toggle-icons"},le={key:0,class:"dropdown-content"},ue={key:0,class:"loading-container"},ce={key:1,class:"items-list"},fe=["onClick"],se={key:2,class:"no-results"},de={class:"drawer-content"};var pe=t({id:"m2o-dropdown",name:"M2O Dropdown",description:"Searchable dropdown for Many-to-One relationships",icon:"arrow_drop_down",component:O(te,[["render",function(e,n,t,r,a,o){const i=u("v-notice"),l=u("render-template"),b=u("v-icon"),w=u("v-input"),j=u("v-progress-circular"),E=u("v-button"),S=u("v-form"),A=u("v-drawer"),O=x("click-outside");return e.relationInfo?k((c(),f("div",re,[h("div",{class:C(["dropdown-toggle",{disabled:e.disabled,open:e.dropdownOpen}]),onClick:n[0]||(n[0]=(...n)=>e.toggleDropdown&&e.toggleDropdown(...n))},[h("div",ae,[e.selectedItemData?(c(),g(l,{key:0,collection:e.relatedCollection,item:e.selectedItemData,template:e.displayTemplate},null,8,["collection","item","template"])):(c(),f("span",oe,y(e.t("select_an_item")),1))]),h("div",ie,[e.selectedItemData&&!e.disabled?(c(),g(b,{key:0,name:"close",small:"",clickable:"",onClick:I(e.clearSelection,["stop"])},null,8,["onClick"])):p("v-if",!0),v(b,{name:e.dropdownOpen?"expand_less":"expand_more"},null,8,["name"])])],2),e.dropdownOpen?(c(),f("div",le,[v(w,{modelValue:e.searchQuery,"onUpdate:modelValue":[n[1]||(n[1]=n=>e.searchQuery=n),e.onSearchInput],placeholder:e.t("search_items"),onClick:n[2]||(n[2]=I(()=>{},["stop"]))},{prepend:m(()=>[v(b,{name:"search"})]),append:m(()=>[e.searchQuery?(c(),g(b,{key:0,name:"close",clickable:"",onClick:e.clearSearch},null,8,["onClick"])):p("v-if",!0)]),_:1},8,["modelValue","placeholder","onUpdate:modelValue"]),e.loading?(c(),f("div",ue,[v(j,{indeterminate:""})])):e.items.length>0?(c(),f("div",ce,[(c(!0),f(s,null,d(e.items,n=>(c(),f("div",{key:n[e.relatedPrimaryKey],class:C(["item",{selected:e.selectedItem===n[e.relatedPrimaryKey]}]),onClick:t=>e.selectItem(n)},[v(l,{collection:e.relatedCollection,item:n,template:e.displayTemplate},null,8,["collection","item","template"]),e.selectedItem===n[e.relatedPrimaryKey]?(c(),g(b,{key:0,name:"check",class:"check-icon"})):p("v-if",!0)],10,fe))),128))])):e.searchQuery?(c(),f("div",se,y(e.t("no_items_found")),1)):p("v-if",!0),e.enableCreate?(c(),g(E,{key:3,small:"",class:"add-new",onClick:I(e.createNew,["stop"])},{default:m(()=>[v(b,{name:"add",small:""}),_(" "+y(e.t("create_new")),1)]),_:1},8,["onClick"])):p("v-if",!0)])):p("v-if",!0),v(A,{modelValue:e.drawerOpen,"onUpdate:modelValue":n[5]||(n[5]=n=>e.drawerOpen=n),title:e.t("create_item"),persistent:"",onCancel:n[6]||(n[6]=n=>e.drawerOpen=!1)},{actions:m(()=>[v(E,{secondary:"",onClick:n[3]||(n[3]=n=>e.drawerOpen=!1)},{default:m(()=>[_(y(e.t("cancel")),1)]),_:1}),v(E,{loading:e.saving,onClick:e.saveNewItem},{default:m(()=>[_(y(e.t("save")),1)]),_:1},8,["loading","onClick"])]),default:m(()=>[h("div",de,[v(S,{modelValue:e.newItem,"onUpdate:modelValue":n[4]||(n[4]=n=>e.newItem=n),collection:e.relatedCollection,"primary-key":"+",loading:!1,disabled:!1},null,8,["modelValue","collection"])])]),_:1},8,["modelValue","title"])])),[[O,e.closeDropdown]]):(c(),g(i,{key:0,type:"warning"},{default:m(()=>[_(y(e.t("relationship_not_setup")),1)]),_:1}))}],["__scopeId","data-v-c534bf5f"],["__file","interface.vue"]]),types:["string","uuid","integer"],localTypes:["m2o"],group:"relational",options:({relations:e})=>{const n=e.m2o;return[{field:"template",name:"$t:display_template",meta:{interface:"system-display-template",options:{collectionName:n?.related_collection},width:"full"}},{field:"enableCreate",name:"Enable Create",type:"boolean",meta:{interface:"boolean",options:{label:"Allow creating new items"},width:"half"},schema:{default_value:!1}},{field:"filter",name:"$t:filter",type:"json",meta:{interface:"system-filter",options:{collectionName:n?.related_collection},width:"full"}}]},recommendedDisplays:["related-value"]});A("\n.m2m-dropdown[data-v-f64c38d2] {\n    display: flex;\n    flex-direction: column;\n    gap: 12px;\n}\n.selected-items[data-v-f64c38d2] {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 8px;\n    padding: 8px;\n    background-color: var(--theme--background-subdued);\n    border-radius: var(--theme--border-radius);\n    min-height: 40px;\n}\n.loading-container[data-v-f64c38d2] {\n    display: flex;\n    justify-content: center;\n    padding: 20px;\n}\n.items-list[data-v-f64c38d2] {\n    max-height: 300px;\n    overflow-y: auto;\n    border: var(--theme--border-width) solid\n        var(--theme--form--field--input--border-color);\n    border-radius: var(--theme--border-radius);\n}\n.item[data-v-f64c38d2] {\n    padding: 8px 12px;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    gap: 12px;\n    transition: background-color var(--fast) var(--transition);\n    border-bottom: var(--theme--border-width) solid\n        var(--theme--form--field--input--border-color);\n}\n.item[data-v-f64c38d2]:last-child {\n    border-bottom: none;\n}\n.item[data-v-f64c38d2]:hover {\n    background-color: var(--theme--background-subdued);\n}\n.item.selected[data-v-f64c38d2] {\n    background-color: var(--theme--primary-background);\n}\n.item-content[data-v-f64c38d2] {\n    flex: 1;\n}\n.no-results[data-v-f64c38d2] {\n    padding: 20px;\n    text-align: center;\n    color: var(--theme--foreground-subdued);\n}\n.add-new[data-v-f64c38d2] {\n    align-self: flex-start;\n}\n.drawer-content[data-v-f64c38d2] {\n    padding: var(--content-padding);\n    padding-top: 0;\n    padding-bottom: var(--content-padding-bottom);\n}\n[data-v-f64c38d2] .v-chip {\n    cursor: pointer;\n}\n",{});const ve=b({props:{value:{type:Array,default:()=>[]},collection:{type:String,required:!0},field:{type:String,required:!0},primaryKey:{type:[String,Number],required:!0},disabled:{type:Boolean,default:!1},template:{type:String,default:null},enableCreate:{type:Boolean,default:!1},filter:{type:Object,default:null}},emits:["input"],setup(t,{emit:a}){const{t:o}=j(),i=e(),{useRelationsStore:u,useFieldsStore:c}=n(),f=u(),s=c(),d=r([]),p=r(!1),v=r(""),h=r(!1),m=r({}),g=r(!1),y=w(()=>{const e=f.getRelationsForField(t.collection,t.field).find(e=>e.collection===t.collection&&e.field===t.field);if(!e)return null;const n=e.related_collection,r=e.meta?.one_field,a=f.getRelationsForCollection(n).find(e=>e.collection===n&&e.field!==r&&e.related_collection);return{junctionRelation:e,relatedRelation:a,junctionCollection:n,relatedCollection:a?.related_collection,junctionField:e.field,relatedField:a?.field}}),_=w(()=>y.value?.relatedCollection);w(()=>y.value?.junctionCollection);const b=w(()=>_.value?s.getPrimaryKeyFieldForCollection(_.value):null),x=w(()=>t.template?t.template:b.value?`{{ ${b.value} }}`:"{{ id }}"),k=w(()=>{if(!t.value||!Array.isArray(t.value))return[];const e=y.value?.relatedField;return e?t.value.map(n=>{if("object"==typeof n&&null!==n){const t=n[e];return"object"==typeof t&&null!==t?t[b.value]:t}return n}).filter(Boolean):[]}),C=w(()=>d.value.filter(e=>k.value.includes(e[b.value]))),I=w(()=>d.value),E=e=>k.value.includes(e),S=async(e="")=>{if(_.value){p.value=!0;try{const n={limit:100,fields:["*"]};if(e){const t=s.getFieldsForCollection(_.value).filter(e=>["string","text"].includes(e.type)&&!e.meta?.hidden).map(e=>e.field);t.length>0&&(n.filter={_or:t.map(n=>({[n]:{_contains:e}}))})}t.filter&&(n.filter=n.filter?{_and:[n.filter,t.filter]}:t.filter);const r=await i.get(`/items/${_.value}`,{params:n});d.value=r.data.data||[]}catch(e){console.error("Error fetching items:",e),d.value=[]}finally{p.value=!1}}},A=ne.debounce(e=>{S(e)},300),O=e=>{const n=y.value?.relatedField;if(!n)return;if(!e||0===e.length)return void a("input",[]);const t=e.map(e=>({[n]:e}));a("input",t)};return l(()=>t.collection,()=>{S()},{immediate:!0}),l(()=>t.value,async e=>{if(!(e&&Array.isArray(e)&&0!==e.length&&_.value&&b.value))return;const n=k.value.filter(e=>!d.value.some(n=>n[b.value]===e));if(n.length>0)try{const e=await i.get(`/items/${_.value}`,{params:{filter:{[b.value]:{_in:n}},fields:["*"]}});(e.data.data||[]).forEach(e=>{d.value.some(n=>n[b.value]===e[b.value])||d.value.push(e)})}catch(e){console.error("Error fetching selected items:",e)}},{immediate:!0}),{t:o,relationInfo:y,items:d,loading:p,searchQuery:v,selectedItemsData:C,availableItems:I,isSelected:E,onSearchInput:A,clearSearch:()=>{v.value="",S()},toggleItem:e=>{if(t.disabled)return;const n=e[b.value];let r;r=E(n)?k.value.filter(e=>e!==n):[...k.value,n],O(r)},removeItem:e=>{if(t.disabled)return;const n=k.value.filter(n=>n!==e);O(n)},displayTemplate:x,relatedCollection:_,relatedPrimaryKey:b,createNew:()=>{m.value={},h.value=!0},drawerOpen:h,newItem:m,saving:g,saveNewItem:async()=>{if(_.value){g.value=!0;try{const e=(await i.post(`/items/${_.value}`,m.value)).data.data;d.value.unshift(e);const n=e[b.value];O([...k.value,n]),h.value=!1,m.value={}}catch(e){console.error("Error saving new item:",e)}finally{g.value=!1}}}}}}),he={key:1,class:"m2m-dropdown"},me={key:0,class:"selected-items"},ge={key:1,class:"loading-container"},ye={key:2,class:"items-list"},_e=["onClick"],be={class:"item-content"},we={key:3,class:"no-results"},xe={class:"drawer-content"};var ke=t({id:"m2m-dropdown",name:"M2M Dropdown",description:"Searchable dropdown for Many-to-Many relationships",icon:"arrow_drop_down",component:O(ve,[["render",function(e,n,t,r,a,o){const i=u("v-notice"),l=u("v-icon"),b=u("v-input"),w=u("render-template"),x=u("v-chip"),k=u("v-progress-circular"),j=u("v-checkbox"),E=u("v-button"),S=u("v-form"),A=u("v-drawer");return e.relationInfo?(c(),f("div",he,[v(b,{modelValue:e.searchQuery,"onUpdate:modelValue":[n[0]||(n[0]=n=>e.searchQuery=n),e.onSearchInput],placeholder:e.t("search_items"),disabled:e.disabled},{prepend:m(()=>[v(l,{name:"search"})]),append:m(()=>[e.searchQuery?(c(),g(l,{key:0,name:"close",clickable:"",onClick:e.clearSearch},null,8,["onClick"])):p("v-if",!0)]),_:1},8,["modelValue","placeholder","disabled","onUpdate:modelValue"]),e.selectedItemsData.length>0?(c(),f("div",me,[(c(!0),f(s,null,d(e.selectedItemsData,n=>(c(),g(x,{key:n[e.relatedPrimaryKey],small:"",disabled:e.disabled,"onClick:close":t=>e.removeItem(n[e.relatedPrimaryKey])},{default:m(()=>[v(w,{collection:e.relatedCollection,item:n,template:e.displayTemplate},null,8,["collection","item","template"])]),_:2},1032,["disabled","onClick:close"]))),128))])):p("v-if",!0),e.loading?(c(),f("div",ge,[v(k,{indeterminate:"",small:""})])):e.availableItems.length>0?(c(),f("div",ye,[(c(!0),f(s,null,d(e.availableItems,t=>(c(),f("div",{key:t[e.relatedPrimaryKey],class:C(["item",{selected:e.isSelected(t[e.relatedPrimaryKey])}]),onClick:n=>e.toggleItem(t)},[v(j,{"model-value":e.isSelected(t[e.relatedPrimaryKey]),disabled:e.disabled,onClick:n[1]||(n[1]=I(()=>{},["stop"]))},null,8,["model-value","disabled"]),h("div",be,[v(w,{collection:e.relatedCollection,item:t,template:e.displayTemplate},null,8,["collection","item","template"])])],10,_e))),128))])):e.searchQuery&&!e.loading?(c(),f("div",we,y(e.t("no_items_found")),1)):p("v-if",!0),e.enableCreate?(c(),g(E,{key:4,small:"",class:"add-new",disabled:e.disabled,onClick:e.createNew},{default:m(()=>[v(l,{name:"add",small:""}),_(" "+y(e.t("create_new")),1)]),_:1},8,["disabled","onClick"])):p("v-if",!0),v(A,{modelValue:e.drawerOpen,"onUpdate:modelValue":n[4]||(n[4]=n=>e.drawerOpen=n),title:e.t("create_item"),persistent:"",onCancel:n[5]||(n[5]=n=>e.drawerOpen=!1)},{actions:m(()=>[v(E,{secondary:"",onClick:n[2]||(n[2]=n=>e.drawerOpen=!1)},{default:m(()=>[_(y(e.t("cancel")),1)]),_:1}),v(E,{loading:e.saving,onClick:e.saveNewItem},{default:m(()=>[_(y(e.t("save")),1)]),_:1},8,["loading","onClick"])]),default:m(()=>[h("div",xe,[v(S,{modelValue:e.newItem,"onUpdate:modelValue":n[3]||(n[3]=n=>e.newItem=n),collection:e.relatedCollection,"primary-key":"+",loading:!1,disabled:!1},null,8,["modelValue","collection"])])]),_:1},8,["modelValue","title"])])):(c(),g(i,{key:0,type:"warning"},{default:m(()=>[_(y(e.t("relationship_not_setup")),1)]),_:1}))}],["__scopeId","data-v-f64c38d2"],["__file","interface.vue"]]),types:["alias"],localTypes:["m2m"],group:"relational",options:({relations:e})=>{const n=e.m2m;return[{field:"template",name:"$t:display_template",meta:{interface:"system-display-template",options:{collectionName:n?.related_collection},width:"full"}},{field:"enableCreate",name:"Enable Create",type:"boolean",meta:{interface:"boolean",options:{label:"Allow creating new items"},width:"half"},schema:{default_value:!1}},{field:"filter",name:"$t:filter",type:"json",meta:{interface:"system-filter",options:{collectionName:n?.related_collection},width:"full"}}]},recommendedDisplays:["related-values"]});A("\n.m2m-dropdown[data-v-e352301e] {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  position: relative;\n}\n.selected-items[data-v-e352301e] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n  padding: 8px;\n  background-color: var(--theme--background-subdued);\n  border-radius: var(--theme--border-radius);\n  min-height: 40px;\n}\n.dropdown-container[data-v-e352301e] {\n  position: absolute;\n  top: 100%;\n  left: 0;\n  right: 0;\n  z-index: 100;\n  background-color: var(--theme--background);\n  border: var(--theme--border-width) solid var(--theme--form--field--input--border-color);\n  border-radius: var(--theme--border-radius);\n  margin-top: 4px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n.loading-container[data-v-e352301e] {\n  display: flex;\n  justify-content: center;\n  padding: 20px;\n}\n.items-list[data-v-e352301e] {\n  max-height: 300px;\n  overflow-y: auto;\n}\n.item[data-v-e352301e] {\n  padding: 8px 12px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  transition: background-color var(--fast) var(--transition);\n  border-bottom: var(--theme--border-width) solid\n  var(--theme--form--field--input--border-color);\n}\n.item[data-v-e352301e]:last-child {\n  border-bottom: none;\n}\n.item[data-v-e352301e]:hover {\n  background-color: var(--theme--background-subdued);\n}\n.item.selected[data-v-e352301e] {\n  background-color: var(--theme--primary-background);\n}\n.item-content[data-v-e352301e] {\n  flex: 1;\n}\n.no-results[data-v-e352301e] {\n  padding: 20px;\n  text-align: center;\n  color: var(--theme--foreground-subdued);\n}\n.add-new[data-v-e352301e] {\n  align-self: flex-start;\n  margin: 8px;\n}\n.drawer-content[data-v-e352301e] {\n  padding: var(--content-padding);\n  padding-top: 0;\n  padding-bottom: var(--content-padding-bottom);\n}\n[data-v-e352301e] .v-chip {\n  cursor: pointer;\n}\n",{});const Ce=b({props:{value:{type:Array,default:()=>[]},collection:{type:String,required:!0},field:{type:String,required:!0},primaryKey:{type:[String,Number],required:!0},disabled:{type:Boolean,default:!1},template:{type:String,default:null},enableCreate:{type:Boolean,default:!1},filter:{type:Object,default:null}},emits:["input"],setup(t,{emit:a}){const{t:i}=j(),u=e(),{useRelationsStore:c,useFieldsStore:f}=n(),s=c(),d=f(),p=r([]),v=r(!1),h=r(""),m=r(!1),g=r({}),y=r(!1),_=r(!1),b=w(()=>{const e=s.getRelationsForField(t.collection,t.field);if(!e||0===e.length)return null;const n=e.find(e=>e.related_collection===t.collection&&e.collection!==t.collection);if(!n)return null;const r=n.collection,a=e.find(e=>e.collection===r&&e.related_collection!==t.collection);return a?{junctionCollection:r,relatedCollection:a.related_collection,relatedField:a.field}:null}),x=w(()=>b.value?.relatedCollection);w(()=>b.value?.junctionCollection);const k=w(()=>{if(!x.value)return"id";const e=d.getPrimaryKeyFieldForCollection(x.value);return e?.field||"id"}),C=w(()=>{if(t.template)return t.template;return d.getFieldsForCollection(x.value).some(e=>"name"===e.field)?"{{ name }}":`{{ ${k.value} }}`}),I=w(()=>{if(!t.value||!Array.isArray(t.value))return[];const e=b.value?.relatedField;if(!e)return[];const n=t.value.map(n=>{if(!n)return null;if("object"==typeof n){const t=n[e];return t?"object"==typeof t&&null!==t?t[k.value]:t:null}return n}).filter(e=>null!=e);return console.log("DEBUG: Selected item IDs:",n),n}),E=w(()=>{const e=p.value.filter(e=>I.value.includes(e[k.value]));return console.log("DEBUG: Selected items data:",e),e}),S=w(()=>p.value),A=e=>I.value.includes(e),O=async(e="")=>{if(x.value){v.value=!0;try{const n={limit:100,fields:["*"]};if(e){const t=d.getFieldsForCollection(x.value).filter(e=>["string","text"].includes(e.type)&&!e.meta?.hidden).map(e=>e.field);t.length>0&&(n.filter={_or:t.map(n=>({[n]:{_contains:e}}))})}t.filter&&(n.filter=n.filter?{_and:[n.filter,t.filter]}:t.filter);const r=await u.get(`/items/${x.value}`,{params:n});p.value=r.data.data||[],console.log("DEBUG: Fetched items:",p.value)}catch(e){console.error("Error fetching items:",e),p.value=[]}finally{v.value=!1}}},D=ne.debounce(e=>{O(e)},300),F=e=>{const n=b.value?.relatedField;if(!n)return;if(!e||0===e.length)return a("input",[]),void console.log("DEBUG: Emitted empty array");const r=e.map(e=>{const r=t.value?.find(t=>{if(!t||"object"!=typeof t)return!1;const r=t[n];return"object"==typeof r&&null!==r?r[k.value]===e:r===e});if(r)return console.log("DEBUG: Preserving existing junction:",r),r;const a={[n]:e};return console.log("DEBUG: Creating new junction:",a),a});a("input",r),console.log("DEBUG: Emitted updated value:",r)};return o(async()=>{await O()}),l(()=>x.value,async()=>{x.value&&await O()}),l(()=>t.value,async e=>{if(console.log("DEBUG: Value changed:",e),!(e&&Array.isArray(e)&&0!==e.length&&x.value&&k.value))return;const n=I.value.filter(e=>!p.value.some(n=>n[k.value]===e));if(console.log("DEBUG: Missing IDs:",n),n.length>0)try{const e=(await u.get(`/items/${x.value}`,{params:{filter:{[k.value]:{_in:n}},fields:["*"]}})).data.data||[];console.log("DEBUG: Fetched missing items:",e),e.forEach(e=>{p.value.some(n=>n[k.value]===e[k.value])||p.value.push(e)})}catch(e){console.error("Error fetching selected items:",e)}},{immediate:!0,deep:!0}),{t:i,relationInfo:b,items:p,loading:v,searchQuery:h,selectedItemsData:E,availableItems:S,isSelected:A,onSearchInput:D,clearSearch:()=>{h.value="",O()},openList:()=>{t.disabled||(_.value=!0)},closeList:()=>{_.value=!1},toggleItem:e=>{if(t.disabled)return;const n=e[k.value];let r;r=A(n)?I.value.filter(e=>e!==n):[...I.value,n],F(r)},removeItem:e=>{if(t.disabled)return;const n=I.value.filter(n=>n!==e);F(n)},displayTemplate:C,relatedCollection:x,relatedPrimaryKeyFieldName:k,createNew:()=>{g.value={},m.value=!0},drawerOpen:m,newItem:g,saving:y,saveNewItem:async()=>{if(x.value){y.value=!0;try{const e=(await u.post(`/items/${x.value}`,g.value)).data.data;p.value.unshift(e);const n=e[k.value];F([...I.value,n]),m.value=!1,g.value={}}catch(e){console.error("Error saving new item:",e)}finally{y.value=!1}}},listOpen:_,getItemDisplay:e=>{if(!e)return"";let n=C.value;const t=n.match(/\{\{\s*(\w+)\s*\}\}/g);return t&&t.forEach(t=>{const r=t.replace(/\{\{\s*|\s*\}\}/g,""),a=e[r];n=n.replace(t,a||"")}),n||e[k.value]||""}}},directives:{"click-outside":{beforeMount(e,n){e.clickOutsideEvent=t=>{e===t.target||e.contains(t.target)||n.value()},document.addEventListener("click",e.clickOutsideEvent)},unmounted(e){document.removeEventListener("click",e.clickOutsideEvent)}}}}),Ie={key:1,class:"m2m-dropdown"},je={key:0,class:"selected-items"},Ee={key:1,class:"dropdown-container"},Se={key:0,class:"loading-container"},Ae={key:1,class:"items-list"},Oe=["onClick"],De={class:"item-content"},Fe={key:2,class:"no-results"},Re={class:"drawer-content"};const Ue=[Y,pe,ke,t({id:"junction-dropdown",name:"Junction M2M Dropdown",description:"Searchable dropdown for Many-to-Many relationships via junction table",icon:"link",component:O(Ce,[["render",function(e,n,t,r,a,o){const i=u("v-notice"),l=u("v-icon"),b=u("v-input"),w=u("v-chip"),j=u("v-progress-circular"),E=u("v-checkbox"),S=u("v-button"),A=u("v-form"),O=u("v-drawer"),D=x("click-outside");return e.relationInfo?k((c(),f("div",Ie,[v(b,{modelValue:e.searchQuery,"onUpdate:modelValue":[n[0]||(n[0]=n=>e.searchQuery=n),e.onSearchInput],placeholder:e.t("search_items"),disabled:e.disabled,onFocus:e.openList,onClick:e.openList},{prepend:m(()=>[v(l,{name:"search"})]),append:m(()=>[e.searchQuery?(c(),g(l,{key:0,name:"close",clickable:"",onClick:e.clearSearch},null,8,["onClick"])):p("v-if",!0)]),_:1},8,["modelValue","placeholder","disabled","onUpdate:modelValue","onFocus","onClick"]),e.selectedItemsData.length>0?(c(),f("div",je,[(c(!0),f(s,null,d(e.selectedItemsData,n=>(c(),g(w,{key:n[e.relatedPrimaryKeyFieldName],small:"","close-icon":"close",disabled:e.disabled,"onClick:close":t=>e.removeItem(n[e.relatedPrimaryKeyFieldName])},{default:m(()=>[_(y(e.getItemDisplay(n)),1)]),_:2},1032,["disabled","onClick:close"]))),128))])):p("v-if",!0),e.listOpen?(c(),f("div",Ee,[e.loading?(c(),f("div",Se,[v(j,{indeterminate:"",small:""})])):e.availableItems.length>0?(c(),f("div",Ae,[(c(!0),f(s,null,d(e.availableItems,n=>(c(),f("div",{key:n[e.relatedPrimaryKeyFieldName],class:C(["item",{selected:e.isSelected(n[e.relatedPrimaryKeyFieldName])}]),onClick:t=>e.toggleItem(n)},[v(E,{"model-value":e.isSelected(n[e.relatedPrimaryKeyFieldName]),disabled:e.disabled,onClick:I(t=>e.toggleItem(n),["stop"])},null,8,["model-value","disabled","onClick"]),h("div",De,y(e.getItemDisplay(n)),1)],10,Oe))),128))])):e.loading?p("v-if",!0):(c(),f("div",Fe,y(e.searchQuery?e.t("no_items_found"):e.t("no_items_available")),1)),e.enableCreate?(c(),g(S,{key:3,small:"",class:"add-new",disabled:e.disabled,onClick:e.createNew},{default:m(()=>[v(l,{name:"add",small:""}),_(" "+y(e.t("create_new")),1)]),_:1},8,["disabled","onClick"])):p("v-if",!0)])):p("v-if",!0),v(O,{modelValue:e.drawerOpen,"onUpdate:modelValue":n[3]||(n[3]=n=>e.drawerOpen=n),title:e.t("create_item"),persistent:"",onCancel:n[4]||(n[4]=n=>e.drawerOpen=!1)},{actions:m(()=>[v(S,{secondary:"",onClick:n[1]||(n[1]=n=>e.drawerOpen=!1)},{default:m(()=>[_(y(e.t("cancel")),1)]),_:1}),v(S,{loading:e.saving,onClick:e.saveNewItem},{default:m(()=>[_(y(e.t("save")),1)]),_:1},8,["loading","onClick"])]),default:m(()=>[h("div",Re,[v(A,{modelValue:e.newItem,"onUpdate:modelValue":n[2]||(n[2]=n=>e.newItem=n),collection:e.relatedCollection,"primary-key":"+",loading:!1,disabled:!1},null,8,["modelValue","collection"])])]),_:1},8,["modelValue","title"])])),[[D,e.closeList]]):(c(),g(i,{key:0,type:"warning"},{default:m(()=>[_(y(e.t("relationship_not_setup")),1)]),_:1}))}],["__scopeId","data-v-e352301e"],["__file","interface.vue"]]),types:["alias"],localTypes:["m2m"],group:"relational",options:({relations:e})=>{let n=null;if(console.log("DEBUG options: relations received:",e),e&&e.length>=2){const t=e.find(e=>e.collection!==e.related_collection);if(console.log("DEBUG options: junction relation:",t),t){const r=t.collection,a=e.find(n=>n.collection===r&&n.related_collection!==e[0].related_collection);console.log("DEBUG options: target relation:",a),a&&(n=a.related_collection)}}return console.log("DEBUG options: final relatedCollection:",n),[{field:"template",name:"$t:display_template",meta:{interface:"system-display-template",options:{collectionName:n},width:"full"}},{field:"enableCreate",name:"Enable Create",type:"boolean",meta:{interface:"boolean",options:{label:"Allow creating new items in related collection"},width:"half"},schema:{default_value:!1}},{field:"filter",name:"$t:filter",type:"json",meta:{interface:"system-filter",options:{collectionName:n},width:"full"}}]},recommendedDisplays:["related-values"]})],Ve=[],ze=[],Ne=[],Be=[],Te=[],Le=[];export{Ve as displays,Ue as interfaces,ze as layouts,Ne as modules,Le as operations,Be as panels,Te as themes};
