services:
  directus:
    image: directus/directus:11.5.1
    ports:
      - "8055:8055"
    volumes:
      - ./database:/directus/database
      - ./uploads:/directus/uploads
      - ./extensions:/directus/extensions
    environment:
      SECRET: "${SECRET}"
      ADMIN_EMAIL: "${ADMIN_EMAIL}"
      ADMIN_PASSWORD: "${ADMIN_PASSWORD}"
      DB_CLIENT: "${DB_CLIENT}"
      DB_FILENAME: "${DB_FILENAME}"
      WEBSOCKETS_ENABLED: "${WEBSOCKETS_ENABLED}"
      
      # âœ… Enable CORS properly
      CORS_ENABLED: "true"
      CORS_ORIGIN: "http://localhost:5173,https://construct-africa.netlify.app,https://cavally-sightable-jamel.ngrok-free.dev"
      CORS_METHODS: "GET,POST,PATCH,DELETE,OPTIONS"
      CORS_HEADERS: "Content-Type,Authorization,ngrok-skip-browser-warning"
      CORS_EXPOSE_HEADERS: "Content-Type,Authorization,ngrok-skip-browser-warning"
      CORS_CREDENTIALS: "true"